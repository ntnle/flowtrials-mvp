(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();const ji=!1;var yn=Array.isArray,Ac=Array.prototype.indexOf,Qn=Array.from,No=Object.defineProperty,Wr=Object.getOwnPropertyDescriptor,Uo=Object.getOwnPropertyDescriptors,Pc=Object.prototype,Oc=Array.prototype,sa=Object.getPrototypeOf,Ua=Object.isExtensible;function Js(t){return typeof t=="function"}const Vr=()=>{};function Rc(t){return t()}function Mn(t){for(var e=0;e<t.length;e++)t[e]()}function Lo(){var t,e,r=new Promise((s,n)=>{t=s,e=n});return{promise:r,resolve:t,reject:e}}const It=2,na=4,Xn=8,Do=1<<24,Nr=16,Ur=32,hs=64,Zn=128,mr=512,Ot=1024,Ft=2048,_r=4096,Xt=8192,Cr=16384,ia=32768,Hr=65536,La=1<<17,qo=1<<18,Us=1<<19,Bo=1<<20,Rr=1<<25,us=32768,Ni=1<<21,aa=1<<22,Gr=1<<23,Ir=Symbol("$state"),Mo=Symbol("legacy props"),Cc=Symbol(""),Ts=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ei(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ic(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function jc(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Nc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Uc(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Lc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Dc(t){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function qc(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Bc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Mc(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function zc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Fc(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Wc=1,Vc=2,zo=4,Gc=8,Kc=16,Hc=1,Jc=2,Fo=4,Yc=8,Qc=16,Xc=1,Zc=2,Pt=Symbol(),eu="http://www.w3.org/1999/xhtml",tu="http://www.w3.org/2000/svg",ru="@attach";function su(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function nu(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Wo(t){return t===this.v}function Vo(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Go(t){return!Vo(t,this.v)}let Ls=!1,iu=!1;function au(){Ls=!0}let ke=null;function Cs(t){ke=t}function Wt(t,e=!1,r){ke={p:ke,i:!1,c:null,e:null,s:t,x:null,l:Ls&&!e?{s:null,u:null,$:[]}:null}}function Vt(t){var e=ke,r=e.e;if(r!==null){e.e=null;for(var s of r)cl(s)}return e.i=!0,ke=e.p,{}}function wn(){return!Ls||ke!==null&&ke.l===null}let ns=[];function Ko(){var t=ns;ns=[],Mn(t)}function Jr(t){if(ns.length===0&&!nn){var e=ns;queueMicrotask(()=>{e===ns&&Ko()})}ns.push(t)}function ou(){for(;ns.length>0;)Ko()}function Ho(t){var e=de;if(e===null)return ue.f|=Gr,t;if((e.f&ia)===0){if((e.f&Zn)===0)throw t;e.b.error(t)}else Is(t,e)}function Is(t,e){for(;e!==null;){if((e.f&Zn)!==0)try{e.b.error(t);return}catch(r){t=r}e=e.parent}throw t}const Cn=new Set;let ye=null,Bn=null,ar=null,ir=[],ti=null,Ui=!1,nn=!1;class xr{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#s=0;#r=0;#l=null;#i=new Set;#n=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(e){ir=[],Bn=null,this.apply();var r={parent:null,effect:null,effects:[],render_effects:[]};for(const s of e)this.#a(s,r);this.is_fork||this.#u(),this.is_deferred()?(this.#o(r.effects),this.#o(r.render_effects)):(Bn=this,ye=null,Da(r.render_effects),Da(r.effects),Bn=null,this.#l?.resolve()),ar=null}#a(e,r){e.f^=Ot;for(var s=e.first;s!==null;){var n=s.f,i=(n&(Ur|hs))!==0,a=i&&(n&Ot)!==0,l=a||(n&Xt)!==0||this.skipped_effects.has(s);if((s.f&Zn)!==0&&s.b?.is_pending()&&(r={parent:r,effect:s,effects:[],render_effects:[]}),!l&&s.fn!==null){i?s.f^=Ot:(n&na)!==0?r.effects.push(s):Bs(s)&&((s.f&Nr)!==0&&this.#i.add(s),Ns(s));var o=s.first;if(o!==null){s=o;continue}}var u=s.parent;for(s=s.next;s===null&&u!==null;)u===r.effect&&(this.#o(r.effects),this.#o(r.render_effects),r=r.parent),s=u.next,u=u.parent}}#o(e){for(const r of e)(r.f&Ft)!==0?this.#i.add(r):(r.f&_r)!==0&&this.#n.add(r),this.#c(r.deps),Ct(r,Ot)}#c(e){if(e!==null)for(const r of e)(r.f&It)===0||(r.f&us)===0||(r.f^=us,this.#c(r.deps))}capture(e,r){this.previous.has(e)||this.previous.set(e,r),(e.f&Gr)===0&&(this.current.set(e,e.v),ar?.set(e,e.v))}activate(){ye=this,this.apply()}deactivate(){ye===this&&(ye=null,ar=null)}flush(){if(this.activate(),ir.length>0){if(Jo(),ye!==null&&ye!==this)return}else this.#s===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#t)e(this);this.#t.clear()}#u(){if(this.#r===0){for(const e of this.#e)e();this.#e.clear()}this.#s===0&&this.#d()}#d(){if(Cn.size>1){this.previous.clear();var e=ar,r=!0,s={parent:null,effect:null,effects:[],render_effects:[]};for(const i of Cn){if(i===this){r=!1;continue}const a=[];for(const[o,u]of this.current){if(i.current.has(o))if(r&&u!==i.current.get(o))i.current.set(o,u);else continue;a.push(o)}if(a.length===0)continue;const l=[...i.current.keys()].filter(o=>!this.current.has(o));if(l.length>0){var n=ir;ir=[];const o=new Set,u=new Map;for(const d of a)Yo(d,l,o,u);if(ir.length>0){ye=i,i.apply();for(const d of ir)i.#a(d,s);i.deactivate()}ir=n}}ye=null,ar=e}this.committed=!0,Cn.delete(this)}increment(e){this.#s+=1,e&&(this.#r+=1)}decrement(e){this.#s-=1,e&&(this.#r-=1),this.revive()}revive(){for(const e of this.#i)this.#n.delete(e),Ct(e,Ft),ds(e);for(const e of this.#n)Ct(e,_r),ds(e);this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#t.add(e)}settled(){return(this.#l??=Lo()).promise}static ensure(){if(ye===null){const e=ye=new xr;Cn.add(ye),nn||xr.enqueue(()=>{ye===e&&e.flush()})}return ye}static enqueue(e){Jr(e)}apply(){}}function lu(t){var e=nn;nn=!0;try{for(var r;;){if(ou(),ir.length===0&&(ye?.flush(),ir.length===0))return ti=null,r;Jo()}}finally{nn=e}}function Jo(){var t=ls;Ui=!0;var e=null;try{var r=0;for(Vn(!0);ir.length>0;){var s=xr.ensure();if(r++>1e3){var n,i;cu()}s.process(ir),Kr.clear()}}finally{Ui=!1,Vn(t),ti=null}}function cu(){try{Lc()}catch(t){Is(t,ti)}}let Pr=null;function Da(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var s=t[r++];if((s.f&(Cr|Xt))===0&&Bs(s)&&(Pr=new Set,Ns(s),s.deps===null&&s.first===null&&s.nodes===null&&(s.teardown===null&&s.ac===null?fl(s):s.fn=null),Pr?.size>0)){Kr.clear();for(const n of Pr){if((n.f&(Cr|Xt))!==0)continue;const i=[n];let a=n.parent;for(;a!==null;)Pr.has(a)&&(Pr.delete(a),i.push(a)),a=a.parent;for(let l=i.length-1;l>=0;l--){const o=i[l];(o.f&(Cr|Xt))===0&&Ns(o)}}Pr.clear()}}Pr=null}}function Yo(t,e,r,s){if(!r.has(t)&&(r.add(t),t.reactions!==null))for(const n of t.reactions){const i=n.f;(i&It)!==0?Yo(n,e,r,s):(i&(aa|Nr))!==0&&(i&Ft)===0&&Qo(n,e,s)&&(Ct(n,Ft),ds(n))}}function Qo(t,e,r){const s=r.get(t);if(s!==void 0)return s;if(t.deps!==null)for(const n of t.deps){if(e.includes(n))return!0;if((n.f&It)!==0&&Qo(n,e,r))return r.set(n,!0),!0}return r.set(t,!1),!1}function ds(t){for(var e=ti=t;e.parent!==null;){e=e.parent;var r=e.f;if(Ui&&e===de&&(r&Nr)!==0&&(r&qo)===0)return;if((r&(hs|Ur))!==0){if((r&Ot)===0)return;e.f^=Ot}}ir.push(e)}function uu(t){let e=0,r=Yr(0),s;return()=>{cn()&&(c(r),qs(()=>(e===0&&(s=P(()=>t(()=>an(r)))),e+=1,()=>{Jr(()=>{e-=1,e===0&&(s?.(),s=void 0,an(r))})})))}}var du=Hr|Us|Zn;function hu(t,e,r){new fu(t,e,r)}class fu{parent;#e=!1;#t;#s=null;#r;#l;#i;#n=null;#a=null;#o=null;#c=null;#u=null;#d=0;#h=0;#v=!1;#f=null;#b=uu(()=>(this.#f=Yr(this.#d),()=>{this.#f=null}));constructor(e,r,s){this.#t=e,this.#r=r,this.#l=s,this.parent=de.b,this.#e=!!this.#r.pending,this.#i=kn(()=>{de.b=this;{var n=this.#m();try{this.#n=Mt(()=>s(n))}catch(i){this.error(i)}this.#h>0?this.#g():this.#e=!1}return()=>{this.#u?.remove()}},du)}#y(){try{this.#n=Mt(()=>this.#l(this.#t))}catch(e){this.error(e)}this.#e=!1}#w(){const e=this.#r.pending;e&&(this.#a=Mt(()=>e(this.#t)),xr.enqueue(()=>{var r=this.#m();this.#n=this.#p(()=>(xr.ensure(),Mt(()=>this.#l(r)))),this.#h>0?this.#g():(os(this.#a,()=>{this.#a=null}),this.#e=!1)}))}#m(){var e=this.#t;return this.#e&&(this.#u=Sr(),this.#t.before(this.#u),e=this.#u),e}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#p(e){var r=de,s=ue,n=ke;or(this.#i),zt(this.#i),Cs(this.#i.ctx);try{return e()}catch(i){return Ho(i),null}finally{or(r),zt(s),Cs(n)}}#g(){const e=this.#r.pending;this.#n!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),gl(this.#n,this.#c)),this.#a===null&&(this.#a=Mt(()=>e(this.#t)))}#_(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#_(e);return}this.#h+=e,this.#h===0&&(this.#e=!1,this.#a&&os(this.#a,()=>{this.#a=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(e){this.#_(e),this.#d+=e,this.#f&&js(this.#f,this.#d)}get_effect_pending(){return this.#b(),c(this.#f)}error(e){var r=this.#r.onerror;let s=this.#r.failed;if(this.#v||!r&&!s)throw e;this.#n&&(Rt(this.#n),this.#n=null),this.#a&&(Rt(this.#a),this.#a=null),this.#o&&(Rt(this.#o),this.#o=null);var n=!1,i=!1;const a=()=>{if(n){nu();return}n=!0,i&&Fc(),xr.ensure(),this.#d=0,this.#o!==null&&os(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#n=this.#p(()=>(this.#v=!1,Mt(()=>this.#l(this.#t)))),this.#h>0?this.#g():this.#e=!1};var l=ue;try{zt(null),i=!0,r?.(e,a),i=!1}catch(o){Is(o,this.#i&&this.#i.parent)}finally{zt(l)}s&&Jr(()=>{this.#o=this.#p(()=>{xr.ensure(),this.#v=!0;try{return Mt(()=>{s(this.#t,()=>e,()=>a)})}catch(o){return Is(o,this.#i.parent),null}finally{this.#v=!1}})})}}function Xo(t,e,r,s){const n=wn()?ri:oa;if(r.length===0&&t.length===0){s(e.map(n));return}var i=ye,a=de,l=vu();function o(){Promise.all(r.map(u=>pu(u))).then(u=>{l();try{s([...e.map(n),...u])}catch(d){(a.f&Cr)===0&&Is(d,a)}i?.deactivate(),zn()}).catch(u=>{Is(u,a)})}t.length>0?Promise.all(t).then(()=>{l();try{return o()}finally{i?.deactivate(),zn()}}):o()}function vu(){var t=de,e=ue,r=ke,s=ye;return function(i=!0){or(t),zt(e),Cs(r),i&&s?.activate()}}function zn(){or(null),zt(null),Cs(null)}function ri(t){var e=It|Ft,r=ue!==null&&(ue.f&It)!==0?ue:null;return de!==null&&(de.f|=Us),{ctx:ke,deps:null,effects:null,equals:Wo,f:e,fn:t,reactions:null,rv:0,v:Pt,wv:0,parent:r??de,ac:null}}function pu(t,e){let r=de;r===null&&Ic();var s=r.b,n=void 0,i=Yr(Pt),a=!ue,l=new Map;return Eu(()=>{var o=Lo();n=o.promise;try{Promise.resolve(t()).then(o.resolve,o.reject).then(()=>{u===ye&&u.committed&&u.deactivate(),zn()})}catch(f){o.reject(f),zn()}var u=ye;if(a){var d=!s.is_pending();s.update_pending_count(1),u.increment(d),l.get(u)?.reject(Ts),l.delete(u),l.set(u,o)}const h=(f,v=void 0)=>{if(u.activate(),v)v!==Ts&&(i.f|=Gr,js(i,v));else{(i.f&Gr)!==0&&(i.f^=Gr),js(i,f);for(const[g,m]of l){if(l.delete(g),g===u)break;m.reject(Ts)}}a&&(s.update_pending_count(-1),u.decrement(d))};o.promise.then(h,f=>h(null,f||"unknown"))}),Ds(()=>{for(const o of l.values())o.reject(Ts)}),new Promise(o=>{function u(d){function h(){d===n?o(i):u(n)}d.then(h,h)}u(n)})}function oa(t){const e=ri(t);return e.equals=Go,e}function Zo(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)Rt(e[r])}}function gu(t){for(var e=t.parent;e!==null;){if((e.f&It)===0)return(e.f&Cr)===0?e:null;e=e.parent}return null}function la(t){var e,r=de;or(gu(t));try{t.f&=~us,Zo(t),e=yl(t)}finally{or(r)}return e}function el(t){var e=la(t);if(t.equals(e)||(ye?.is_fork||(t.v=e),t.wv=_l()),!fs)if(ar!==null)(cn()||ye?.is_fork)&&ar.set(t,e);else{var r=(t.f&mr)===0?_r:Ot;Ct(t,r)}}let Li=new Set;const Kr=new Map;let tl=!1;function Yr(t,e){var r={f:0,v:t,reactions:null,equals:Wo,rv:0,wv:0};return r}function Dr(t,e){const r=Yr(t);return Au(r),r}function F(t,e=!1,r=!0){const s=Yr(t);return e||(s.equals=Go),Ls&&r&&ke!==null&&ke.l!==null&&(ke.l.s??=[]).push(s),s}function St(t,e){return S(t,P(()=>c(t))),e}function S(t,e,r=!1){ue!==null&&(!kr||(ue.f&La)!==0)&&wn()&&(ue.f&(It|Nr|aa|La))!==0&&!jr?.includes(t)&&zc();let s=r?As(e):e;return js(t,s)}function js(t,e){if(!t.equals(e)){var r=t.v;fs?Kr.set(t,e):Kr.set(t,r),t.v=e;var s=xr.ensure();s.capture(t,r),(t.f&It)!==0&&((t.f&Ft)!==0&&la(t),Ct(t,(t.f&mr)!==0?Ot:_r)),t.wv=_l(),rl(t,Ft),wn()&&de!==null&&(de.f&Ot)!==0&&(de.f&(Ur|hs))===0&&(nr===null?Pu([t]):nr.push(t)),!s.is_fork&&Li.size>0&&!tl&&mu()}return e}function mu(){tl=!1;var t=ls;Vn(!0);const e=Array.from(Li);try{for(const r of e)(r.f&Ot)!==0&&Ct(r,_r),Bs(r)&&Ns(r)}finally{Vn(t)}Li.clear()}function Fn(t,e=1){var r=c(t),s=e===1?r++:r--;return S(t,r),s}function an(t){S(t,t.v+1)}function rl(t,e){var r=t.reactions;if(r!==null)for(var s=wn(),n=r.length,i=0;i<n;i++){var a=r[i],l=a.f;if(!(!s&&a===de)){var o=(l&Ft)===0;if(o&&Ct(a,e),(l&It)!==0){var u=a;ar?.delete(u),(l&us)===0&&(l&mr&&(a.f|=us),rl(u,_r))}else o&&((l&Nr)!==0&&Pr!==null&&Pr.add(a),ds(a))}}}function As(t){if(typeof t!="object"||t===null||Ir in t)return t;const e=sa(t);if(e!==Pc&&e!==Oc)return t;var r=new Map,s=yn(t),n=Dr(0),i=cs,a=l=>{if(cs===i)return l();var o=ue,u=cs;zt(null),Fa(i);var d=l();return zt(o),Fa(u),d};return s&&r.set("length",Dr(t.length)),new Proxy(t,{defineProperty(l,o,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Bc();var d=r.get(o);return d===void 0?d=a(()=>{var h=Dr(u.value);return r.set(o,h),h}):S(d,u.value,!0),!0},deleteProperty(l,o){var u=r.get(o);if(u===void 0){if(o in l){const d=a(()=>Dr(Pt));r.set(o,d),an(n)}}else S(u,Pt),an(n);return!0},get(l,o,u){if(o===Ir)return t;var d=r.get(o),h=o in l;if(d===void 0&&(!h||Wr(l,o)?.writable)&&(d=a(()=>{var v=As(h?l[o]:Pt),g=Dr(v);return g}),r.set(o,d)),d!==void 0){var f=c(d);return f===Pt?void 0:f}return Reflect.get(l,o,u)},getOwnPropertyDescriptor(l,o){var u=Reflect.getOwnPropertyDescriptor(l,o);if(u&&"value"in u){var d=r.get(o);d&&(u.value=c(d))}else if(u===void 0){var h=r.get(o),f=h?.v;if(h!==void 0&&f!==Pt)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return u},has(l,o){if(o===Ir)return!0;var u=r.get(o),d=u!==void 0&&u.v!==Pt||Reflect.has(l,o);if(u!==void 0||de!==null&&(!d||Wr(l,o)?.writable)){u===void 0&&(u=a(()=>{var f=d?As(l[o]):Pt,v=Dr(f);return v}),r.set(o,u));var h=c(u);if(h===Pt)return!1}return d},set(l,o,u,d){var h=r.get(o),f=o in l;if(s&&o==="length")for(var v=u;v<h.v;v+=1){var g=r.get(v+"");g!==void 0?S(g,Pt):v in l&&(g=a(()=>Dr(Pt)),r.set(v+"",g))}if(h===void 0)(!f||Wr(l,o)?.writable)&&(h=a(()=>Dr(void 0)),S(h,As(u)),r.set(o,h));else{f=h.v!==Pt;var m=a(()=>As(u));S(h,m)}var _=Reflect.getOwnPropertyDescriptor(l,o);if(_?.set&&_.set.call(d,u),!f){if(s&&typeof o=="string"){var y=r.get("length"),O=Number(o);Number.isInteger(O)&&O>=y.v&&S(y,O+1)}an(n)}return!0},ownKeys(l){c(n);var o=Reflect.ownKeys(l).filter(h=>{var f=r.get(h);return f===void 0||f.v!==Pt});for(var[u,d]of r)d.v!==Pt&&!(u in l)&&o.push(u);return o},setPrototypeOf(){Mc()}})}function qa(t){try{if(t!==null&&typeof t=="object"&&Ir in t)return t[Ir]}catch{}return t}function sl(t,e){return Object.is(qa(t),qa(e))}var Ba,nl,il,al;function _u(){if(Ba===void 0){Ba=window,nl=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;il=Wr(e,"firstChild").get,al=Wr(e,"nextSibling").get,Ua(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Ua(r)&&(r.__t=void 0)}}function Sr(t=""){return document.createTextNode(t)}function Wn(t){return il.call(t)}function xn(t){return al.call(t)}function p(t,e){return Wn(t)}function G(t,e=!1){{var r=Wn(t);return r instanceof Comment&&r.data===""?xn(r):r}}function w(t,e=1,r=!1){let s=t;for(;e--;)s=xn(s);return s}function bu(t){t.textContent=""}function ol(){return!1}function yu(t,e){if(e){const r=document.body;t.autofocus=!0,Jr(()=>{document.activeElement===r&&t.focus()})}}let Ma=!1;function wu(){Ma||(Ma=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function si(t){var e=ue,r=de;zt(null),or(null);try{return t()}finally{zt(e),or(r)}}function ca(t,e,r,s=r){t.addEventListener(e,()=>si(r));const n=t.__on_r;n?t.__on_r=()=>{n(),s(!0)}:t.__on_r=()=>s(!0),wu()}function ll(t){de===null&&(ue===null&&Uc(),Nc()),fs&&jc()}function xu(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function br(t,e,r){var s=de;s!==null&&(s.f&Xt)!==0&&(t|=Xt);var n={ctx:ke,deps:null,nodes:null,f:t|Ft|mr,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{Ns(n),n.f|=ia}catch(l){throw Rt(n),l}else e!==null&&ds(n);var i=n;if(r&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&Us)===0&&(i=i.first,(t&Nr)!==0&&(t&Hr)!==0&&i!==null&&(i.f|=Hr)),i!==null&&(i.parent=s,s!==null&&xu(i,s),ue!==null&&(ue.f&It)!==0&&(t&hs)===0)){var a=ue;(a.effects??=[]).push(i)}return n}function cn(){return ue!==null&&!kr}function Ds(t){const e=br(Xn,null,!1);return Ct(e,Ot),e.teardown=t,e}function Di(t){ll();var e=de.f,r=!ue&&(e&Ur)!==0&&(e&ia)===0;if(r){var s=ke;(s.e??=[]).push(t)}else return cl(t)}function cl(t){return br(na|Bo,t,!1)}function ku(t){return ll(),br(Xn|Bo,t,!0)}function Su(t){xr.ensure();const e=br(hs|Us,t,!0);return(r={})=>new Promise(s=>{r.outro?os(e,()=>{Rt(e),s(void 0)}):(Rt(e),s(void 0))})}function ua(t){return br(na,t,!1)}function as(t,e){var r=ke,s={effect:null,ran:!1,deps:t};r.l.$.push(s),s.effect=qs(()=>{t(),!s.ran&&(s.ran=!0,P(e))})}function da(){var t=ke;qs(()=>{for(var e of t.l.$){e.deps();var r=e.effect;(r.f&Ot)!==0&&Ct(r,_r),Bs(r)&&Ns(r),e.ran=!1}})}function Eu(t){return br(aa|Us,t,!0)}function qs(t,e=0){return br(Xn|e,t,!0)}function L(t,e=[],r=[],s=[]){Xo(s,e,r,n=>{br(Xn,()=>t(...n.map(c)),!0)})}function kn(t,e=0){var r=br(Nr|e,t,!0);return r}function ul(t,e=0){var r=br(Do|e,t,!0);return r}function Mt(t){return br(Ur|Us,t,!0)}function dl(t){var e=t.teardown;if(e!==null){const r=fs,s=ue;za(!0),zt(null);try{e.call(null)}finally{za(r),zt(s)}}}function hl(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){const n=r.ac;n!==null&&si(()=>{n.abort(Ts)});var s=r.next;(r.f&hs)!==0?r.parent=null:Rt(r,e),r=s}}function $u(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&Ur)===0&&Rt(e),e=r}}function Rt(t,e=!0){var r=!1;(e||(t.f&qo)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(Tu(t.nodes.start,t.nodes.end),r=!0),hl(t,e&&!r),Gn(t,0),Ct(t,Cr);var s=t.nodes&&t.nodes.t;if(s!==null)for(const i of s)i.stop();dl(t);var n=t.parent;n!==null&&n.first!==null&&fl(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function Tu(t,e){for(;t!==null;){var r=t===e?null:xn(t);t.remove(),t=r}}function fl(t){var e=t.parent,r=t.prev,s=t.next;r!==null&&(r.next=s),s!==null&&(s.prev=r),e!==null&&(e.first===t&&(e.first=s),e.last===t&&(e.last=r))}function os(t,e,r=!0){var s=[];vl(t,s,!0);var n=()=>{r&&Rt(t),e&&e()},i=s.length;if(i>0){var a=()=>--i||n();for(var l of s)l.out(a)}else n()}function vl(t,e,r){if((t.f&Xt)===0){t.f^=Xt;var s=t.nodes&&t.nodes.t;if(s!==null)for(const l of s)(l.is_global||r)&&e.push(l);for(var n=t.first;n!==null;){var i=n.next,a=(n.f&Hr)!==0||(n.f&Ur)!==0&&(t.f&Nr)!==0;vl(n,e,a?r:!1),n=i}}}function ha(t){pl(t,!0)}function pl(t,e){if((t.f&Xt)!==0){t.f^=Xt,(t.f&Ot)===0&&(Ct(t,Ft),ds(t));for(var r=t.first;r!==null;){var s=r.next,n=(r.f&Hr)!==0||(r.f&Ur)!==0;pl(r,n?e:!1),r=s}var i=t.nodes&&t.nodes.t;if(i!==null)for(const a of i)(a.is_global||e)&&a.in()}}function gl(t,e){if(t.nodes)for(var r=t.nodes.start,s=t.nodes.end;r!==null;){var n=r===s?null:xn(r);e.append(r),r=n}}let ls=!1;function Vn(t){ls=t}let fs=!1;function za(t){fs=t}let ue=null,kr=!1;function zt(t){ue=t}let de=null;function or(t){de=t}let jr=null;function Au(t){ue!==null&&(jr===null?jr=[t]:jr.push(t))}let Bt=null,Jt=0,nr=null;function Pu(t){nr=t}let ml=1,un=0,cs=un;function Fa(t){cs=t}function _l(){return++ml}function Bs(t){var e=t.f;if((e&Ft)!==0)return!0;if(e&It&&(t.f&=~us),(e&_r)!==0){var r=t.deps;if(r!==null)for(var s=r.length,n=0;n<s;n++){var i=r[n];if(Bs(i)&&el(i),i.wv>t.wv)return!0}(e&mr)!==0&&ar===null&&Ct(t,Ot)}return!1}function bl(t,e,r=!0){var s=t.reactions;if(s!==null&&!jr?.includes(t))for(var n=0;n<s.length;n++){var i=s[n];(i.f&It)!==0?bl(i,e,!1):e===i&&(r?Ct(i,Ft):(i.f&Ot)!==0&&Ct(i,_r),ds(i))}}function yl(t){var e=Bt,r=Jt,s=nr,n=ue,i=jr,a=ke,l=kr,o=cs,u=t.f;Bt=null,Jt=0,nr=null,ue=(u&(Ur|hs))===0?t:null,jr=null,Cs(t.ctx),kr=!1,cs=++un,t.ac!==null&&(si(()=>{t.ac.abort(Ts)}),t.ac=null);try{t.f|=Ni;var d=t.fn,h=d(),f=t.deps;if(Bt!==null){var v;if(Gn(t,Jt),f!==null&&Jt>0)for(f.length=Jt+Bt.length,v=0;v<Bt.length;v++)f[Jt+v]=Bt[v];else t.deps=f=Bt;if(cn()&&(t.f&mr)!==0)for(v=Jt;v<f.length;v++)(f[v].reactions??=[]).push(t)}else f!==null&&Jt<f.length&&(Gn(t,Jt),f.length=Jt);if(wn()&&nr!==null&&!kr&&f!==null&&(t.f&(It|_r|Ft))===0)for(v=0;v<nr.length;v++)bl(nr[v],t);return n!==null&&n!==t&&(un++,nr!==null&&(s===null?s=nr:s.push(...nr))),(t.f&Gr)!==0&&(t.f^=Gr),h}catch(g){return Ho(g)}finally{t.f^=Ni,Bt=e,Jt=r,nr=s,ue=n,jr=i,Cs(a),kr=l,cs=o}}function Ou(t,e){let r=e.reactions;if(r!==null){var s=Ac.call(r,t);if(s!==-1){var n=r.length-1;n===0?r=e.reactions=null:(r[s]=r[n],r.pop())}}r===null&&(e.f&It)!==0&&(Bt===null||!Bt.includes(e))&&(Ct(e,_r),(e.f&mr)!==0&&(e.f^=mr,e.f&=~us),Zo(e),Gn(e,0))}function Gn(t,e){var r=t.deps;if(r!==null)for(var s=e;s<r.length;s++)Ou(t,r[s])}function Ns(t){var e=t.f;if((e&Cr)===0){Ct(t,Ot);var r=de,s=ls;de=t,ls=!0;try{(e&(Nr|Do))!==0?$u(t):hl(t),dl(t);var n=yl(t);t.teardown=typeof n=="function"?n:null,t.wv=ml;var i;ji&&iu&&(t.f&Ft)!==0&&t.deps}finally{ls=s,de=r}}}async function fa(){await Promise.resolve(),lu()}function c(t){var e=t.f,r=(e&It)!==0;if(ue!==null&&!kr){var s=de!==null&&(de.f&Cr)!==0;if(!s&&!jr?.includes(t)){var n=ue.deps;if((ue.f&Ni)!==0)t.rv<un&&(t.rv=un,Bt===null&&n!==null&&n[Jt]===t?Jt++:Bt===null?Bt=[t]:Bt.includes(t)||Bt.push(t));else{(ue.deps??=[]).push(t);var i=t.reactions;i===null?t.reactions=[ue]:i.includes(ue)||i.push(ue)}}}if(fs){if(Kr.has(t))return Kr.get(t);if(r){var a=t,l=a.v;return((a.f&Ot)===0&&a.reactions!==null||xl(a))&&(l=la(a)),Kr.set(a,l),l}}else r&&(!ar?.has(t)||ye?.is_fork&&!cn())&&(a=t,Bs(a)&&el(a),ls&&cn()&&(a.f&mr)===0&&wl(a));if(ar?.has(t))return ar.get(t);if((t.f&Gr)!==0)throw t.v;return t.v}function wl(t){if(t.deps!==null){t.f^=mr;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&It)!==0&&(e.f&mr)===0&&wl(e)}}function xl(t){if(t.v===Pt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Kr.has(e)||(e.f&It)!==0&&xl(e))return!0;return!1}function P(t){var e=kr;try{return kr=!0,t()}finally{kr=e}}const Ru=-7169;function Ct(t,e){t.f=t.f&Ru|e}function er(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Ir in t)qi(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&Ir in r&&qi(r)}}}function qi(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let s in t)try{qi(t[s],e)}catch{}const r=sa(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const s=Uo(r);for(let n in s){const i=s[n].get;if(i)try{i.call(t)}catch{}}}}}function Cu(t){return t.endsWith("capture")&&t!=="gotpointercapture"&&t!=="lostpointercapture"}const Iu=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function ju(t){return Iu.includes(t)}const Nu={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Uu(t){return t=t.toLowerCase(),Nu[t]??t}const Lu=["touchstart","touchmove"];function Du(t){return Lu.includes(t)}const kl=new Set,Bi=new Set;function Sl(t,e,r,s={}){function n(i){if(s.capture||tn.call(e,i),!i.cancelBubble)return si(()=>r?.call(this,i))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Jr(()=>{e.addEventListener(t,n,s)}):e.addEventListener(t,n,s),n}function M(t,e,r,s,n){var i={capture:s,passive:n},a=Sl(t,e,r,i);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Ds(()=>{e.removeEventListener(t,a,i)})}function qu(t){for(var e=0;e<t.length;e++)kl.add(t[e]);for(var r of Bi)r(t)}let Wa=null;function tn(t){var e=this,r=e.ownerDocument,s=t.type,n=t.composedPath?.()||[],i=n[0]||t.target;Wa=t;var a=0,l=Wa===t&&t.__root;if(l){var o=n.indexOf(l);if(o!==-1&&(e===document||e===window)){t.__root=e;return}var u=n.indexOf(e);if(u===-1)return;o<=u&&(a=o)}if(i=n[a]||t.target,i!==e){No(t,"currentTarget",{configurable:!0,get(){return i||r}});var d=ue,h=de;zt(null),or(null);try{for(var f,v=[];i!==null;){var g=i.assignedSlot||i.parentNode||i.host||null;try{var m=i["__"+s];m!=null&&(!i.disabled||t.target===i)&&m.call(i,t)}catch(_){f?v.push(_):f=_}if(t.cancelBubble||g===e||g===null)break;i=g}if(f){for(let _ of v)queueMicrotask(()=>{throw _});throw f}}finally{t.__root=e,delete t.currentTarget,zt(d),or(h)}}}function Bu(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function dn(t,e){var r=de;r.nodes===null&&(r.nodes={start:t,end:e,a:null,t:null})}function k(t,e){var r=(e&Xc)!==0,s=(e&Zc)!==0,n,i=!t.startsWith("<!>");return()=>{n===void 0&&(n=Bu(i?t:"<!>"+t),r||(n=Wn(n)));var a=s||nl?document.importNode(n,!0):n.cloneNode(!0);if(r){var l=Wn(a),o=a.lastChild;dn(l,o)}else dn(a,a);return a}}function Ye(t=""){{var e=Sr(t+"");return dn(e,e),e}}function pr(){var t=document.createDocumentFragment(),e=document.createComment(""),r=Sr();return t.append(e,r),dn(e,r),t}function b(t,e){t!==null&&t.before(e)}function N(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??=t.nodeValue)&&(t.__t=r,t.nodeValue=r+"")}function Mu(t,e){return zu(t,e)}const ps=new Map;function zu(t,{target:e,anchor:r,props:s={},events:n,context:i,intro:a=!0}){_u();var l=new Set,o=h=>{for(var f=0;f<h.length;f++){var v=h[f];if(!l.has(v)){l.add(v);var g=Du(v);e.addEventListener(v,tn,{passive:g});var m=ps.get(v);m===void 0?(document.addEventListener(v,tn,{passive:g}),ps.set(v,1)):ps.set(v,m+1)}}};o(Qn(kl)),Bi.add(o);var u=void 0,d=Su(()=>{var h=r??e.appendChild(Sr());return hu(h,{pending:()=>{}},f=>{if(i){Wt({});var v=ke;v.c=i}n&&(s.$$events=n),u=t(f,s)||{},i&&Vt()}),()=>{for(var f of l){e.removeEventListener(f,tn);var v=ps.get(f);--v===0?(document.removeEventListener(f,tn),ps.delete(f)):ps.set(f,v)}Bi.delete(o),h!==r&&h.parentNode?.removeChild(h)}});return Fu.set(u,d),u}let Fu=new WeakMap;class va{anchor;#e=new Map;#t=new Map;#s=new Map;#r=new Set;#l=!0;constructor(e,r=!0){this.anchor=e,this.#l=r}#i=()=>{var e=ye;if(this.#e.has(e)){var r=this.#e.get(e),s=this.#t.get(r);if(s)ha(s),this.#r.delete(r);else{var n=this.#s.get(r);n&&(this.#t.set(r,n.effect),this.#s.delete(r),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),s=n.effect)}for(const[i,a]of this.#e){if(this.#e.delete(i),i===e)break;const l=this.#s.get(a);l&&(Rt(l.effect),this.#s.delete(a))}for(const[i,a]of this.#t){if(i===r||this.#r.has(i))continue;const l=()=>{if(Array.from(this.#e.values()).includes(i)){var u=document.createDocumentFragment();gl(a,u),u.append(Sr()),this.#s.set(i,{effect:a,fragment:u})}else Rt(a);this.#r.delete(i),this.#t.delete(i)};this.#l||!s?(this.#r.add(i),os(a,l,!1)):l()}}};#n=e=>{this.#e.delete(e);const r=Array.from(this.#e.values());for(const[s,n]of this.#s)r.includes(s)||(Rt(n.effect),this.#s.delete(s))};ensure(e,r){var s=ye,n=ol();if(r&&!this.#t.has(e)&&!this.#s.has(e))if(n){var i=document.createDocumentFragment(),a=Sr();i.append(a),this.#s.set(e,{effect:Mt(()=>r(a)),fragment:i})}else this.#t.set(e,Mt(()=>r(this.anchor)));if(this.#e.set(s,e),n){for(const[l,o]of this.#t)l===e?s.skipped_effects.delete(o):s.skipped_effects.add(o);for(const[l,o]of this.#s)l===e?s.skipped_effects.delete(o.effect):s.skipped_effects.add(o.effect);s.oncommit(this.#i),s.ondiscard(this.#n)}else this.#i()}}function U(t,e,r=!1){var s=new va(t),n=r?Hr:0;function i(a,l){s.ensure(a,l)}kn(()=>{var a=!1;e((l,o=!0)=>{a=!0,i(o,l)}),a||i(!1,null)},n)}function fr(t,e){return e}function Wu(t,e,r){for(var s=[],n=e.length,i,a=e.length,l=0;l<n;l++){let h=e[l];os(h,()=>{if(i){if(i.pending.delete(h),i.done.add(h),i.pending.size===0){var f=t.outrogroups;Mi(Qn(i.done)),f.delete(i),f.size===0&&(t.outrogroups=null)}}else a-=1},!1)}if(a===0){var o=s.length===0&&r!==null;if(o){var u=r,d=u.parentNode;bu(d),d.append(u),t.items.clear()}Mi(e,!o)}else i={pending:new Set(e),done:new Set},(t.outrogroups??=new Set).add(i)}function Mi(t,e=!0){for(var r=0;r<t.length;r++)Rt(t[r],e)}var Va;function vr(t,e,r,s,n,i=null){var a=t,l=new Map,o=(e&zo)!==0;if(o){var u=t;a=u.appendChild(Sr())}var d=null,h=oa(()=>{var y=r();return yn(y)?y:y==null?[]:Qn(y)}),f,v=!0;function g(){_.fallback=d,Vu(_,f,a,e,s),d!==null&&(f.length===0?(d.f&Rr)===0?ha(d):(d.f^=Rr,rn(d,null,a)):os(d,()=>{d=null}))}var m=kn(()=>{f=c(h);for(var y=f.length,O=new Set,x=ye,T=ol(),A=0;A<y;A+=1){var E=f[A],R=s(E,A),$=v?null:l.get(R);$?($.v&&js($.v,E),$.i&&js($.i,A),T&&x.skipped_effects.delete($.e)):($=Gu(l,v?a:Va??=Sr(),E,R,A,n,e,r),v||($.e.f|=Rr),l.set(R,$)),O.add(R)}if(y===0&&i&&!d&&(v?d=Mt(()=>i(a)):(d=Mt(()=>i(Va??=Sr())),d.f|=Rr)),!v)if(T){for(const[I,Q]of l)O.has(I)||x.skipped_effects.add(Q.e);x.oncommit(g),x.ondiscard(()=>{})}else g();c(h)}),_={effect:m,items:l,outrogroups:null,fallback:d};v=!1}function Vu(t,e,r,s,n){var i=(s&Gc)!==0,a=e.length,l=t.items,o=t.effect.first,u,d=null,h,f=[],v=[],g,m,_,y;if(i)for(y=0;y<a;y+=1)g=e[y],m=n(g,y),_=l.get(m).e,(_.f&Rr)===0&&(_.nodes?.a?.measure(),(h??=new Set).add(_));for(y=0;y<a;y+=1){if(g=e[y],m=n(g,y),_=l.get(m).e,t.outrogroups!==null)for(const Q of t.outrogroups)Q.pending.delete(_),Q.done.delete(_);if((_.f&Rr)!==0)if(_.f^=Rr,_===o)rn(_,null,r);else{var O=d?d.next:o;_===t.effect.last&&(t.effect.last=_.prev),_.prev&&(_.prev.next=_.next),_.next&&(_.next.prev=_.prev),qr(t,d,_),qr(t,_,O),rn(_,O,r),d=_,f=[],v=[],o=d.next;continue}if((_.f&Xt)!==0&&(ha(_),i&&(_.nodes?.a?.unfix(),(h??=new Set).delete(_))),_!==o){if(u!==void 0&&u.has(_)){if(f.length<v.length){var x=v[0],T;d=x.prev;var A=f[0],E=f[f.length-1];for(T=0;T<f.length;T+=1)rn(f[T],x,r);for(T=0;T<v.length;T+=1)u.delete(v[T]);qr(t,A.prev,E.next),qr(t,d,A),qr(t,E,x),o=x,d=E,y-=1,f=[],v=[]}else u.delete(_),rn(_,o,r),qr(t,_.prev,_.next),qr(t,_,d===null?t.effect.first:d.next),qr(t,d,_),d=_;continue}for(f=[],v=[];o!==null&&o!==_;)(u??=new Set).add(o),v.push(o),o=o.next;if(o===null)continue}(_.f&Rr)===0&&f.push(_),d=_,o=_.next}if(t.outrogroups!==null){for(const Q of t.outrogroups)Q.pending.size===0&&(Mi(Qn(Q.done)),t.outrogroups?.delete(Q));t.outrogroups.size===0&&(t.outrogroups=null)}if(o!==null||u!==void 0){var R=[];if(u!==void 0)for(_ of u)(_.f&Xt)===0&&R.push(_);for(;o!==null;)(o.f&Xt)===0&&o!==t.fallback&&R.push(o),o=o.next;var $=R.length;if($>0){var I=(s&zo)!==0&&a===0?r:null;if(i){for(y=0;y<$;y+=1)R[y].nodes?.a?.measure();for(y=0;y<$;y+=1)R[y].nodes?.a?.fix()}Wu(t,R,I)}}i&&Jr(()=>{if(h!==void 0)for(_ of h)_.nodes?.a?.apply()})}function Gu(t,e,r,s,n,i,a,l){var o=(a&Wc)!==0?(a&Kc)===0?F(r,!1,!1):Yr(r):null,u=(a&Vc)!==0?Yr(n):null;return{v:o,i:u,e:Mt(()=>(i(e,o??r,u??n,l),()=>{t.delete(s)}))}}function rn(t,e,r){if(t.nodes)for(var s=t.nodes.start,n=t.nodes.end,i=e&&(e.f&Rr)===0?e.nodes.start:r;s!==null;){var a=xn(s);if(i.before(s),s===n)return;s=a}}function qr(t,e,r){e===null?t.effect.first=r:e.next=r,r===null?t.effect.last=e:r.prev=e}function ni(t,e,r,s,n){var i=e.$$slots?.[r],a=!1;i===!0&&(i=e.children,a=!0),i===void 0||i(t,a?()=>s:s)}function Ga(t,e,r){var s=new va(t);kn(()=>{var n=e()??null;s.ensure(n,n&&(i=>r(i,n)))},Hr)}function Ku(t,e,r,s,n,i){var a=null,l=t,o=new va(l,!1);kn(()=>{const u=e()||null;var d=u==="svg"?tu:null;if(u===null){o.ensure(null,null);return}return o.ensure(u,h=>{if(u){if(a=d?document.createElementNS(d,u):document.createElement(u),dn(a,a),s){var f=a.appendChild(Sr());s(a,f)}de.nodes.end=a,h.before(a)}}),()=>{}},Hr),Ds(()=>{})}function Ys(t,e,r){ua(()=>{var s=P(()=>e(t,r?.())||{});if(s?.destroy)return()=>s.destroy()})}function Hu(t,e){var r=void 0,s;ul(()=>{r!==(r=e())&&(s&&(Rt(s),s=null),r&&(s=Mt(()=>{ua(()=>r(t))})))})}function El(t){var e,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(e=0;e<n;e++)t[e]&&(r=El(t[e]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function $l(){for(var t,e,r=0,s="",n=arguments.length;r<n;r++)(t=arguments[r])&&(e=El(t))&&(s&&(s+=" "),s+=e);return s}function Ju(t){return typeof t=="object"?$l(t):t??""}const Ka=[...` 	
\r\fÂ \v\uFEFF`];function Yu(t,e,r){var s=t==null?"":""+t;if(r){for(var n in r)if(r[n])s=s?s+" "+n:n;else if(s.length)for(var i=n.length,a=0;(a=s.indexOf(n,a))>=0;){var l=a+i;(a===0||Ka.includes(s[a-1]))&&(l===s.length||Ka.includes(s[l]))?s=(a===0?"":s.substring(0,a))+s.substring(l+1):a=l}}return s===""?null:s}function Ha(t,e=!1){var r=e?" !important;":";",s="";for(var n in t){var i=t[n];i!=null&&i!==""&&(s+=" "+n+": "+i+r)}return s}function mi(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function Qu(t,e){if(e){var r="",s,n;if(Array.isArray(e)?(s=e[0],n=e[1]):s=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,a=0,l=!1,o=[];s&&o.push(...Object.keys(s).map(mi)),n&&o.push(...Object.keys(n).map(mi));var u=0,d=-1;const m=t.length;for(var h=0;h<m;h++){var f=t[h];if(l?f==="/"&&t[h-1]==="*"&&(l=!1):i?i===f&&(i=!1):f==="/"&&t[h+1]==="*"?l=!0:f==='"'||f==="'"?i=f:f==="("?a++:f===")"&&a--,!l&&i===!1&&a===0){if(f===":"&&d===-1)d=h;else if(f===";"||h===m-1){if(d!==-1){var v=mi(t.substring(u,d).trim());if(!o.includes(v)){f!==";"&&h++;var g=t.substring(u,h).trim();r+=" "+g+";"}}u=h+1,d=-1}}}}return s&&(r+=Ha(s)),n&&(r+=Ha(n,!0)),r=r.trim(),r===""?null:r}return t==null?null:String(t)}function Fr(t,e,r,s,n,i){var a=t.__className;if(a!==r||a===void 0){var l=Yu(r,s,i);l==null?t.removeAttribute("class"):e?t.className=l:t.setAttribute("class",l),t.__className=r}else if(i&&n!==i)for(var o in i){var u=!!i[o];(n==null||u!==!!n[o])&&t.classList.toggle(o,u)}return i}function _i(t,e={},r,s){for(var n in r){var i=r[n];e[n]!==i&&(r[n]==null?t.style.removeProperty(n):t.style.setProperty(n,i,s))}}function Xu(t,e,r,s){var n=t.__style;if(n!==e){var i=Qu(e,s);i==null?t.removeAttribute("style"):t.style.cssText=i,t.__style=e}else s&&(Array.isArray(s)?(_i(t,r?.[0],s[0]),_i(t,r?.[1],s[1],"important")):_i(t,r,s));return s}function zi(t,e,r=!1){if(t.multiple){if(e==null)return;if(!yn(e))return su();for(var s of t.options)s.selected=e.includes(Ja(s));return}for(s of t.options){var n=Ja(s);if(sl(n,e)){s.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function Zu(t){var e=new MutationObserver(()=>{zi(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ds(()=>{e.disconnect()})}function Ja(t){return"__value"in t?t.__value:t.value}const Qs=Symbol("class"),Xs=Symbol("style"),Tl=Symbol("is custom element"),Al=Symbol("is html");function ed(t,e){var r=pa(t);r.checked!==(r.checked=e??void 0)&&(t.checked=e)}function td(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function Ya(t,e,r,s){var n=pa(t);n[e]!==(n[e]=r)&&(e==="loading"&&(t[Cc]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Pl(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function rd(t,e,r,s,n=!1,i=!1){var a=pa(t),l=a[Tl],o=!a[Al],u=e||{},d=t.tagName==="OPTION";for(var h in e)h in r||(r[h]=null);r.class?r.class=Ju(r.class):r[Qs]&&(r.class=null),r[Xs]&&(r.style??=null);var f=Pl(t);for(const T in r){let A=r[T];if(d&&T==="value"&&A==null){t.value=t.__value="",u[T]=A;continue}if(T==="class"){var v=t.namespaceURI==="http://www.w3.org/1999/xhtml";Fr(t,v,A,s,e?.[Qs],r[Qs]),u[T]=A,u[Qs]=r[Qs];continue}if(T==="style"){Xu(t,A,e?.[Xs],r[Xs]),u[T]=A,u[Xs]=r[Xs];continue}var g=u[T];if(!(A===g&&!(A===void 0&&t.hasAttribute(T)))){u[T]=A;var m=T[0]+T[1];if(m!=="$$")if(m==="on"){const E={},R="$$"+T;let $=T.slice(2);var _=ju($);if(Cu($)&&($=$.slice(0,-7),E.capture=!0),!_&&g){if(A!=null)continue;t.removeEventListener($,u[R],E),u[R]=null}if(A!=null)if(_)t[`__${$}`]=A,qu([$]);else{let I=function(Q){u[T].call(this,Q)};var x=I;u[R]=Sl($,t,I,E)}else _&&(t[`__${$}`]=void 0)}else if(T==="style")Ya(t,T,A);else if(T==="autofocus")yu(t,!!A);else if(!l&&(T==="__value"||T==="value"&&A!=null))t.value=t.__value=A;else if(T==="selected"&&d)td(t,A);else{var y=T;o||(y=Uu(y));var O=y==="defaultValue"||y==="defaultChecked";if(A==null&&!l&&!O)if(a[T]=null,y==="value"||y==="checked"){let E=t;const R=e===void 0;if(y==="value"){let $=E.defaultValue;E.removeAttribute(y),E.defaultValue=$,E.value=E.__value=R?$:null}else{let $=E.defaultChecked;E.removeAttribute(y),E.defaultChecked=$,E.checked=R?$:!1}}else t.removeAttribute(T);else O||f.includes(y)&&(l||typeof A!="string")?(t[y]=A,y in a&&(a[y]=Pt)):typeof A!="function"&&Ya(t,y,A)}}}return u}function Sn(t,e,r=[],s=[],n=[],i,a=!1,l=!1){Xo(n,r,s,o=>{var u=void 0,d={},h=t.nodeName==="SELECT",f=!1;if(ul(()=>{var g=e(...o.map(c)),m=rd(t,u,g,i,a,l);f&&h&&"value"in g&&zi(t,g.value);for(let y of Object.getOwnPropertySymbols(d))g[y]||Rt(d[y]);for(let y of Object.getOwnPropertySymbols(g)){var _=g[y];y.description===ru&&(!u||_!==u[y])&&(d[y]&&Rt(d[y]),d[y]=Mt(()=>Hu(t,()=>_))),m[y]=_}u=m}),h){var v=t;ua(()=>{zi(v,u.value,!0),Zu(v)})}f=!0})}function pa(t){return t.__attributes??={[Tl]:t.nodeName.includes("-"),[Al]:t.namespaceURI===eu}}var Qa=new Map;function Pl(t){var e=t.getAttribute("is")||t.nodeName,r=Qa.get(e);if(r)return r;Qa.set(e,r=[]);for(var s,n=t,i=Element.prototype;i!==n;){s=Uo(n);for(var a in s)s[a].set&&r.push(a);n=sa(n)}return r}function Ps(t,e,r=e){var s=new WeakSet;ca(t,"input",async n=>{var i=n?t.defaultValue:t.value;if(i=wi(t)?xi(i):i,r(i),ye!==null&&s.add(ye),await fa(),i!==(i=e())){var a=t.selectionStart,l=t.selectionEnd,o=t.value.length;if(t.value=i??"",l!==null){var u=t.value.length;a===l&&l===o&&u>o?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=a,t.selectionEnd=Math.min(l,u))}}}),P(e)==null&&t.value&&(r(wi(t)?xi(t.value):t.value),ye!==null&&s.add(ye)),qs(()=>{var n=e();if(t===document.activeElement){var i=Bn??ye;if(s.has(i))return}wi(t)&&n===xi(t.value)||t.type==="date"&&!n&&!t.value||n!==t.value&&(t.value=n??"")})}const bi=new Set;function yi(t,e,r,s,n=s){var i=r.getAttribute("type")==="checkbox",a=t;if(e!==null)for(var l of e)a=a[l]??=[];a.push(r),ca(r,"change",()=>{var o=r.__value;i&&(o=sd(a,o,r.checked)),n(o)},()=>n(i?[]:null)),qs(()=>{var o=s();i?(o=o||[],r.checked=o.includes(r.__value)):r.checked=sl(r.__value,o)}),Ds(()=>{var o=a.indexOf(r);o!==-1&&a.splice(o,1)}),bi.has(a)||(bi.add(a),Jr(()=>{a.sort((o,u)=>o.compareDocumentPosition(u)===4?-1:1),bi.delete(a)})),Jr(()=>{})}function Fi(t,e,r=e){ca(t,"change",s=>{var n=s?t.defaultChecked:t.checked;r(n)}),P(e)==null&&r(t.checked),qs(()=>{var s=e();t.checked=!!s})}function sd(t,e,r){for(var s=new Set,n=0;n<t.length;n+=1)t[n].checked&&s.add(t[n].__value);return r||s.delete(e),Array.from(s)}function wi(t){var e=t.type;return e==="number"||e==="range"}function xi(t){return t===""?null:+t}function Ol(t){return function(...e){var r=e[0];return r.stopPropagation(),t?.apply(this,e)}}function Rl(t){return function(...e){var r=e[0];return r.preventDefault(),t?.apply(this,e)}}function tr(t=!1){const e=ke,r=e.l.u;if(!r)return;let s=()=>er(e.s);if(t){let n=0,i={};const a=ri(()=>{let l=!1;const o=e.s;for(const u in o)o[u]!==i[u]&&(i[u]=o[u],l=!0);return l&&n++,n});s=()=>c(a)}r.b.length&&ku(()=>{Xa(e,s),Mn(r.b)}),Di(()=>{const n=P(()=>r.m.map(Rc));return()=>{for(const i of n)typeof i=="function"&&i()}}),r.a.length&&Di(()=>{Xa(e,s),Mn(r.a)})}function Xa(t,e){if(t.l.s)for(const r of t.l.s)c(r);e()}function At(t,e){var r=t.$$events?.[e.type],s=yn(r)?r.slice():r==null?[]:[r];for(var n of s)n.call(this,e)}function ga(t,e,r){if(t==null)return e(void 0),r&&r(void 0),Vr;const s=P(()=>t.subscribe(e,r));return s.unsubscribe?()=>s.unsubscribe():s}const gs=[];function Cl(t,e){return{subscribe:En(t,e).subscribe}}function En(t,e=Vr){let r=null;const s=new Set;function n(l){if(Vo(t,l)&&(t=l,r)){const o=!gs.length;for(const u of s)u[1](),gs.push(u,t);if(o){for(let u=0;u<gs.length;u+=2)gs[u][0](gs[u+1]);gs.length=0}}}function i(l){n(l(t))}function a(l,o=Vr){const u=[l,o];return s.add(u),s.size===1&&(r=e(n,i)||Vr),l(t),()=>{s.delete(u),s.size===0&&r&&(r(),r=null)}}return{set:n,update:i,subscribe:a}}function Il(t,e,r){const s=!Array.isArray(t),n=s?[t]:t;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return Cl(r,(a,l)=>{let o=!1;const u=[];let d=0,h=Vr;const f=()=>{if(d)return;h();const g=e(s?u[0]:u,a,l);i?a(g):h=typeof g=="function"?g:Vr},v=n.map((g,m)=>ga(g,_=>{u[m]=_,d&=~(1<<m),o&&f()},()=>{d|=1<<m}));return o=!0,f(),function(){Mn(v),h(),o=!1}})}function nd(t){let e;return ga(t,r=>e=r)(),e}let In=!1,Wi=Symbol();function hn(t,e,r){const s=r[e]??={store:null,source:F(void 0),unsubscribe:Vr};if(s.store!==t&&!(Wi in r))if(s.unsubscribe(),s.store=t??null,t==null)s.source.v=void 0,s.unsubscribe=Vr;else{var n=!0;s.unsubscribe=ga(t,i=>{n?s.source.v=i:S(s.source,i)}),n=!1}return t&&Wi in r?nd(t):c(s.source)}function ii(){const t={};function e(){Ds(()=>{for(var r in t)t[r].unsubscribe();No(t,Wi,{enumerable:!1,value:!0})})}return[t,e]}function id(t){var e=In;try{return In=!1,[t(),In]}finally{In=e}}const ad={get(t,e){if(!t.exclude.includes(e))return c(t.version),e in t.special?t.special[e]():t.props[e]},set(t,e,r){if(!(e in t.special)){var s=de;try{or(t.parent_effect),t.special[e]=Zt({get[e](){return t.props[e]}},e,Fo)}finally{or(s)}}return t.special[e](r),Fn(t.version),!0},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},deleteProperty(t,e){return t.exclude.includes(e)||(t.exclude.push(e),Fn(t.version)),!0},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Er(t,e){return new Proxy({props:t,exclude:e,special:{},version:Yr(0),parent_effect:de},ad)}const od={get(t,e){let r=t.props.length;for(;r--;){let s=t.props[r];if(Js(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s)return s[e]}},set(t,e,r){let s=t.props.length;for(;s--;){let n=t.props[s];Js(n)&&(n=n());const i=Wr(n,e);if(i&&i.set)return i.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let s=t.props[r];if(Js(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s){const n=Wr(s,e);return n&&!n.configurable&&(n.configurable=!0),n}}},has(t,e){if(e===Ir||e===Mo)return!1;for(let r of t.props)if(Js(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props)if(Js(r)&&(r=r()),!!r){for(const s in r)e.includes(s)||e.push(s);for(const s of Object.getOwnPropertySymbols(r))e.includes(s)||e.push(s)}return e}};function Za(...t){return new Proxy({props:t},od)}function Zt(t,e,r,s){var n=!Ls||(r&Jc)!==0,i=(r&Yc)!==0,a=(r&Qc)!==0,l=s,o=!0,u=()=>(o&&(o=!1,l=a?P(s):s),l),d;if(i){var h=Ir in t||Mo in t;d=Wr(t,e)?.set??(h&&e in t?x=>t[e]=x:void 0)}var f,v=!1;i?[f,v]=id(()=>t[e]):f=t[e],f===void 0&&s!==void 0&&(f=u(),d&&(n&&qc(),d(f)));var g;if(n?g=()=>{var x=t[e];return x===void 0?u():(o=!0,x)}:g=()=>{var x=t[e];return x!==void 0&&(l=void 0),x===void 0?l:x},n&&(r&Fo)===0)return g;if(d){var m=t.$$legacy;return(function(x,T){return arguments.length>0?((!n||!T||m||v)&&d(T?g():x),x):g()})}var _=!1,y=((r&Hc)!==0?ri:oa)(()=>(_=!1,g()));i&&c(y);var O=de;return(function(x,T){if(arguments.length>0){const A=T?c(y):n&&i?As(x):x;return S(y,A),_=!0,l!==void 0&&(l=A),x}return fs&&_||(O.f&Cr)!==0?y.v:c(y)})}function ai(t){ke===null&&ei(),Ls&&ke.l!==null?Nl(ke).m.push(t):Di(()=>{const e=P(t);if(typeof e=="function")return e})}function ld(t){ke===null&&ei(),ai(()=>()=>P(t))}function cd(t,e,{bubbles:r=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:e,bubbles:r,cancelable:s})}function jl(){const t=ke;return t===null&&ei(),(e,r,s)=>{const n=t.s.$$events?.[e];if(n){const i=yn(n)?n.slice():[n],a=cd(e,r,s);for(const l of i)l.call(t.x,a);return!a.defaultPrevented}return!0}}function ud(t){ke===null&&ei(),ke.l===null&&Dc(),Nl(ke).a.push(t)}function Nl(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const dd="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(dd);au();function hd(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var r,s,n,i,a=[],l="",o=t.split("/");for(o[0]||o.shift();n=o.shift();)r=n[0],r==="*"?(a.push("wild"),l+="/(.*)"):r===":"?(s=n.indexOf("?",1),i=n.indexOf(".",1),a.push(n.substring(1,~s?s:~i?i:n.length)),l+=~s&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~s?"?":"")+"\\"+n.substring(i))):l+="/"+n;return{keys:a,pattern:new RegExp("^"+l+"/?$","i")}}function eo(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const r=e.indexOf("?");let s="";return r>-1&&(s=e.substr(r+1),e=e.substr(0,r)),{location:e,querystring:s}}const ma=Cl(null,function(e){e(eo());const r=()=>{e(eo())};return window.addEventListener("hashchange",r,!1),function(){window.removeEventListener("hashchange",r,!1)}}),fd=Il(ma,t=>t.location),vd=Il(ma,t=>t.querystring),to=En(void 0);async function lt(t){if(!t||t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await fa(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(t.charAt(0)=="#"?"":"#")+t}function Zs(t,e){if(e=so(e),!t||!t.tagName||t.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return ro(t,e),{update(r){r=so(r),ro(t,r)}}}function pd(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function ro(t,e){let r=e.href||t.getAttribute("href");if(r&&r.charAt(0)=="/")r="#"+r;else if(!r||r.length<2||r.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+r);t.setAttribute("href",r),t.addEventListener("click",s=>{s.preventDefault(),e.disabled||gd(s.currentTarget.getAttribute("href"))})}function so(t){return t&&typeof t=="string"?{href:t}:t||{}}function gd(t){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=t}function md(t,e){Wt(e,!1);let r=Zt(e,"routes",24,()=>({})),s=Zt(e,"prefix",8,""),n=Zt(e,"restoreScrollState",8,!1);class i{constructor(E,R){if(!R||typeof R!="function"&&(typeof R!="object"||R._sveltesparouter!==!0))throw Error("Invalid component object");if(!E||typeof E=="string"&&(E.length<1||E.charAt(0)!="/"&&E.charAt(0)!="*")||typeof E=="object"&&!(E instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:$,keys:I}=hd(E);this.path=E,typeof R=="object"&&R._sveltesparouter===!0?(this.component=R.component,this.conditions=R.conditions||[],this.userData=R.userData,this.props=R.props||{}):(this.component=()=>Promise.resolve(R),this.conditions=[],this.props={}),this._pattern=$,this._keys=I}match(E){if(s()){if(typeof s()=="string")if(E.startsWith(s()))E=E.substr(s().length)||"/";else return null;else if(s()instanceof RegExp){const Q=E.match(s());if(Q&&Q[0])E=E.substr(Q[0].length)||"/";else return null}}const R=this._pattern.exec(E);if(R===null)return null;if(this._keys===!1)return R;const $={};let I=0;for(;I<this._keys.length;){try{$[this._keys[I]]=decodeURIComponent(R[I+1]||"")||null}catch{$[this._keys[I]]=null}I++}return $}async checkConditions(E){for(let R=0;R<this.conditions.length;R++)if(!await this.conditions[R](E))return!1;return!0}}const a=[];r()instanceof Map?r().forEach((A,E)=>{a.push(new i(E,A))}):Object.keys(r()).forEach(A=>{a.push(new i(A,r()[A]))});let l=F(null),o=F(null),u=F({});const d=jl();async function h(A,E){await fa(),d(A,E)}let f=null,v=null;n()&&(v=A=>{A.state&&(A.state.__svelte_spa_router_scrollY||A.state.__svelte_spa_router_scrollX)?f=A.state:f=null},window.addEventListener("popstate",v),ud(()=>{pd(f)}));let g=null,m=null;const _=ma.subscribe(async A=>{g=A;let E=0;for(;E<a.length;){const R=a[E].match(A.location);if(!R){E++;continue}const $={route:a[E].path,location:A.location,querystring:A.querystring,userData:a[E].userData,params:R&&typeof R=="object"&&Object.keys(R).length?R:null};if(!await a[E].checkConditions($)){S(l,null),m=null,h("conditionsFailed",$);return}h("routeLoading",Object.assign({},$));const I=a[E].component;if(m!=I){I.loading?(S(l,I.loading),m=I,S(o,I.loadingParams),S(u,{}),h("routeLoaded",Object.assign({},$,{component:c(l),name:c(l).name,params:c(o)}))):(S(l,null),m=null);const Q=await I();if(A!=g)return;S(l,Q&&Q.default||Q),m=I}R&&typeof R=="object"&&Object.keys(R).length?S(o,R):S(o,null),S(u,a[E].props),h("routeLoaded",Object.assign({},$,{component:c(l),name:c(l).name,params:c(o)})).then(()=>{to.set(c(o))});return}S(l,null),m=null,to.set(void 0)});ld(()=>{_(),v&&window.removeEventListener("popstate",v)}),as(()=>er(n()),()=>{history.scrollRestoration=n()?"manual":"auto"}),da(),tr();var y=pr(),O=G(y);{var x=A=>{var E=pr(),R=G(E);Ga(R,()=>c(l),($,I)=>{I($,Za({get params(){return c(o)}},()=>c(u),{$$events:{routeEvent(Q){At.call(this,e,Q)}}}))}),b(A,E)},T=A=>{var E=pr(),R=G(E);Ga(R,()=>c(l),($,I)=>{I($,Za(()=>c(u),{$$events:{routeEvent(Q){At.call(this,e,Q)}}}))}),b(A,E)};U(O,A=>{c(o)?A(x):A(T,!1)})}b(t,y),Vt()}function oi(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r}function _d(t,e,r,s){function n(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function o(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,o)}u((s=s.apply(t,e||[])).next())})}const bd=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class _a extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class yd extends _a{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class no extends _a{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class io extends _a{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Vi;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Vi||(Vi={}));class wd{constructor(e,{headers:r={},customFetch:s,region:n=Vi.Any}={}){this.url=e,this.headers=r,this.region=n,this.fetch=bd(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return _d(this,arguments,void 0,function*(r,s={}){var n;let i,a;try{const{headers:l,method:o,body:u,signal:d,timeout:h}=s;let f={},{region:v}=s;v||(v=this.region);const g=new URL(`${this.url}/${r}`);v&&v!=="any"&&(f["x-region"]=v,g.searchParams.set("forceFunctionRegion",v));let m;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",m=u):typeof u=="string"?(f["Content-Type"]="text/plain",m=u):typeof FormData<"u"&&u instanceof FormData?m=u:(f["Content-Type"]="application/json",m=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?m=JSON.stringify(u):m=u;let _=d;h&&(a=new AbortController,i=setTimeout(()=>a.abort(),h),d?(_=a.signal,d.addEventListener("abort",()=>a.abort())):_=a.signal);const y=yield this.fetch(g.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:m,signal:_}).catch(A=>{throw new yd(A)}),O=y.headers.get("x-relay-error");if(O&&O==="true")throw new no(y);if(!y.ok)throw new io(y);let x=((n=y.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),T;return x==="application/json"?T=yield y.json():x==="application/octet-stream"||x==="application/pdf"?T=yield y.blob():x==="text/event-stream"?T=y:x==="multipart/form-data"?T=yield y.formData():T=yield y.text(),{data:T,error:null,response:y}}catch(l){return{data:null,error:l,response:l instanceof io||l instanceof no?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var xd=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},kd=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let a=null,l=null,o=null,u=i.status,d=i.statusText;if(i.ok){var h,f;if(r.method!=="HEAD"){var v;const y=await i.text();y===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((v=r.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?l=y:l=JSON.parse(y))}const m=(h=r.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),_=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");m&&_&&_.length>1&&(o=parseInt(_[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(a={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,o=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var g;const m=await i.text();try{a=JSON.parse(m),Array.isArray(a)&&i.status===404&&(l=[],a=null,u=200,d="OK")}catch{i.status===404&&m===""?(u=204,d="No Content"):a={message:m}}if(a&&r.isMaybeSingle&&(!(a==null||(g=a.details)===null||g===void 0)&&g.includes("0 rows"))&&(a=null,u=200,d="OK"),a&&r.shouldThrowOnError)throw new xd(a)}return{error:a,data:l,count:o,status:u,statusText:d}});return this.shouldThrowOnError||(n=n.catch(i=>{var a;let l="";const o=i?.cause;if(o){var u,d,h,f;const g=(u=o?.message)!==null&&u!==void 0?u:"",m=(d=o?.code)!==null&&d!==void 0?d:"";l=`${(h=i?.name)!==null&&h!==void 0?h:"FetchError"}: ${i?.message}`,l+=`

Caused by: ${(f=o?.name)!==null&&f!==void 0?f:"Error"}: ${g}`,m&&(l+=` (${m})`),o?.stack&&(l+=`
${o.stack}`)}else{var v;l=(v=i?.stack)!==null&&v!==void 0?v:""}return{error:{message:`${(a=i?.name)!==null&&a!==void 0?a:"FetchError"}: ${i?.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),n.then(t,e)}returns(){return this}overrideTypes(){return this}},Sd=class extends kd{select(t){let e=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:s,referencedTable:n=s}={}){const i=n?`${n}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:s=r}={}){const n=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:s=!1,wal:n=!1,format:i="text"}={}){var a;const l=[t?"analyze":null,e?"verbose":null,r?"settings":null,s?"buffers":null,n?"wal":null].filter(Boolean).join("|"),o=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${o}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const ao=new RegExp("[,()]");var Ss=class extends Sd{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(s=>typeof s=="string"&&ao.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(s=>typeof s=="string"&&ao.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:s}={}){let n="";s==="plain"?n="pl":s==="phrase"?n="ph":s==="websearch"&&(n="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${n}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},Ed=class{constructor(t,{headers:e={},schema:r,fetch:s}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:r=!1,count:s}=e??{},n=r?"HEAD":"GET";let i=!1;const a=(t??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:l,headers:o}=this.cloneRequestState();return l.searchParams.set("select",a),s&&o.append("Prefer",`count=${s}`),new Ss({method:n,url:l,headers:o,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var s;const n="POST",{url:i,headers:a}=this.cloneRequestState();if(e&&a.append("Prefer",`count=${e}`),r||a.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((o,u)=>o.concat(Object.keys(u)),[]);if(l.length>0){const o=[...new Set(l)].map(u=>`"${u}"`);i.searchParams.set("columns",o.join(","))}}return new Ss({method:n,url:i,headers:a,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:s,defaultToNull:n=!0}={}){var i;const a="POST",{url:l,headers:o}=this.cloneRequestState();if(o.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&l.searchParams.set("on_conflict",e),s&&o.append("Prefer",`count=${s}`),n||o.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);l.searchParams.set("columns",d.join(","))}}return new Ss({method:a,url:l,headers:o,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:e}={}){var r;const s="PATCH",{url:n,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new Ss({method:s,url:n,headers:i,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;const r="DELETE",{url:s,headers:n}=this.cloneRequestState();return t&&n.append("Prefer",`count=${t}`),new Ss({method:r,url:s,headers:n,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},$d=class Ul{constructor(e,{headers:r={},schema:s,fetch:n}={}){this.url=e,this.headers=new Headers(r),this.schemaName=s,this.fetch=n}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Ed(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ul(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:s=!1,get:n=!1,count:i}={}){var a;let l;const o=new URL(`${this.url}/rpc/${e}`);let u;const d=v=>v!==null&&typeof v=="object"&&(!Array.isArray(v)||v.some(d)),h=s&&Object.values(r).some(d);h?(l="POST",u=r):s||n?(l=s?"HEAD":"GET",Object.entries(r).filter(([v,g])=>g!==void 0).map(([v,g])=>[v,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([v,g])=>{o.searchParams.append(v,g)})):(l="POST",u=r);const f=new Headers(this.headers);return h?f.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&f.set("Prefer",`count=${i}`),new Ss({method:l,url:o,headers:f,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class Td{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const s=r.versions;if(s&&s.node){const n=s.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const s=this.getWebSocketConstructor();return new s(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Ad="2.90.1",Pd=`realtime-js/${Ad}`,Ll="1.0.0",Od="2.0.0",oo=Ll,Gi=1e4,Rd=1e3,Cd=100;var Mr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Mr||(Mr={}));var gt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(gt||(gt={}));var hr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(hr||(hr={}));var Ki;(function(t){t.websocket="websocket"})(Ki||(Ki={}));var rs;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(rs||(rs={}));class Id{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,s;const n=(s=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,n)}_encodeJsonUserBroadcastPush(e){var r,s;const n=(s=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},a=new TextEncoder().encode(JSON.stringify(n)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,r,s){var n,i;const a=e.topic,l=(n=e.ref)!==null&&n!==void 0?n:"",o=(i=e.join_ref)!==null&&i!==void 0?i:"",u=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(o.length>255)throw new Error(`joinRef length ${o.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+o.length+l.length+a.length+u.length+h.length,v=new ArrayBuffer(this.HEADER_LENGTH+f);let g=new DataView(v),m=0;g.setUint8(m++,this.KINDS.userBroadcastPush),g.setUint8(m++,o.length),g.setUint8(m++,l.length),g.setUint8(m++,a.length),g.setUint8(m++,u.length),g.setUint8(m++,h.length),g.setUint8(m++,r),Array.from(o,y=>g.setUint8(m++,y.charCodeAt(0))),Array.from(l,y=>g.setUint8(m++,y.charCodeAt(0))),Array.from(a,y=>g.setUint8(m++,y.charCodeAt(0))),Array.from(u,y=>g.setUint8(m++,y.charCodeAt(0))),Array.from(h,y=>g.setUint8(m++,y.charCodeAt(0)));var _=new Uint8Array(v.byteLength+s.byteLength);return _.set(new Uint8Array(v),0),_.set(new Uint8Array(s),v.byteLength),_.buffer}decode(e,r){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return r(s)}if(typeof e=="string"){const s=JSON.parse(e),[n,i,a,l,o]=s;return r({join_ref:n,ref:i,topic:a,event:l,payload:o})}return r({})}_binaryDecode(e){const r=new DataView(e),s=r.getUint8(0),n=new TextDecoder;if(s===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,r,n)}_decodeUserBroadcast(e,r,s){const n=r.getUint8(1),i=r.getUint8(2),a=r.getUint8(3),l=r.getUint8(4);let o=this.HEADER_LENGTH+4;const u=s.decode(e.slice(o,o+n));o=o+n;const d=s.decode(e.slice(o,o+i));o=o+i;const h=s.decode(e.slice(o,o+a));o=o+a;const f=e.slice(o,e.byteLength),v=l===this.JSON_ENCODING?JSON.parse(s.decode(f)):f,g={type:this.BROADCAST_EVENT,event:d,payload:v};return a>0&&(g.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>r.includes(s)))}}class Dl{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Oe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Oe||(Oe={}));const lo=(t,e,r={})=>{var s;const n=(s=r.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((i,a)=>(i[a]=jd(a,t,e,n),i),{}):{}},jd=(t,e,r,s)=>{const n=e.find(l=>l.name===t),i=n?.type,a=r[t];return i&&!s.includes(i)?ql(i,a):Hi(a)},ql=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Dd(e,r)}switch(t){case Oe.bool:return Nd(e);case Oe.float4:case Oe.float8:case Oe.int2:case Oe.int4:case Oe.int8:case Oe.numeric:case Oe.oid:return Ud(e);case Oe.json:case Oe.jsonb:return Ld(e);case Oe.timestamp:return qd(e);case Oe.abstime:case Oe.date:case Oe.daterange:case Oe.int4range:case Oe.int8range:case Oe.money:case Oe.reltime:case Oe.text:case Oe.time:case Oe.timestamptz:case Oe.timetz:case Oe.tsrange:case Oe.tstzrange:return Hi(e);default:return Hi(e)}},Hi=t=>t,Nd=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Ud=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Ld=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},Dd=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let i;const a=t.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>ql(e,l))}return t},qd=t=>typeof t=="string"?t.replace(" ","T"):t,Bl=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class ki{constructor(e,r,s={},n=Gi){this.channel=e,this.event=r,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var co;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(co||(co={}));class on{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=on.syncState(this.state,n,i,a),this.pendingDiffs.forEach(o=>{this.state=on.syncDiff(this.state,o,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=on.syncDiff(this.state,n,i,a),l())}),this.onJoin((n,i,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:a})}),this.onLeave((n,i,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,n){const i=this.cloneDeep(e),a=this.transformState(r),l={},o={};return this.map(i,(u,d)=>{a[u]||(o[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const f=d.map(_=>_.presence_ref),v=h.map(_=>_.presence_ref),g=d.filter(_=>v.indexOf(_.presence_ref)<0),m=h.filter(_=>f.indexOf(_.presence_ref)<0);g.length>0&&(l[u]=g),m.length>0&&(o[u]=m)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:o},s,n)}static syncDiff(e,r,s,n){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(l,o)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(o),d.length>0){const h=e[l].map(v=>v.presence_ref),f=d.filter(v=>h.indexOf(v.presence_ref)<0);e[l].unshift(...f)}s(l,d,o)}),this.map(a,(l,o)=>{let u=e[l];if(!u)return;const d=o.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,n(l,u,o),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const n=e[s];return"metas"in n?r[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=n,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var uo;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(uo||(uo={}));var ln;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ln||(ln={}));var Or;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Or||(Or={}));class Os{constructor(e,r={config:{}},s){var n,i;if(this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=gt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ki(this,hr.join,this.params,this.timeout),this.rejoinTimer=new Dl(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=gt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=gt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(hr.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new on(this),this.broadcastEndpointURL=Bl(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var s,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==gt.closed){const{config:{broadcast:a,presence:l,private:o}}=this.params,u=(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(v=>v.filter))!==null&&n!==void 0?n:[],d=!!this.bindings[ln.PRESENCE]&&this.bindings[ln.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:o};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(v=>e?.(Or.CHANNEL_ERROR,v)),this._onClose(()=>e?.(Or.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:v})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),v===void 0){e?.(Or.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,_=(g=m?.length)!==null&&g!==void 0?g:0,y=[];for(let O=0;O<_;O++){const x=m[O],{filter:{event:T,schema:A,table:E,filter:R}}=x,$=v&&v[O];if($&&$.event===T&&Os.isFilterValueEqual($.schema,A)&&Os.isFilterValueEqual($.table,E)&&Os.isFilterValueEqual($.filter,R))y.push(Object.assign(Object.assign({},x),{id:$.id}));else{this.unsubscribe(),this.state=gt.errored,e?.(Or.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Or.SUBSCRIBED);return}}).receive("error",v=>{this.state=gt.errored,e?.(Or.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e?.(Or.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this.state===gt.joined&&e===ln.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,s)}async httpSend(e,r,s={}){var n;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);if(l.status===202)return{success:!0};let o=l.statusText;try{const u=await l.json();o=u.error||u.message||o}catch{}return Promise.reject(new Error(o))}async send(e,r={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:a}=e,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,o;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((o=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||o===void 0)&&o.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=gt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(hr.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new ki(this,hr.leave,{},e),s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=gt.closed,this.bindings={}}async _fetchWithTimeout(e,r,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(i),a}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new ki(this,e,r,s);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Cd){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var n,i;const a=e.toLocaleLowerCase(),{close:l,error:o,leave:u,join:d}=hr;if(s&&[l,o,u,d].indexOf(a)>=0&&s!==this._joinRef())return;let f=this._onMessage(a,r,s);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(v=>{var g,m,_;return((g=v.filter)===null||g===void 0?void 0:g.event)==="*"||((_=(m=v.filter)===null||m===void 0?void 0:m.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===a}).map(v=>v.callback(f,s)):(i=this.bindings[a])===null||i===void 0||i.filter(v=>{var g,m,_,y,O,x,T,A;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in v){const E=v.id,R=(g=v.filter)===null||g===void 0?void 0:g.event;return E&&((m=r.ids)===null||m===void 0?void 0:m.includes(E))&&(R==="*"||R?.toLocaleLowerCase()===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))&&(!(!((y=v.filter)===null||y===void 0)&&y.table)||v.filter.table===((O=r.data)===null||O===void 0?void 0:O.table))}else{const E=(T=(x=v?.filter)===null||x===void 0?void 0:x.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return E==="*"||E===((A=r?.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===a}).map(v=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:m,table:_,commit_timestamp:y,type:O,errors:x}=g;f=Object.assign(Object.assign({},{schema:m,table:_,commit_timestamp:y,eventType:O,new:{},old:{},errors:x}),this._getPayloadRecords(g))}v.callback(f,s)})}_isClosed(){return this.state===gt.closed}_isJoined(){return this.state===gt.joined}_isJoining(){return this.state===gt.joining}_isLeaving(){return this.state===gt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const n=e.toLocaleLowerCase(),i={type:n,filter:r,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Os.isEqual(n.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(hr.close,{},e)}_onError(e){this._on(hr.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=gt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=lo(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=lo(e.columns,e.old_record)),r}}const Si=()=>{},jn={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Bd=[1e3,2e3,5e3,1e4],Md=1e4,zd=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Fd{constructor(e,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Gi,this.transport=null,this.heartbeatIntervalMs=jn.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Si,this.ref=0,this.reconnectTimer=null,this.vsn=oo,this.logger=Si,this.conn=null,this.sendBuffer=[],this.serializer=new Id,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=n=>n?(...i)=>n(...i):(...i)=>fetch(...i),!(!((s=r?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Ki.websocket}`,this.httpEndpoint=Bl(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Td.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Mr.connecting:return rs.Connecting;case Mr.open:return rs.Open;case Mr.closing:return rs.Closing;default:return rs.Closed}}isConnected(){return this.connectionState()===rs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===s);if(n)return n;{const i=new Os(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:s,payload:n,ref:i}=e,a=()=>{this.encode(e,l=>{var o;(o=this.conn)===null||o===void 0||o.send(l)})};this.log("push",`${r} ${s} (${i})`,n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Rd,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},jn.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:s,event:n,payload:i,ref:a}=r,l=a?`(${a})`:"",o=i.status||"";this.log("receive",`${o} ${s} ${n} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(n,i,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Mr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Mr.open||this.conn.readyState===Mr.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(hr.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${e}${s}${n}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([zd],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,s=!1;if(e)r=e,s=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(n){this.log("error","Error fetching access token from callback",n),r=this.accessTokenValue}else r=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:Pd};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(hr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(r)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Dl(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},jn.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,s,n,i,a,l,o,u,d,h,f,v;switch(this.transport=(r=e?.transport)!==null&&r!==void 0?r:null,this.timeout=(s=e?.timeout)!==null&&s!==void 0?s:Gi,this.heartbeatIntervalMs=(n=e?.heartbeatIntervalMs)!==null&&n!==void 0?n:jn.HEARTBEAT_INTERVAL,this.worker=(i=e?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e?.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=e?.heartbeatCallback)!==null&&l!==void 0?l:Si,this.vsn=(o=e?.vsn)!==null&&o!==void 0?o:oo,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e?.reconnectAfterMs)!==null&&u!==void 0?u:(g=>Bd[g-1]||Md),this.vsn){case Ll:this.encode=(d=e?.encode)!==null&&d!==void 0?d:((g,m)=>m(JSON.stringify(g))),this.decode=(h=e?.decode)!==null&&h!==void 0?h:((g,m)=>m(JSON.parse(g)));break;case Od:this.encode=(f=e?.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(v=e?.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var fn=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Wd(t,e,r){const s=new URL(e,t);if(r)for(const[n,i]of Object.entries(r))i!==void 0&&s.searchParams.set(n,i);return s.toString()}async function Vd(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Gd(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:n,body:i,headers:a}){const l=Wd(t.baseUrl,s,n),o=await Vd(t.auth),u=await e(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...o,...a},body:i?JSON.stringify(i):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const v=h?f:void 0,g=v?.error;throw new fn(g?.message??`Request failed with status ${u.status}`,{status:u.status,icebergType:g?.type,icebergCode:g?.code,details:v})}return{status:u.status,headers:u.headers,data:f}}}}function Nn(t){return t.join("")}var Kd=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Nn(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Nn(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Nn(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Nn(t.namespace)}`}),!0}catch(e){if(e instanceof fn&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof fn&&r.status===409)return;throw r}}};function ms(t){return t.join("")}var Hd=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ms(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ms(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ms(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ms(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ms(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ms(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof fn&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof fn&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},Jd=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Gd({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new Kd(this.client,e),this.tableOps=new Hd(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},li=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function ze(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Yd=class extends li{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Ji=class extends li{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const ba=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Qd=()=>Response,Yi=t=>{if(Array.isArray(t))return t.map(r=>Yi(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const n=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=Yi(s)}),e},Xd=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Zd=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function vn(t){"@babel/helpers - typeof";return vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(t)}function eh(t,e){if(vn(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(vn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function th(t){var e=eh(t,"string");return vn(e)=="symbol"?e:e+""}function rh(t,e,r){return(e=th(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ho(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Y(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ho(Object(r),!0).forEach(function(s){rh(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ho(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}const Ei=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},sh=async(t,e,r)=>{t instanceof await Qd()&&!r?.noResolveJson?t.json().then(s=>{const n=t.status||500,i=s?.statusCode||n+"";e(new Yd(Ei(s),n,i))}).catch(s=>{e(new Ji(Ei(s),s))}):e(new Ji(Ei(t),t))},nh=(t,e,r,s)=>{const n={method:t,headers:e?.headers||{}};return t==="GET"||!s?n:(Xd(s)?(n.headers=Y({"Content-Type":"application/json"},e?.headers),n.body=JSON.stringify(s)):n.body=s,e?.duplex&&(n.duplex=e.duplex),Y(Y({},n),r))};async function $n(t,e,r,s,n,i){return new Promise((a,l)=>{t(r,nh(e,s,n,i)).then(o=>{if(!o.ok)throw o;return s?.noResolveJson?o:o.json()}).then(o=>a(o)).catch(o=>sh(o,l,s))})}async function pn(t,e,r,s){return $n(t,"GET",e,r,s)}async function dr(t,e,r,s,n){return $n(t,"POST",e,s,n,r)}async function Qi(t,e,r,s,n){return $n(t,"PUT",e,s,n,r)}async function ih(t,e,r,s){return $n(t,"HEAD",e,Y(Y({},r),{},{noResolveJson:!0}),s)}async function ya(t,e,r,s,n){return $n(t,"DELETE",e,s,n,r)}var ah=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(ze(e))return{data:null,error:e};throw e}}};let Ml;Ml=Symbol.toStringTag;var oh=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Ml]="BlobDownloadBuilder",this.promise=null}asStream(){return new ah(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(ze(e))return{data:null,error:e};throw e}}};const lh={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fo={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var ch=class{constructor(t,e={},r,s){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=ba(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,r,s){var n=this;try{let i;const a=Y(Y({},fo),s);let l=Y(Y({},n.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const o=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),o&&i.append("metadata",n.encodeMetadata(o)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",a.cacheControl),o&&!i.has("metadata")&&i.append("metadata",n.encodeMetadata(o))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,o&&(l["x-metadata"]=n.toBase64(n.encodeMetadata(o))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!a.duplex&&(a.duplex="half")),s?.headers&&(l=Y(Y({},l),s.headers));const u=n._removeEmptyFolders(e),d=n._getFinalPath(u),h=await(t=="PUT"?Qi:dr)(n.fetch,`${n.url}/object/${d}`,i,Y({headers:l},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ze(i))return{data:null,error:i};throw i}}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,s){var n=this;const i=n._removeEmptyFolders(t),a=n._getFinalPath(i),l=new URL(n.url+`/object/upload/sign/${a}`);l.searchParams.set("token",e);try{let o;const u=Y({upsert:fo.upsert},s),d=Y(Y({},n.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",u.cacheControl)):(o=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:i,fullPath:(await Qi(n.fetch,l.toString(),o,{headers:d})).Key},error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(ze(o))return{data:null,error:o};throw o}}async createSignedUploadUrl(t,e){var r=this;try{let s=r._getFinalPath(t);const n=Y({},r.headers);e?.upsert&&(n["x-upsert"]="true");const i=await dr(r.fetch,`${r.url}/object/upload/sign/${s}`,{},{headers:n}),a=new URL(r.url+i.url),l=a.searchParams.get("token");if(!l)throw new li("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ze(s))return{data:null,error:s};throw s}}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var s=this;try{return{data:await dr(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:s.headers}),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(ze(n))return{data:null,error:n};throw n}}async copy(t,e,r){var s=this;try{return{data:{path:(await dr(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:s.headers})).Key},error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(ze(n))return{data:null,error:n};throw n}}async createSignedUrl(t,e,r){var s=this;try{let n=s._getFinalPath(t),i=await dr(s.fetch,`${s.url}/object/sign/${n}`,Y({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:s.headers});const a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${s.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(ze(n))return{data:null,error:n};throw n}}async createSignedUrls(t,e,r){var s=this;try{const n=await dr(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:e,paths:t},{headers:s.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(a=>Y(Y({},a),{},{signedUrl:a.signedURL?encodeURI(`${s.url}${a.signedURL}${i}`):null})),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(ze(n))return{data:null,error:n};throw n}}download(t,e){const r=typeof e?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(e?.transform||{}),n=s?`?${s}`:"",i=this._getFinalPath(t),a=()=>pn(this.fetch,`${this.url}/${r}/${i}${n}`,{headers:this.headers,noResolveJson:!0});return new oh(a,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);try{return{data:Yi(await pn(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(ze(s))return{data:null,error:s};throw s}}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await ih(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(ze(s)&&s instanceof Ji){const n=s.originalError;if([400,404].includes(n?.status))return{data:!1,error:s}}throw s}}getPublicUrl(t,e){const r=this._getFinalPath(t),s=[],n=e?.download?`download=${e.download===!0?"":e.download}`:"";n!==""&&s.push(n);const i=typeof e?.transform<"u"?"render/image":"object",a=this.transformOptsToQueryString(e?.transform||{});a!==""&&s.push(a);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(t){var e=this;try{return{data:await ya(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}async list(t,e,r){var s=this;try{const n=Y(Y(Y({},lh),e),{},{prefix:t||""});return{data:await dr(s.fetch,`${s.url}/object/list/${s.bucketId}`,n,{headers:s.headers},r),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(ze(n))return{data:null,error:n};throw n}}async listV2(t,e){var r=this;try{const s=Y({},t);return{data:await dr(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,s,{headers:r.headers},e),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ze(s))return{data:null,error:s};throw s}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const zl="2.90.1",Fl={"X-Client-Info":`storage-js/${zl}`};var uh=class{constructor(t,e={},r,s){this.shouldThrowOnError=!1;const n=new URL(t);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase.")),this.url=n.href.replace(/\/$/,""),this.headers=Y(Y({},Fl),e),this.fetch=ba(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const r=e.listBucketOptionsToQueryString(t);return{data:await pn(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await pn(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}async createBucket(t,e={public:!1}){var r=this;try{return{data:await dr(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ze(s))return{data:null,error:s};throw s}}async updateBucket(t,e){var r=this;try{return{data:await Qi(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ze(s))return{data:null,error:s};throw s}}async emptyBucket(t){var e=this;try{return{data:await dr(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await ya(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},dh=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Y(Y({},Fl),e),this.fetch=ba(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await dr(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}async listBuckets(t){var e=this;try{const r=new URLSearchParams;t?.limit!==void 0&&r.set("limit",t.limit.toString()),t?.offset!==void 0&&r.set("offset",t.offset.toString()),t?.sortColumn&&r.set("sortColumn",t.sortColumn),t?.sortOrder&&r.set("sortOrder",t.sortOrder),t?.search&&r.set("search",t.search);const s=r.toString(),n=s?`${e.url}/bucket?${s}`:`${e.url}/bucket`;return{data:await pn(e.fetch,n,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await ya(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}from(t){var e=this;if(!Zd(t))throw new li("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Jd({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(n,i){const a=n[i];return typeof a!="function"?a:async(...l)=>{try{return{data:await a.apply(n,l),error:null}}catch(o){if(s)throw o;return{data:null,error:o}}}}})}};const wa={"X-Client-Info":`storage-js/${zl}`,"Content-Type":"application/json"};var Wl=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Yt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var $i=class extends Wl{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},hh=class extends Wl{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const xa=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),fh=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},vo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),vh=async(t,e,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!r?.noResolveJson){const s=t.status||500,n=t;if(typeof n.json=="function")n.json().then(i=>{const a=i?.statusCode||i?.code||s+"";e(new $i(vo(i),s,a))}).catch(()=>{const i=s+"";e(new $i(n.statusText||`HTTP ${s} error`,s,i))});else{const i=s+"";e(new $i(n.statusText||`HTTP ${s} error`,s,i))}}else e(new hh(vo(t),t))},ph=(t,e,r,s)=>{const n={method:t,headers:e?.headers||{}};return s?(fh(s)?(n.headers=Y({"Content-Type":"application/json"},e?.headers),n.body=JSON.stringify(s)):n.body=s,Y(Y({},n),r)):n};async function gh(t,e,r,s,n,i){return new Promise((a,l)=>{t(r,ph(e,s,n,i)).then(o=>{if(!o.ok)throw o;if(s?.noResolveJson)return o;const u=o.headers.get("content-type");return!u||!u.includes("application/json")?{}:o.json()}).then(o=>a(o)).catch(o=>vh(o,l,s))})}async function Qt(t,e,r,s,n){return gh(t,"POST",e,s,n,r)}var mh=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Y(Y({},wa),e),this.fetch=xa(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Qt(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}}async getIndex(t,e){var r=this;try{return{data:await Qt(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}}async listIndexes(t){var e=this;try{return{data:await Qt(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}}async deleteIndex(t,e){var r=this;try{return{data:await Qt(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}}},_h=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Y(Y({},wa),e),this.fetch=xa(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Qt(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}}async getVectors(t){var e=this;try{return{data:await Qt(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Qt(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}}async queryVectors(t){var e=this;try{return{data:await Qt(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Qt(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}}},bh=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Y(Y({},wa),e),this.fetch=xa(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Qt(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await Qt(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}}async listBuckets(t={}){var e=this;try{return{data:await Qt(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await Qt(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}}},yh=class extends bh{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new wh(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},wh=class extends mh{constructor(t,e,r,s){super(t,e,s),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,Y(Y({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,Y(Y({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new xh(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},xh=class extends _h{constructor(t,e,r,s,n){super(t,e,n),this.vectorBucketName=r,this.indexName=s}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,Y(Y({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,Y(Y({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,Y(Y({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,Y(Y({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,Y(Y({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},kh=class extends uh{constructor(t,e={},r,s){super(t,e,r,s)}from(t){return new ch(this.url,this.headers,t,this.fetch)}get vectors(){return new yh(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new dh(this.url+"/iceberg",this.headers,this.fetch)}};const Vl="2.90.1",Es=30*1e3,Xi=3,Ti=Xi*Es,Sh="http://localhost:9999",Eh="supabase.auth.token",$h={"X-Client-Info":`gotrue-js/${Vl}`},Zi="X-Supabase-Api-Version",Gl={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Th=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ah=600*1e3;class gn extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function z(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Ph extends gn{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function Oh(t){return z(t)&&t.name==="AuthApiError"}class ss extends gn{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Lr extends gn{constructor(e,r,s,n){super(e,s,n),this.name=r,this.status=s}}class Ht extends Lr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Rh(t){return z(t)&&t.name==="AuthSessionMissingError"}class _s extends Lr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Un extends Lr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ln extends Lr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ch(t){return z(t)&&t.name==="AuthImplicitGrantRedirectError"}class po extends Lr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ih extends Lr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ea extends Lr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Ai(t){return z(t)&&t.name==="AuthRetryableFetchError"}class go extends Lr{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class ta extends Lr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Kn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),mo=` 	
\r=`.split(""),jh=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<mo.length;e+=1)t[mo[e].charCodeAt(0)]=-2;for(let e=0;e<Kn.length;e+=1)t[Kn[e].charCodeAt(0)]=e;return t})();function _o(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Kn[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Kn[s]),e.queuedBits-=6}}function Kl(t,e,r){const s=jh[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function bo(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=a=>{Lh(a,s,r)};for(let a=0;a<t.length;a+=1)Kl(t.charCodeAt(a),n,i);return e.join("")}function Nh(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Uh(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}Nh(s,e)}}function Lh(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Rs(t){const e=[],r={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)Kl(t.charCodeAt(n),r,s);return new Uint8Array(e)}function Dh(t){const e=[];return Uh(t,r=>e.push(r)),new Uint8Array(e)}function is(t){const e=[],r={queue:0,queuedBits:0},s=n=>{e.push(n)};return t.forEach(n=>_o(n,r,s)),_o(null,r,s),e.join("")}function qh(t){return Math.round(Date.now()/1e3)+t}function Bh(){return Symbol("auth-callback")}const Tt=()=>typeof window<"u"&&typeof document<"u",Xr={tested:!1,writable:!1},Hl=()=>{if(!Tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xr.tested)return Xr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Xr.tested=!0,Xr.writable=!0}catch{Xr.tested=!0,Xr.writable=!1}return Xr.writable};function Mh(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return r.searchParams.forEach((s,n)=>{e[n]=s}),e}const Jl=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),zh=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",$s=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Zr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},$t=async(t,e)=>{await t.removeItem(e)};class ci{constructor(){this.promise=new ci.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}ci.promiseConstructor=Promise;function Pi(t){const e=t.split(".");if(e.length!==3)throw new ta("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Th.test(e[s]))throw new ta("JWT not in base64url format");return{header:JSON.parse(bo(e[0])),payload:JSON.parse(bo(e[1])),signature:Rs(e[2]),raw:{header:e[0],payload:e[1]}}}async function Fh(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Wh(t,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){s(a);return}}catch(a){if(!e(i,a)){n(a);return}}})()})}function Vh(t){return("0"+t.toString(16)).substr(-2)}function Gh(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let n="";for(let i=0;i<56;i++)n+=r.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,Vh).join("")}async function Kh(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function Hh(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Kh(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function bs(t,e,r=!1){const s=Gh();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await $s(t,`${e}-code-verifier`,n);const i=await Hh(s);return[i,s===i?"plain":"s256"]}const Jh=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Yh(t){const e=t.headers.get(Zi);if(!e||!e.match(Jh))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Qh(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Xh(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Zh=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ys(t){if(!Zh.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Oi(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ef(t,e){return new Proxy(t,{get:(r,s,n)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,n)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,s,n)}})}function yo(t){return JSON.parse(JSON.stringify(t))}const ts=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),tf=[502,503,504];async function wo(t){var e;if(!zh(t))throw new ea(ts(t),0);if(tf.includes(t.status))throw new ea(ts(t),t.status);let r;try{r=await t.json()}catch(i){throw new ss(ts(i),i)}let s;const n=Yh(t);if(n&&n.getTime()>=Gl["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new go(ts(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Ht}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new go(ts(r),t.status,r.weak_password.reasons);throw new Ph(ts(r),t.status||500,s)}const rf=(t,e,r,s)=>{const n={method:t,headers:e?.headers||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};async function J(t,e,r,s){var n;const i=Object.assign({},s?.headers);i[Zi]||(i[Zi]=Gl["2024-01-01"].name),s?.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const a=(n=s?.query)!==null&&n!==void 0?n:{};s?.redirectTo&&(a.redirect_to=s.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",o=await sf(t,e,r+l,{headers:i,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(o):{data:Object.assign({},o),error:null}}async function sf(t,e,r,s,n,i){const a=rf(e,s,n,i);let l;try{l=await t(r,Object.assign({},a))}catch(o){throw console.error(o),new ea(ts(o),0)}if(l.ok||await wo(l),s?.noResolveJson)return l;try{return await l.json()}catch(o){await wo(o)}}function ur(t){var e;let r=null;of(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=qh(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function xo(t){const e=ur(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function zr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function nf(t){return{data:t,error:null}}function af(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i}=t,a=oi(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i},o=Object.assign({},a);return{data:{properties:l,user:o},error:null}}function ko(t){return t}function of(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ri=["global","local","others"];class lf{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=Jl(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Ri[0]){if(Ri.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ri.join(", ")}`);try{return await J(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(z(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await J(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:zr})}catch(s){if(z(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=oi(e,["options"]),n=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(n.new_email=s?.newEmail,delete n.newEmail),await J(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:af,redirectTo:r?.redirectTo})}catch(r){if(z(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await J(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:zr})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,n,i,a,l,o;try{const u={nextPage:null,lastPage:0,total:0},d=await J(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e?.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:ko});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,v=(o=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return v.length>0&&(v.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(g.split(";")[1].split("=")[1]);u[`${_}Page`]=m}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(z(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){ys(e);try{return await J(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:zr})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){ys(e);try{return await J(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:zr})}catch(s){if(z(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){ys(e);try{return await J(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:zr})}catch(s){if(z(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){ys(e.userId);try{const{data:r,error:s}=await J(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:s}}catch(r){if(z(r))return{data:null,error:r};throw r}}async _deleteFactor(e){ys(e.userId),ys(e.id);try{return{data:await J(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,s,n,i,a,l,o;try{const u={nextPage:null,lastPage:0,total:0},d=await J(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e?.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:ko});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,v=(o=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return v.length>0&&(v.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(g.split(";")[1].split("=")[1]);u[`${_}Page`]=m}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(z(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await J(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await J(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await J(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(z(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await J(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await J(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(z(r))return{data:null,error:r};throw r}}}function So(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const ws={debug:!!(globalThis&&Hl()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Yl extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class cf extends Yl{}async function uf(t,e,r){ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),ws.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await r()}finally{ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new cf(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ws.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function df(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ql(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function hf(t){return parseInt(t,16)}function ff(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function vf(t){var e;const{chainId:r,domain:s,expirationTime:n,issuedAt:i=new Date,nonce:a,notBefore:l,requestId:o,resources:u,scheme:d,uri:h,version:f}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const v=Ql(t.address),g=d?`${d}://${s}`:s,m=t.statement?`${t.statement}
`:"",_=`${g} wants you to sign in with your Ethereum account:
${v}

${m}`;let y=`URI: ${h}
Version: ${f}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(n&&(y+=`
Expiration Time: ${n.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),o&&(y+=`
Request ID: ${o}`),u){let O=`
Resources:`;for(const x of u){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);O+=`
- ${x}`}y+=O}return`${_}
${y}`}class at extends Error{constructor({message:e,code:r,cause:s,name:n}){var i;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(i=n??(s instanceof Error?s.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Hn extends at{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function pf({error:t,options:e}){var r,s,n;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new at({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new at({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new at({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new at({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new at({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new at({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new at({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new at({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(Xl(a)){if(i.rp.id!==a)return new at({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new at({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new at({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new at({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new at({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function gf({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new at({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new at({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(Xl(s)){if(r.rpId!==s)return new at({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new at({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new at({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new at({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class mf{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const _f=new mf;function bf(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:s}=t,n=oi(t,["challenge","user","excludeCredentials"]),i=Rs(e).buffer,a=Object.assign(Object.assign({},r),{id:Rs(r.id).buffer}),l=Object.assign(Object.assign({},n),{challenge:i,user:a});if(s&&s.length>0){l.excludeCredentials=new Array(s.length);for(let o=0;o<s.length;o++){const u=s[o];l.excludeCredentials[o]=Object.assign(Object.assign({},u),{id:Rs(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function yf(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,s=oi(t,["challenge","allowCredentials"]),n=Rs(e).buffer,i=Object.assign(Object.assign({},s),{challenge:n});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const l=r[a];i.allowCredentials[a]=Object.assign(Object.assign({},l),{id:Rs(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function wf(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:is(new Uint8Array(t.response.attestationObject)),clientDataJSON:is(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function xf(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,s=t.getClientExtensionResults(),n=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:is(new Uint8Array(n.authenticatorData)),clientDataJSON:is(new Uint8Array(n.clientDataJSON)),signature:is(new Uint8Array(n.signature)),userHandle:n.userHandle?is(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Xl(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Eo(){var t,e;return!!(Tt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function kf(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Hn("Browser returned unexpected credential type",e)}:{data:null,error:new Hn("Empty credential response",e)}}catch(e){return{data:null,error:pf({error:e,options:t})}}}async function Sf(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Hn("Browser returned unexpected credential type",e)}:{data:null,error:new Hn("Empty credential response",e)}}catch(e){return{data:null,error:gf({error:e,options:t})}}}const Ef={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},$f={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Jn(...t){const e=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),r=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),s={};for(const n of t)if(n)for(const i in n){const a=n[i];if(a!==void 0)if(Array.isArray(a))s[i]=a;else if(r(a))s[i]=a;else if(e(a)){const l=s[i];e(l)?s[i]=Jn(l,a):s[i]=Jn(a)}else s[i]=a}return s}function Tf(t,e){return Jn(Ef,t,e||{})}function Af(t,e){return Jn($f,t,e||{})}class Pf{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:s,signal:n},i){try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!a)return{data:null,error:l};const o=n??_f.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${s}`),u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=Tf(a.webauthn.credential_options.publicKey,i?.create),{data:d,error:h}=await kf({publicKey:u,signal:o});return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=Af(a.webauthn.credential_options.publicKey,i?.request),{data:d,error:h}=await Sf(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:o}));return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(a){return z(a)?{data:null,error:a}:{data:null,error:new ss("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!r)return{data:null,error:new gn("rpId is required for WebAuthn authentication")};try{if(!Eo())return{data:null,error:new ss("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:s},signal:n},{request:i});if(!a)return{data:null,error:l};const{webauthn:o}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:o.type,rpId:r,rpOrigins:s,credential_response:o.credential_response}})}catch(a){return z(a)?{data:null,error:a}:{data:null,error:new ss("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!r)return{data:null,error:new gn("rpId is required for WebAuthn registration")};try{if(!Eo())return{data:null,error:new ss("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d?.id}):void 0),{data:null,error:l};const{data:o,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:n},{create:i});return o?this._verify({factorId:a.id,challengeId:o.challengeId,webauthn:{rpId:r,rpOrigins:s,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:u}}catch(a){return z(a)?{data:null,error:a}:{data:null,error:new ss("Unexpected error in register",a)}}}}df();const Of={url:Sh,storageKey:Eh,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$h,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function $o(t,e,r){return await r()}const xs={};class mn{get jwks(){var e,r;return(r=(e=xs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){xs[this.storageKey]=Object.assign(Object.assign({},xs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=xs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){xs[this.storageKey]=Object.assign(Object.assign({},xs[this.storageKey]),{cachedAt:e})}constructor(e){var r,s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Of),e);if(this.storageKey=i.storageKey,this.instanceID=(r=mn.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,mn.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Tt()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new lf({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Jl(i.fetch),this.lock=i.lock||$o,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&Tt()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=uf:this.lock=$o,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Pf(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Hl()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=So(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=So(this.memoryStorage)),Tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Vl}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},s="none";if(Tt()&&(r=Mh(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),Tt()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Ch(i)){const o=(e=i.details)===null||e===void 0?void 0:e.code;if(o==="identity_already_exists"||o==="identity_not_found"||o==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:a,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return z(r)?this._returnResult({error:r}):this._returnResult({error:new ss("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,n;try{const i=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e?.options)===null||n===void 0?void 0:n.captchaToken}},xform:ur}),{data:a,error:l}=i;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});const o=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:u,session:o},error:null})}catch(i){if(z(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var r,s,n;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let v=null,g=null;this.flowType==="pkce"&&([v,g]=await bs(this.storage,this.storageKey)),i=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:v,code_challenge_method:g},xform:ur})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=f?.data)!==null&&s!==void 0?s:{},channel:(n=f?.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:ur})}else throw new Un("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return await $t(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const o=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:u,session:o},error:null})}catch(i){if(await $t(this.storage,`${this.storageKey}-code-verifier`),z(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:a,options:l}=e;r=await J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:xo})}else if("phone"in e){const{phone:i,password:a,options:l}=e;r=await J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:xo})}else throw new Un("You must provide either an email or phone number and a password");const{data:s,error:n}=r;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!s||!s.session||!s.user){const i=new _s;return this._returnResult({data:{user:null,session:null},error:i})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(r){if(z(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,s,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,s,n,i,a,l,o,u,d,h,f;let v,g;if("message"in e)v=e.message,g=e.signature;else{const{chain:m,wallet:_,statement:y,options:O}=e;let x;if(Tt())if(typeof _=="object")x=_;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")x=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=_}const T=new URL((r=O?.url)!==null&&r!==void 0?r:window.location.href),A=await x.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=Ql(A[0]);let R=(s=O?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!R){const I=await x.request({method:"eth_chainId"});R=hf(I)}const $={domain:T.host,address:E,statement:y,uri:T.href,version:"1",chainId:R,nonce:(n=O?.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(a=(i=O?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=O?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(o=O?.signInWithEthereum)===null||o===void 0?void 0:o.notBefore,requestId:(u=O?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=O?.signInWithEthereum)===null||d===void 0?void 0:d.resources};v=vf($),g=await x.request({method:"personal_sign",params:[ff(v),E]})}try{const{data:m,error:_}=await J(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:g},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ur});if(_)throw _;if(!m||!m.session||!m.user){const y=new _s;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:_})}catch(m){if(z(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithSolana(e){var r,s,n,i,a,l,o,u,d,h,f,v;let g,m;if("message"in e)g=e.message,m=e.signature;else{const{chain:_,wallet:y,statement:O,options:x}=e;let T;if(Tt())if(typeof y=="object")T=y;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))T=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!x?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=y}const A=new URL((r=x?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in T&&T.signIn){const E=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x?.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),O?{statement:O}:null));let R;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")R=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)R=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)g=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),m=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${A.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(n=(s=x?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=x?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((a=x?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((o=x?.signInWithSolana)===null||o===void 0)&&o.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((h=(d=x?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...x.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const E=await T.signMessage(new TextEncoder().encode(g),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=E}}try{const{data:_,error:y}=await J(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:is(m)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:ur});if(y)throw y;if(!_||!_.session||!_.user){const O=new _s;return this._returnResult({data:{user:null,session:null},error:O})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:y})}catch(_){if(z(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(e){const r=await Zr(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(r??"").split("/");try{if(!s&&this.flowType==="pkce")throw new Ih;const{data:i,error:a}=await J(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ur});if(await $t(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!i||!i.session||!i.user){const l=new _s;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:a})}catch(i){if(await $t(this.storage,`${this.storageKey}-code-verifier`),z(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:r,provider:s,token:n,access_token:i,nonce:a}=e,l=await J(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:ur}),{data:o,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!o||!o.session||!o.user){const d=new _s;return this._returnResult({data:{user:null,session:null},error:d})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:o,error:u})}catch(r){if(z(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,s,n,i,a;try{if("email"in e){const{email:l,options:o}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await bs(this.storage,this.storageKey));const{error:h}=await J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=o?.data)!==null&&r!==void 0?r:{},create_user:(s=o?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:o?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:l,options:o}=e,{data:u,error:d}=await J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=o?.data)!==null&&n!==void 0?n:{},create_user:(i=o?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:o?.captchaToken},channel:(a=o?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new Un("You must provide either an email or phone number.")}catch(l){if(await $t(this.storage,`${this.storageKey}-code-verifier`),z(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(e){var r,s;try{let n,i;"options"in e&&(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:a,error:l}=await J(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:ur});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const o=a.session,u=a.user;return o?.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),this._returnResult({data:{user:u,session:o},error:null})}catch(n){if(z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(e){var r,s,n,i,a;try{let l=null,o=null;this.flowType==="pkce"&&([l,o]=await bs(this.storage,this.storageKey));const u=await J(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e?.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:o}),headers:this.headers,xform:nf});return!((i=u.data)===null||i===void 0)&&i.url&&Tt()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await $t(this.storage,`${this.storageKey}-code-verifier`),z(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new Ht;const{error:n}=await J(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(e){if(z(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:a}=await J(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:a,error:l}=await J(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:l})}throw new Un("You must provide either an email or phone number and a type")}catch(r){if(z(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Zr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Ti:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const a=await Zr(this.userStorage,this.storageKey+"-user");a?.user?e.user=a.user:e.user=Oi()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=ef(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:zr}):await this._useSession(async r=>{var s,n,i;const{data:a,error:l}=r;if(l)throw l;return!(!((s=a.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ht}:await J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:zr})})}catch(r){if(z(r))return Rh(r)&&(await this._removeSession(),await $t(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new Ht;const a=n.session;let l=null,o=null;this.flowType==="pkce"&&e.email!=null&&([l,o]=await bs(this.storage,this.storageKey));const{data:u,error:d}=await J(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:o}),jwt:a.access_token,xform:zr});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(s){if(await $t(this.storage,`${this.storageKey}-code-verifier`),z(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ht;const r=Date.now()/1e3;let s=r,n=!0,i=null;const{payload:a}=Pi(e.access_token);if(a.exp&&(s=a.exp,n=s<=r),n){const{data:l,error:o}=await this._callRefreshToken(e.refresh_token);if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:o}=await this._getUser(e.access_token);if(o)throw o;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(z(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:a,error:l}=r;if(l)throw l;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new Ht;const{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(z(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Tt())throw new Ln("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ln(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new po("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ln("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new po("No code detected.");const{data:O,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:a,expires_in:l,expires_at:o,token_type:u}=e;if(!i||!l||!a||!u)throw new Ln("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;o&&(f=parseInt(o));const v=f-d;v*1e3<=Es&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${h}s`);const g=f-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,d);const{data:m,error:_}=await this._getUser(i);if(_)throw _;const y={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:e.type},error:null})}catch(s){if(z(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Zr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return this._returnResult({error:i});const a=(s=n.session)===null||s===void 0?void 0:s.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(Oh(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return e!=="others"&&(await this._removeSession(),await $t(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=Bh(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,n;try{const{data:{session:i},error:a}=r;if(a)throw a;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await bs(this.storage,this.storageKey,!0));try{return await J(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await $t(this.storage,`${this.storageKey}-code-verifier`),z(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:s,error:n}=await this._useSession(async i=>{var a,l,o,u,d;const{data:h,error:f}=i;if(f)throw f;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await J(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return Tt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:e.provider,url:s?.url},error:null})}catch(s){if(z(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var s;try{const{error:n,data:{session:i}}=r;if(n)throw n;const{options:a,provider:l,token:o,access_token:u,nonce:d}=e,h=await J(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=i?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:l,id_token:o,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:ur}),{data:f,error:v}=h;return v?this._returnResult({data:{user:null,session:null},error:v}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new _s}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:v}))}catch(n){if(await $t(this.storage,`${this.storageKey}-code-verifier`),z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,n;const{data:i,error:a}=r;if(a)throw a;return await J(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await Wh(async n=>(n>0&&await Fh(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await J(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ur})),(n,i)=>{const a=200*Math.pow(2,n);return i&&Ai(i)&&Date.now()+a-s<Es})}catch(s){if(this._debug(r,"error",s),z(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),Tt()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await Zr(this.storage,this.storageKey);if(n&&this.userStorage){let a=await Zr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:n.user},await $s(this.userStorage,this.storageKey+"-user",a)),n.user=(e=a?.user)!==null&&e!==void 0?e:Oi()}else if(n&&!n.user&&!n.user){const a=await Zr(this.storage,this.storageKey+"-user");a&&a?.user?(n.user=a.user,await $t(this.storage,this.storageKey+"-user"),await $s(this.storage,this.storageKey,n)):n.user=Oi()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const i=((r=n.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ti;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${Ti}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),Ai(a)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(n.access_token);!l&&a?.user?(n.user=a.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(s,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new Ht;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new ci;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Ht;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),z(i)){const a={data:null,error:i};return Ai(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,r,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(o){i.push(o)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await $t(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await $s(this.userStorage,this.storageKey+"-user",{user:r.user});const n=Object.assign({},r);delete n.user;const i=yo(n);await $s(this.storage,this.storageKey,i)}else{const n=yo(r);await $s(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await $t(this.storage,this.storageKey),await $t(this.storage,this.storageKey+"-code-verifier"),await $t(this.storage,this.storageKey+"-user"),this.userStorage&&await $t(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Tt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Es);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/Es);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Es}ms, refresh threshold is ${Xi} ticks`),n<=Xi&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Yl)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const n=[`provider=${encodeURIComponent(r)}`];if(s?.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,a]=await bs(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(l.toString())}if(s?.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s?.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;return i?this._returnResult({data:null,error:i}):await J(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:o,error:u}=await J(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&o.type==="totp"&&(!((n=o?.totp)===null||n===void 0)&&n.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),this._returnResult({data:o,error:null}))})}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?wf(e.webauthn.credential_response):xf(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:o}=await J(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(s=n?.session)===null||s===void 0?void 0:s.access_token});return o?this._returnResult({data:null,error:o}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:o}))})}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=await J(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=n?.session)===null||s===void 0?void 0:s.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:bf(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:yf(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const n={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r?.factors)!==null&&e!==void 0?e:[])n.all.push(i),i.status==="verified"&&n[i.factor_type].push(i);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:s},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Pi(s.access_token);let a=null;i.aal&&(a=i.aal);let l=a;((r=(e=s.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:s},error:n}=r;return n?this._returnResult({data:null,error:n}):s?await J(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ht})})}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async s=>{const{data:{session:n},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new Ht});const a=await J(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&Tt()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(s){if(z(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,r){try{return await this._useSession(async s=>{const{data:{session:n},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new Ht});const a=await J(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&Tt()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(s){if(z(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;return s?this._returnResult({data:null,error:s}):r?await J(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:n=>({data:n,error:null})}):this._returnResult({data:null,error:new Ht})})}catch(e){if(z(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:s},error:n}=r;return n?this._returnResult({data:null,error:n}):s?(await J(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ht})})}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(l=>l.kid===e);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(l=>l.kid===e),s&&this.jwks_cached_at+Ah>n)return s;const{data:i,error:a}=await J(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,s=i.keys.find(l=>l.kid===e),!s)?null:s}async getClaims(e,r={}){try{let s=e;if(!s){const{data:v,error:g}=await this.getSession();if(g||!v.session)return this._returnResult({data:null,error:g});s=v.session.access_token}const{header:n,payload:i,signature:a,raw:{header:l,payload:o}}=Pi(s);r?.allowExpired||Qh(i.exp);const u=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){const{error:v}=await this.getUser(s);if(v)throw v;return{data:{claims:i,header:n,signature:a},error:null}}const d=Xh(n.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,Dh(`${l}.${o}`)))throw new ta("Invalid JWT signature");return{data:{claims:i,header:n,signature:a},error:null}}catch(s){if(z(s))return this._returnResult({data:null,error:s});throw s}}}mn.nextInstanceID={};const Rf=mn,Cf="2.90.1";let sn="";typeof Deno<"u"?sn="deno":typeof document<"u"?sn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?sn="react-native":sn="node";const If={"X-Client-Info":`supabase-js-${sn}/${Cf}`},jf={headers:If},Nf={schema:"public"},Uf={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Lf={};function _n(t){"@babel/helpers - typeof";return _n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_n(t)}function Df(t,e){if(_n(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(_n(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qf(t){var e=Df(t,"string");return _n(e)=="symbol"?e:e+""}function Bf(t,e,r){return(e=qf(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function To(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Je(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?To(Object(r),!0).forEach(function(s){Bf(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):To(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}const Mf=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),zf=()=>Headers,Ff=(t,e,r)=>{const s=Mf(r),n=zf();return async(i,a)=>{var l;const o=(l=await e())!==null&&l!==void 0?l:t;let u=new n(a?.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${o}`),s(i,Je(Je({},a),{},{headers:u}))}};function Wf(t){return t.endsWith("/")?t:t+"/"}function Vf(t,e){var r,s;const{db:n,auth:i,realtime:a,global:l}=t,{db:o,auth:u,realtime:d,global:h}=e,f={db:Je(Je({},o),n),auth:Je(Je({},u),i),realtime:Je(Je({},d),a),storage:{},global:Je(Je(Je({},h),l),{},{headers:Je(Je({},(r=h?.headers)!==null&&r!==void 0?r:{}),(s=l?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function Gf(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Wf(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Kf=class extends Rf{constructor(t){super(t)}},Hf=class{constructor(t,e,r){var s,n;this.supabaseUrl=t,this.supabaseKey=e;const i=Gf(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const a=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:Nf,realtime:Lf,auth:Je(Je({},Uf),{},{storageKey:a}),global:jf},o=Vf(r??{},l);if(this.storageKey=(s=o.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(n=o.global.headers)!==null&&n!==void 0?n:{},o.accessToken)this.accessToken=o.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=o.auth)!==null&&u!==void 0?u:{},this.headers,o.global.fetch)}this.fetch=Ff(e,this._getAccessToken.bind(this),o.global.fetch),this.realtime=this._initRealtimeClient(Je({headers:this.headers,accessToken:this._getAccessToken.bind(this)},o.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new $d(new URL("rest/v1",i).href,{headers:this.headers,schema:o.db.schema,fetch:this.fetch}),this.storage=new kh(this.storageUrl.href,this.headers,this.fetch,r?.storage),o.accessToken||this._listenForAuthEvents()}get functions(){return new wd(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:s}=await t.auth.getSession();return(e=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:s,userStorage:n,storageKey:i,flowType:a,lock:l,debug:o,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Kf({url:this.authUrl.href,headers:Je(Je({},f),d),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:s,userStorage:n,flowType:a,lock:l,debug:o,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Fd(this.realtimeUrl.href,Je(Je({},t),{},{params:Je(Je({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Jf=(t,e,r)=>new Hf(t,e,r);function Yf(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const r=e.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Yf()&&console.warn("â ï¸  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Qf="https://vsugvwvjjcdahhioaceq.supabase.co",Xf="sb_publishable_nnx2rso4fB1TBcLmFS05BQ_I65de5MQ",yr=Jf(Qf,Xf,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});async function Zf(t,e){const{data:r,error:s}=await yr.auth.signUp({email:t,password:e,options:{emailRedirectTo:window.location.origin}});if(s)throw s;return{user:r.user,session:r.session}}async function ev(t,e){const{data:r,error:s}=await yr.auth.signInWithPassword({email:t,password:e});if(s)throw s;return{user:r.user,session:r.session}}async function tv(){const{error:t}=await yr.auth.signOut();if(t)throw t}async function Zl(){const{data:{user:t},error:e}=await yr.auth.getUser();if(e)throw e;return t}async function rv(t){const{data:e,error:r}=await yr.from("user_profiles").select("*").eq("id",t).single();if(r)throw r;return e}async function sv(t,e){const{data:r,error:s}=await yr.from("user_profiles").update(e).eq("id",t).select().single();if(s)throw s;return r}async function nv(t,e="",r="email"){const s=await Zl();if(!s)throw new Error("Must be logged in to create participation request");console.log("Creating participation request with:",{user_id:s.id,study_id:t,notes:e,contact_preference:r,status:"pending"});const{data:n,error:i}=await yr.from("participation_requests").insert({user_id:s.id,study_id:t,notes:e,contact_preference:r,status:"pending"}).select().single();if(i)throw console.error("Supabase insert error:",i),i.code==="23505"?new Error("You have already requested to participate in this study"):i;return console.log("Participation request created:",n),n}async function Ao(){const t=await Zl();if(!t)return[];const{data:e,error:r}=await yr.from("participation_requests").select(`
      *,
      studies (
        id,
        title,
        brief_summary,
        recruiting_status
      )
    `).eq("user_id",t.id).order("created_at",{ascending:!1});if(r)throw r;return e}async function iv(t){const{data:e,error:r}=await yr.from("participation_requests").update({status:"withdrawn"}).eq("id",t).select().single();if(r)throw r;return e}function av(t){const{data:{subscription:e}}=yr.auth.onAuthStateChange((r,s)=>{t(r,s)});return e}const bn=En(null),Po=En(null),ov=En(!0);async function lv(){const{data:{session:t}}=await yr.auth.getSession();Po.set(t),bn.set(t?.user??null),ov.set(!1),av((e,r)=>{Po.set(r),bn.set(r?.user??null)})}const cv=(t,e)=>{const r=new Array(t.length+e.length);for(let s=0;s<t.length;s++)r[s]=t[s];for(let s=0;s<e.length;s++)r[t.length+s]=e[s];return r},uv=(t,e)=>({classGroupId:t,validator:e}),ec=(t=new Map,e=null,r)=>({nextPart:t,validators:e,classGroupId:r}),Yn="-",Oo=[],dv="arbitrary..",hv=t=>{const e=vv(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]"))return fv(a);const l=a.split(Yn),o=l[0]===""&&l.length>1?1:0;return tc(l,o,e)},getConflictingClassGroupIds:(a,l)=>{if(l){const o=s[a],u=r[a];return o?u?cv(u,o):o:u||Oo}return r[a]||Oo}}},tc=(t,e,r)=>{if(t.length-e===0)return r.classGroupId;const n=t[e],i=r.nextPart.get(n);if(i){const u=tc(t,e+1,i);if(u)return u}const a=r.validators;if(a===null)return;const l=e===0?t.join(Yn):t.slice(e).join(Yn),o=a.length;for(let u=0;u<o;u++){const d=a[u];if(d.validator(l))return d.classGroupId}},fv=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),r=e.indexOf(":"),s=e.slice(0,r);return s?dv+s:void 0})(),vv=t=>{const{theme:e,classGroups:r}=t;return pv(r,e)},pv=(t,e)=>{const r=ec();for(const s in t){const n=t[s];ka(n,r,s,e)}return r},ka=(t,e,r,s)=>{const n=t.length;for(let i=0;i<n;i++){const a=t[i];gv(a,e,r,s)}},gv=(t,e,r,s)=>{if(typeof t=="string"){mv(t,e,r);return}if(typeof t=="function"){_v(t,e,r,s);return}bv(t,e,r,s)},mv=(t,e,r)=>{const s=t===""?e:rc(e,t);s.classGroupId=r},_v=(t,e,r,s)=>{if(yv(t)){ka(t(s),e,r,s);return}e.validators===null&&(e.validators=[]),e.validators.push(uv(r,t))},bv=(t,e,r,s)=>{const n=Object.entries(t),i=n.length;for(let a=0;a<i;a++){const[l,o]=n[a];ka(o,rc(e,l),r,s)}},rc=(t,e)=>{let r=t;const s=e.split(Yn),n=s.length;for(let i=0;i<n;i++){const a=s[i];let l=r.nextPart.get(a);l||(l=ec(),r.nextPart.set(a,l)),r=l}return r},yv=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,wv=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=Object.create(null),s=Object.create(null);const n=(i,a)=>{r[i]=a,e++,e>t&&(e=0,s=r,r=Object.create(null))};return{get(i){let a=r[i];if(a!==void 0)return a;if((a=s[i])!==void 0)return n(i,a),a},set(i,a){i in r?r[i]=a:n(i,a)}}},ra="!",Ro=":",xv=[],Co=(t,e,r,s,n)=>({modifiers:t,hasImportantModifier:e,baseClassName:r,maybePostfixModifierPosition:s,isExternal:n}),kv=t=>{const{prefix:e,experimentalParseClassName:r}=t;let s=n=>{const i=[];let a=0,l=0,o=0,u;const d=n.length;for(let m=0;m<d;m++){const _=n[m];if(a===0&&l===0){if(_===Ro){i.push(n.slice(o,m)),o=m+1;continue}if(_==="/"){u=m;continue}}_==="["?a++:_==="]"?a--:_==="("?l++:_===")"&&l--}const h=i.length===0?n:n.slice(o);let f=h,v=!1;h.endsWith(ra)?(f=h.slice(0,-1),v=!0):h.startsWith(ra)&&(f=h.slice(1),v=!0);const g=u&&u>o?u-o:void 0;return Co(i,v,f,g)};if(e){const n=e+Ro,i=s;s=a=>a.startsWith(n)?i(a.slice(n.length)):Co(xv,!1,a,void 0,!0)}if(r){const n=s;s=i=>r({className:i,parseClassName:n})}return s},Sv=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((r,s)=>{e.set(r,1e6+s)}),r=>{const s=[];let n=[];for(let i=0;i<r.length;i++){const a=r[i],l=a[0]==="[",o=e.has(a);l||o?(n.length>0&&(n.sort(),s.push(...n),n=[]),s.push(a)):n.push(a)}return n.length>0&&(n.sort(),s.push(...n)),s}},Ev=t=>({cache:wv(t.cacheSize),parseClassName:kv(t),sortModifiers:Sv(t),...hv(t)}),$v=/\s+/,Tv=(t,e)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:n,sortModifiers:i}=e,a=[],l=t.trim().split($v);let o="";for(let u=l.length-1;u>=0;u-=1){const d=l[u],{isExternal:h,modifiers:f,hasImportantModifier:v,baseClassName:g,maybePostfixModifierPosition:m}=r(d);if(h){o=d+(o.length>0?" "+o:o);continue}let _=!!m,y=s(_?g.substring(0,m):g);if(!y){if(!_){o=d+(o.length>0?" "+o:o);continue}if(y=s(g),!y){o=d+(o.length>0?" "+o:o);continue}_=!1}const O=f.length===0?"":f.length===1?f[0]:i(f).join(":"),x=v?O+ra:O,T=x+y;if(a.indexOf(T)>-1)continue;a.push(T);const A=n(y,_);for(let E=0;E<A.length;++E){const R=A[E];a.push(x+R)}o=d+(o.length>0?" "+o:o)}return o},Av=(...t)=>{let e=0,r,s,n="";for(;e<t.length;)(r=t[e++])&&(s=sc(r))&&(n&&(n+=" "),n+=s);return n},sc=t=>{if(typeof t=="string")return t;let e,r="";for(let s=0;s<t.length;s++)t[s]&&(e=sc(t[s]))&&(r&&(r+=" "),r+=e);return r},Pv=(t,...e)=>{let r,s,n,i;const a=o=>{const u=e.reduce((d,h)=>h(d),t());return r=Ev(u),s=r.cache.get,n=r.cache.set,i=l,l(o)},l=o=>{const u=s(o);if(u)return u;const d=Tv(o,r);return n(o,d),d};return i=a,(...o)=>i(Av(...o))},Ov=[],pt=t=>{const e=r=>r[t]||Ov;return e.isThemeGetter=!0,e},nc=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ic=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Rv=/^\d+\/\d+$/,Cv=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Iv=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,jv=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Nv=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Uv=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ks=t=>Rv.test(t),ne=t=>!!t&&!Number.isNaN(Number(t)),Br=t=>!!t&&Number.isInteger(Number(t)),Ci=t=>t.endsWith("%")&&ne(t.slice(0,-1)),Ar=t=>Cv.test(t),Lv=()=>!0,Dv=t=>Iv.test(t)&&!jv.test(t),ac=()=>!1,qv=t=>Nv.test(t),Bv=t=>Uv.test(t),Mv=t=>!q(t)&&!B(t),zv=t=>Ms(t,cc,ac),q=t=>nc.test(t),es=t=>Ms(t,uc,Dv),Ii=t=>Ms(t,Kv,ne),Io=t=>Ms(t,oc,ac),Fv=t=>Ms(t,lc,Bv),Dn=t=>Ms(t,dc,qv),B=t=>ic.test(t),en=t=>zs(t,uc),Wv=t=>zs(t,Hv),jo=t=>zs(t,oc),Vv=t=>zs(t,cc),Gv=t=>zs(t,lc),qn=t=>zs(t,dc,!0),Ms=(t,e,r)=>{const s=nc.exec(t);return s?s[1]?e(s[1]):r(s[2]):!1},zs=(t,e,r=!1)=>{const s=ic.exec(t);return s?s[1]?e(s[1]):r:!1},oc=t=>t==="position"||t==="percentage",lc=t=>t==="image"||t==="url",cc=t=>t==="length"||t==="size"||t==="bg-size",uc=t=>t==="length",Kv=t=>t==="number",Hv=t=>t==="family-name",dc=t=>t==="shadow",Jv=()=>{const t=pt("color"),e=pt("font"),r=pt("text"),s=pt("font-weight"),n=pt("tracking"),i=pt("leading"),a=pt("breakpoint"),l=pt("container"),o=pt("spacing"),u=pt("radius"),d=pt("shadow"),h=pt("inset-shadow"),f=pt("text-shadow"),v=pt("drop-shadow"),g=pt("blur"),m=pt("perspective"),_=pt("aspect"),y=pt("ease"),O=pt("animate"),x=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[...T(),B,q],E=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],$=()=>[B,q,o],I=()=>[ks,"full","auto",...$()],Q=()=>[Br,"none","subgrid",B,q],ct=()=>["auto",{span:["full",Br,B,q]},Br,B,q],Fe=()=>[Br,"auto",B,q],Qe=()=>["auto","min","max","fr",B,q],Gt=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],mt=()=>["start","end","center","stretch","center-safe","end-safe"],ut=()=>["auto",...$()],Ut=()=>[ks,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...$()],W=()=>[t,B,q],Xe=()=>[...T(),jo,Io,{position:[B,q]}],ee=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Ce=()=>["auto","cover","contain",Vv,zv,{size:[B,q]}],_t=()=>[Ci,en,es],le=()=>["","none","full",u,B,q],X=()=>["",ne,en,es],De=()=>["solid","dashed","dotted","double"],We=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ce=()=>[ne,Ci,jo,Io],Lt=()=>["","none",g,B,q],Te=()=>["none",ne,B,q],K=()=>["none",ne,B,q],Ve=()=>[ne,B,q],Se=()=>[ks,"full",...$()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ar],breakpoint:[Ar],color:[Lv],container:[Ar],"drop-shadow":[Ar],ease:["in","out","in-out"],font:[Mv],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ar],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ar],shadow:[Ar],spacing:["px",ne],text:[Ar],"text-shadow":[Ar],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ks,q,B,_]}],container:["container"],columns:[{columns:[ne,q,B,l]}],"break-after":[{"break-after":x()}],"break-before":[{"break-before":x()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{start:I()}],end:[{end:I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[Br,"auto",B,q]}],basis:[{basis:[ks,"full","auto",l,...$()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ne,ks,"auto","initial","none",q]}],grow:[{grow:["",ne,B,q]}],shrink:[{shrink:["",ne,B,q]}],order:[{order:[Br,"first","last","none",B,q]}],"grid-cols":[{"grid-cols":Q()}],"col-start-end":[{col:ct()}],"col-start":[{"col-start":Fe()}],"col-end":[{"col-end":Fe()}],"grid-rows":[{"grid-rows":Q()}],"row-start-end":[{row:ct()}],"row-start":[{"row-start":Fe()}],"row-end":[{"row-end":Fe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Qe()}],"auto-rows":[{"auto-rows":Qe()}],gap:[{gap:$()}],"gap-x":[{"gap-x":$()}],"gap-y":[{"gap-y":$()}],"justify-content":[{justify:[...Gt(),"normal"]}],"justify-items":[{"justify-items":[...mt(),"normal"]}],"justify-self":[{"justify-self":["auto",...mt()]}],"align-content":[{content:["normal",...Gt()]}],"align-items":[{items:[...mt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...mt(),{baseline:["","last"]}]}],"place-content":[{"place-content":Gt()}],"place-items":[{"place-items":[...mt(),"baseline"]}],"place-self":[{"place-self":["auto",...mt()]}],p:[{p:$()}],px:[{px:$()}],py:[{py:$()}],ps:[{ps:$()}],pe:[{pe:$()}],pt:[{pt:$()}],pr:[{pr:$()}],pb:[{pb:$()}],pl:[{pl:$()}],m:[{m:ut()}],mx:[{mx:ut()}],my:[{my:ut()}],ms:[{ms:ut()}],me:[{me:ut()}],mt:[{mt:ut()}],mr:[{mr:ut()}],mb:[{mb:ut()}],ml:[{ml:ut()}],"space-x":[{"space-x":$()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":$()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ut()}],w:[{w:[l,"screen",...Ut()]}],"min-w":[{"min-w":[l,"screen","none",...Ut()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[a]},...Ut()]}],h:[{h:["screen","lh",...Ut()]}],"min-h":[{"min-h":["screen","lh","none",...Ut()]}],"max-h":[{"max-h":["screen","lh",...Ut()]}],"font-size":[{text:["base",r,en,es]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,B,Ii]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ci,q]}],"font-family":[{font:[Wv,q,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,B,q]}],"line-clamp":[{"line-clamp":[ne,"none",B,Ii]}],leading:[{leading:[i,...$()]}],"list-image":[{"list-image":["none",B,q]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",B,q]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...De(),"wavy"]}],"text-decoration-thickness":[{decoration:[ne,"from-font","auto",B,es]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[ne,"auto",B,q]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",B,q]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",B,q]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Xe()}],"bg-repeat":[{bg:ee()}],"bg-size":[{bg:Ce()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Br,B,q],radial:["",B,q],conic:[Br,B,q]},Gv,Fv]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:_t()}],"gradient-via-pos":[{via:_t()}],"gradient-to-pos":[{to:_t()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:le()}],"rounded-s":[{"rounded-s":le()}],"rounded-e":[{"rounded-e":le()}],"rounded-t":[{"rounded-t":le()}],"rounded-r":[{"rounded-r":le()}],"rounded-b":[{"rounded-b":le()}],"rounded-l":[{"rounded-l":le()}],"rounded-ss":[{"rounded-ss":le()}],"rounded-se":[{"rounded-se":le()}],"rounded-ee":[{"rounded-ee":le()}],"rounded-es":[{"rounded-es":le()}],"rounded-tl":[{"rounded-tl":le()}],"rounded-tr":[{"rounded-tr":le()}],"rounded-br":[{"rounded-br":le()}],"rounded-bl":[{"rounded-bl":le()}],"border-w":[{border:X()}],"border-w-x":[{"border-x":X()}],"border-w-y":[{"border-y":X()}],"border-w-s":[{"border-s":X()}],"border-w-e":[{"border-e":X()}],"border-w-t":[{"border-t":X()}],"border-w-r":[{"border-r":X()}],"border-w-b":[{"border-b":X()}],"border-w-l":[{"border-l":X()}],"divide-x":[{"divide-x":X()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":X()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...De(),"hidden","none"]}],"divide-style":[{divide:[...De(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...De(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ne,B,q]}],"outline-w":[{outline:["",ne,en,es]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",d,qn,Dn]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",h,qn,Dn]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:X()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[ne,es]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":X()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",f,qn,Dn]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[ne,B,q]}],"mix-blend":[{"mix-blend":[...We(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":We()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ne]}],"mask-image-linear-from-pos":[{"mask-linear-from":ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":ce()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":ce()}],"mask-image-t-to-pos":[{"mask-t-to":ce()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":ce()}],"mask-image-r-to-pos":[{"mask-r-to":ce()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":ce()}],"mask-image-b-to-pos":[{"mask-b-to":ce()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":ce()}],"mask-image-l-to-pos":[{"mask-l-to":ce()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":ce()}],"mask-image-x-to-pos":[{"mask-x-to":ce()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":ce()}],"mask-image-y-to-pos":[{"mask-y-to":ce()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[B,q]}],"mask-image-radial-from-pos":[{"mask-radial-from":ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":ce()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[ne]}],"mask-image-conic-from-pos":[{"mask-conic-from":ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":ce()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Xe()}],"mask-repeat":[{mask:ee()}],"mask-size":[{mask:Ce()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",B,q]}],filter:[{filter:["","none",B,q]}],blur:[{blur:Lt()}],brightness:[{brightness:[ne,B,q]}],contrast:[{contrast:[ne,B,q]}],"drop-shadow":[{"drop-shadow":["","none",v,qn,Dn]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",ne,B,q]}],"hue-rotate":[{"hue-rotate":[ne,B,q]}],invert:[{invert:["",ne,B,q]}],saturate:[{saturate:[ne,B,q]}],sepia:[{sepia:["",ne,B,q]}],"backdrop-filter":[{"backdrop-filter":["","none",B,q]}],"backdrop-blur":[{"backdrop-blur":Lt()}],"backdrop-brightness":[{"backdrop-brightness":[ne,B,q]}],"backdrop-contrast":[{"backdrop-contrast":[ne,B,q]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ne,B,q]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ne,B,q]}],"backdrop-invert":[{"backdrop-invert":["",ne,B,q]}],"backdrop-opacity":[{"backdrop-opacity":[ne,B,q]}],"backdrop-saturate":[{"backdrop-saturate":[ne,B,q]}],"backdrop-sepia":[{"backdrop-sepia":["",ne,B,q]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":$()}],"border-spacing-x":[{"border-spacing-x":$()}],"border-spacing-y":[{"border-spacing-y":$()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",B,q]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ne,"initial",B,q]}],ease:[{ease:["linear","initial",y,B,q]}],delay:[{delay:[ne,B,q]}],animate:[{animate:["none",O,B,q]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,B,q]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:Te()}],"rotate-x":[{"rotate-x":Te()}],"rotate-y":[{"rotate-y":Te()}],"rotate-z":[{"rotate-z":Te()}],scale:[{scale:K()}],"scale-x":[{"scale-x":K()}],"scale-y":[{"scale-y":K()}],"scale-z":[{"scale-z":K()}],"scale-3d":["scale-3d"],skew:[{skew:Ve()}],"skew-x":[{"skew-x":Ve()}],"skew-y":[{"skew-y":Ve()}],transform:[{transform:[B,q,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Se()}],"translate-x":[{"translate-x":Se()}],"translate-y":[{"translate-y":Se()}],"translate-z":[{"translate-z":Se()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",B,q]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",B,q]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[ne,en,es,Ii]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Yv=Pv(Jv);function $r(...t){return Yv($l(t))}var Qv=k("<input/>");function gr(t,e){const r=Er(e,["children","$$slots","$$events","$$legacy"]),s=Er(r,["class","value","type"]);Wt(e,!1);let n=Zt(e,"class",8,void 0),i=Zt(e,"value",12,void 0),a=Zt(e,"type",8,"text");tr();var l=Qv();Sn(l,o=>({class:o,type:a(),...s}),[()=>(er($r),er(n()),P(()=>$r("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n())))],void 0,void 0,void 0,!0),Ps(l,i),M("blur",l,function(o){At.call(this,e,o)}),M("change",l,function(o){At.call(this,e,o)}),M("click",l,function(o){At.call(this,e,o)}),M("focus",l,function(o){At.call(this,e,o)}),M("focusin",l,function(o){At.call(this,e,o)}),M("focusout",l,function(o){At.call(this,e,o)}),M("keydown",l,function(o){At.call(this,e,o)}),M("keypress",l,function(o){At.call(this,e,o)}),M("keyup",l,function(o){At.call(this,e,o)}),M("mouseover",l,function(o){At.call(this,e,o)}),M("mouseenter",l,function(o){At.call(this,e,o)}),M("mouseleave",l,function(o){At.call(this,e,o)}),M("paste",l,function(o){At.call(this,e,o)}),M("input",l,function(o){At.call(this,e,o)}),b(t,l),Vt()}var Xv=k('<button class="px-4 py-2 border border-border rounded-full text-sm hover:bg-accent transition-colors"> </button>'),Zv=k(`<main class="min-h-screen bg-background flex items-center justify-center p-6"><div class="relative mx-auto max-w-5xl px-4 md:px-8 2xl:px-0"><div class="flex flex-col items-center text-center max-w-3xl mx-auto"><div class="w-full"><h1 class="mb-8 text-4xl font-extrabold tracking-tight text-foreground sm:text-5xl md:text-6xl lg:text-7xl">Find Clinical Trials <div class="mb-8 text-4xl font-extrabold tracking-tight text-foreground sm:text-5xl md:text-6xl lg:text-7xl"><span>with just a</span> <span></span> <span class="relative inline-block"><span class="relative z-10">Click</span> <span class="absolute bottom-2 left-0 right-0 h-1/4" style="background-color: rgba(21, 93, 252, 0.3);"></span></span></div></h1> <p class="mb-10 max-w-2xl text-xl text-muted-foreground md:text-2xl mx-auto">Find clinical trials you may be eligible for and express your interest to study teams. For people considering participation in medical research.</p> <div class="mb-8 space-y-3"><!></div> <div class="space-y-3 mb-8"><p class="text-sm text-muted-foreground">Or choose a common condition:</p> <div class="flex flex-wrap gap-2 justify-center"></div></div> <div class="flex flex-col space-y-4 sm:flex-row sm:space-x-4 sm:space-y-0 justify-center mb-12"><button class="inline-flex items-center justify-center whitespace-nowrap font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 text-white shadow h-10 gap-2 rounded-full px-8 py-6 text-lg shadow-lg transition-all hover:shadow-xl" style="background-color: #155dfc;">Find Studies <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></button></div> <div class="mb-8 space-y-2 text-sm text-muted-foreground border-t border-border pt-6"><p>Participation is opt-inâyou choose which studies to request.</p> <p>Study teams review your request and contact you if you're eligible.</p> <p>You can withdraw a participation request at any time.</p></div> <div class="text-xs text-muted-foreground pt-4">Flow Trials does not provide medical advice. Eligibility is determined by study teams.</div></div></div></div></main>`);function ep(t,e){Wt(e,!1);let r=F("");const s=["Diabetes","Asthma","Depression","Heart Disease","Arthritis","Cancer","Hypertension","Anxiety"];function n(){c(r).trim()&&lt(`/browse?q=${encodeURIComponent(c(r))}`)}function i(y){S(r,y),n()}function a(y){y.key==="Enter"&&n()}tr();var l=Zv(),o=p(l),u=p(o),d=p(u),h=w(p(d),4),f=p(h);gr(f,{placeholder:"Search by condition or keyword...",class:"h-14 text-lg",get value(){return c(r)},set value(y){S(r,y)},$$events:{keydown:a},$$legacy:!0});var v=w(h,2),g=w(p(v),2);vr(g,5,()=>s,fr,(y,O)=>{var x=Xv(),T=p(x);L(()=>N(T,c(O))),M("click",x,()=>i(c(O))),b(y,x)});var m=w(v,2),_=p(m);L(y=>_.disabled=y,[()=>!c(r).trim()]),M("click",_,n),b(t,l),Vt()}var tp=k("<div><!></div>");function Me(t,e){const r=Er(e,["children","$$slots","$$events","$$legacy"]),s=Er(r,["class"]);Wt(e,!1);let n=Zt(e,"class",8,void 0);const i=jl();function a(u){i("click",u)}tr();var l=tp();Sn(l,u=>({class:u,...s}),[()=>(er($r),er(n()),P(()=>$r("rounded-lg border bg-card text-card-foreground shadow-sm",n())))]);var o=p(l);ni(o,e,"default",{}),M("click",l,a),b(t,l),Vt()}var rp=k("<div><!></div>");function st(t,e){const r=Er(e,["children","$$slots","$$events","$$legacy"]),s=Er(r,["class"]);Wt(e,!1);let n=Zt(e,"class",8,void 0);tr();var i=rp();Sn(i,l=>({class:l,...s}),[()=>(er($r),er(n()),P(()=>$r("p-6 pt-0",n())))]);var a=p(i);ni(a,e,"default",{}),b(t,i),Vt()}var sp=k("<div><!></div>");function ot(t,e){const r=Er(e,["children","$$slots","$$events","$$legacy"]),s=Er(r,["class"]);Wt(e,!1);let n=Zt(e,"class",8,void 0);tr();var i=sp();Sn(i,l=>({class:l,...s}),[()=>(er($r),er(n()),P(()=>$r("flex flex-col space-y-1.5 p-6",n())))]);var a=p(i);ni(a,e,"default",{}),b(t,i),Vt()}function nt(t,e){const r=Er(e,["children","$$slots","$$events","$$legacy"]),s=Er(r,["class","tag"]);Wt(e,!1);let n=Zt(e,"class",8,void 0),i=Zt(e,"tag",8,"h3");tr();var a=pr(),l=G(a);Ku(l,i,!1,(o,u)=>{Sn(o,f=>({class:f,...s}),[()=>(er($r),er(n()),P(()=>$r("text-2xl font-semibold leading-none tracking-tight",n())))]);var d=pr(),h=G(d);ni(h,e,"default",{}),b(u,d)}),b(t,a),Vt()}const Tn="https://flowtrials-v1.onrender.com";async function np(t,e=1,r=10,s=null){const n=await fetch(`${Tn}/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query_text:t,conditions_include:[],conditions_exclude:[],zip:s,page:e,limit:r})});if(!n.ok)throw new Error(`Search failed: ${n.statusText}`);return n.json()}async function hc(t){const e=await fetch(`${Tn}/studies/${t}`);if(!e.ok)throw new Error(`Failed to fetch study: ${e.statusText}`);return e.json()}async function ip(t,e){const r=await fetch(`${Tn}/ai/eligibility-quiz`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({study_id:t,eligibility_criteria:e})});if(!r.ok){const s=await r.json().catch(()=>({}));throw new Error(s.detail||`AI generation failed: ${r.statusText}`)}return r.json()}async function ap(t){const e=await fetch(`${Tn}/ai/study-summary`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({study_id:t.id,title:t.title,brief_summary:t.brief_summary,detailed_description:t.detailed_description,interventions:t.interventions?.map(r=>r.intervention_name)||[],conditions:t.conditions||[]})});if(!e.ok){const r=await e.json().catch(()=>({}));throw new Error(r.detail||`AI generation failed: ${e.statusText}`)}return e.json()}async function fc(t){const e=await fetch(`${Tn}/ai/plain-title`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({study_id:t.id,title:t.title,brief_summary:t.brief_summary,interventions:t.interventions?.map(r=>r.intervention_name)||[],conditions:t.conditions||[]})});if(!e.ok){const r=await e.json().catch(()=>({}));throw new Error(r.detail||`AI generation failed: ${e.statusText}`)}return e.json()}var op=k('<div class="text-center py-12"><p class="text-muted-foreground">Loading studies...</p></div>'),lp=k('<div class="text-center py-12 space-y-4"><div class="text-4xl">ð</div> <div><h3 class="text-lg font-semibold mb-2">No studies found</h3> <p class="text-sm text-muted-foreground">Try searching for a different condition or term.</p></div> <button class="px-4 py-2 border rounded-md text-sm font-medium hover:bg-accent">Start Over</button></div>'),cp=k(" <!>",1),up=k('<span class="px-2 py-1 bg-green-100 text-green-800 rounded text-xs font-medium whitespace-nowrap"> </span>'),dp=k('<div class="flex items-start gap-2 mb-1"><div class="flex-1"><div class="flex items-center gap-2 mb-1"><!> <span class="text-xs text-muted-foreground italic whitespace-nowrap">â¨ AI</span></div></div> <!></div> <div class="text-xs text-muted-foreground mb-2"> </div>',1),hp=k('<span class="px-2 py-1 bg-green-100 text-green-800 rounded text-xs font-medium whitespace-nowrap"> </span>'),fp=k('<div class="flex items-start gap-2 mb-1"><!> <!></div> <div class="text-xs text-muted-foreground mb-2"><span class="animate-pulse">â¨ Generating simplified title...</span></div>',1),vp=k('<span class="px-2 py-1 bg-green-100 text-green-800 rounded text-xs font-medium whitespace-nowrap"> </span>'),pp=k('<div class="flex items-start gap-2 mb-2"><!> <!></div>'),gp=k("<span> </span>"),mp=k('<span class="mx-1">â¢</span>'),_p=k("<span> </span>"),bp=k("<span>Multiple locations</span>"),yp=k('<div class="text-xs text-muted-foreground"><!> <!> <!></div>'),wp=k('<div class="flex items-start justify-between gap-4"><div class="flex-1"><!> <!></div></div>'),xp=k('<span class="px-2 py-1 bg-muted rounded text-xs text-muted-foreground"> </span>'),kp=k('<div class="mb-3 flex flex-wrap gap-2"></div>'),Sp=k('<span class="px-2 py-1 bg-primary/10 text-primary rounded text-xs"> </span>'),Ep=k('<div class="flex flex-wrap gap-2"></div>'),$p=k('<p class="text-sm text-muted-foreground mb-3"> </p> <!> <!>',1),Tp=k("<!> <!>",1),Ap=k('<button type="button" class="w-full text-left"><!></button>'),Pp=k('<div class="mt-6 flex items-center justify-center gap-4"><button class="px-4 py-2 border rounded-md text-sm font-medium hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed">Previous</button> <span class="text-sm text-muted-foreground"> </span> <button class="px-4 py-2 border rounded-md text-sm font-medium hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed">Next</button></div>'),Op=k('<div class="mb-4 flex items-center justify-between"><p class="text-sm text-muted-foreground"><!></p></div> <div class="grid gap-4"></div> <!>',1),Rp=k('<main class="min-h-screen bg-background"><div class="border-b bg-card sticky top-0 z-10"><div class="mx-auto max-w-5xl p-4"><div class="flex items-center gap-3"><button class="text-2xl hover:opacity-70 transition-opacity">â</button> <div class="flex-1"><!></div> <div class="flex flex-col gap-1"><!></div> <button class="px-4 py-2 bg-primary text-primary-foreground rounded-md text-sm font-medium hover:opacity-90">Search</button></div></div></div> <div class="mx-auto max-w-5xl p-6"><!></div></main>');function Cp(t,e){Wt(e,!1);const r=()=>hn(vd,"$querystring",s),[s,n]=ii(),i=F(),a=F(),l=F();let o=F(""),u=F(""),d=F([]),h=F(!0),f=F(1),v=F(0);const g=10;let m=F({});async function _(ee,Ce=1){try{S(h,!0);const _t=c(u).trim()||null,le=await np(ee||"",Ce,g,_t);S(d,le.items.map(X=>({id:X.study_id,title:X.title,plainTitle:X.plain_title,snippet:X.snippet,score:X.score,reasons:X.reasons,recruitingStatus:X.recruiting_status,studyType:X.study_type,conditions:X.conditions||[],locationsSummary:X.locations_summary}))),S(v,le.total),S(f,Ce),S(h,!1),c(d).forEach(X=>{X.plainTitle||y(X.id)})}catch(_t){console.error("Error fetching studies:",_t),S(d,[]),S(v,0),S(h,!1)}}async function y(ee){if(!c(m)[ee]){St(m,c(m)[ee]=!0),S(m,c(m));try{const Ce=await hc(ee),_t=await fc(Ce);S(d,c(d).map(le=>le.id===ee?{...le,plainTitle:_t.plain_title}:le))}catch(Ce){console.error(`Failed to generate AI title for study ${ee}:`,Ce)}finally{St(m,c(m)[ee]=!1),S(m,c(m))}}}ai(()=>{const ee=new URLSearchParams(r());S(o,ee.get("q")||""),_(c(o),1)});function O(){lt(`/browse?q=${encodeURIComponent(c(o))}`),_(c(o),1)}function x(ee){ee.key==="Enter"&&O()}function T(){c(f)*g<c(v)&&_(c(o),c(f)+1)}function A(){c(f)>1&&_(c(o),c(f)-1)}as(()=>c(f),()=>{S(i,(c(f)-1)*g+1)}),as(()=>(c(f),c(v)),()=>{S(a,Math.min(c(f)*g,c(v)))}),as(()=>c(v),()=>{S(l,Math.ceil(c(v)/g))}),da(),tr();var E=Rp(),R=p(E),$=p(R),I=p($),Q=p(I),ct=w(Q,2),Fe=p(ct);gr(Fe,{placeholder:"Search by condition or keyword...",class:"h-10",get value(){return c(o)},set value(ee){S(o,ee)},$$events:{keydown:x},$$legacy:!0});var Qe=w(ct,2),Gt=p(Qe);gr(Gt,{placeholder:"ZIP (optional)",class:"h-10 w-32",maxlength:"5",get value(){return c(u)},set value(ee){S(u,ee)},$$events:{keydown:x},$$legacy:!0});var mt=w(Qe,2),ut=w(R,2),Ut=p(ut);{var W=ee=>{var Ce=op();b(ee,Ce)},Xe=ee=>{var Ce=pr(),_t=G(Ce);{var le=De=>{var We=lp(),ce=w(p(We),4);M("click",ce,()=>lt("/")),b(De,We)},X=De=>{var We=Op(),ce=G(We),Lt=p(ce),Te=p(Lt);{var K=Ie=>{var C=cp(),Re=G(C),te=w(Re);{var pe=ae=>{var it=Ye();L(()=>N(it,`for "${c(o)??""}"`)),b(ae,it)};U(te,ae=>{c(o)&&ae(pe)})}L(()=>N(Re,`Showing ${c(i)??""}â${c(a)??""} of ${c(v)??""} ${c(v)===1?"study":"studies"} `)),b(Ie,C)};U(Te,Ie=>{c(v)>0&&Ie(K)})}var Ve=w(ce,2);vr(Ve,5,()=>c(d),fr,(Ie,C)=>{var Re=Ap(),te=p(Re);Me(te,{class:"hover:shadow-md transition-shadow cursor-pointer",children:(pe,ae)=>{var it=Tp(),bt=G(it);ot(bt,{children:(oe,qe)=>{var he=wp(),ge=p(he),re=p(ge);{var me=je=>{var Ne=dp(),et=G(Ne),dt=p(et),Ge=p(dt),tt=p(Ge);nt(tt,{class:"text-lg",children:(fe,Ue)=>{var ft=Ye();L(()=>N(ft,(c(C),P(()=>c(C).plainTitle)))),b(fe,ft)},$$slots:{default:!0}});var yt=w(dt,2);{var ht=fe=>{var Ue=up(),ft=p(Ue);L(()=>N(ft,(c(C),P(()=>c(C).recruitingStatus)))),b(fe,Ue)};U(yt,fe=>{c(C),P(()=>c(C).recruitingStatus)&&fe(ht)})}var wt=w(et,2),$e=p(wt);L(()=>N($e,`Original: ${c(C),P(()=>c(C).title)??""}`)),b(je,Ne)},Be=je=>{var Ne=pr(),et=G(Ne);{var dt=tt=>{var yt=fp(),ht=G(yt),wt=p(ht);nt(wt,{class:"text-lg flex-1",children:(Ue,ft)=>{var wr=Ye();L(()=>N(wr,(c(C),P(()=>c(C).title)))),b(Ue,wr)},$$slots:{default:!0}});var $e=w(wt,2);{var fe=Ue=>{var ft=hp(),wr=p(ft);L(()=>N(wr,(c(C),P(()=>c(C).recruitingStatus)))),b(Ue,ft)};U($e,Ue=>{c(C),P(()=>c(C).recruitingStatus)&&Ue(fe)})}b(tt,yt)},Ge=tt=>{var yt=pp(),ht=p(yt);nt(ht,{class:"text-lg flex-1",children:(fe,Ue)=>{var ft=Ye();L(()=>N(ft,(c(C),P(()=>c(C).title)))),b(fe,ft)},$$slots:{default:!0}});var wt=w(ht,2);{var $e=fe=>{var Ue=vp(),ft=p(Ue);L(()=>N(ft,(c(C),P(()=>c(C).recruitingStatus)))),b(fe,Ue)};U(wt,fe=>{c(C),P(()=>c(C).recruitingStatus)&&fe($e)})}b(tt,yt)};U(et,tt=>{c(m),c(C),P(()=>c(m)[c(C).id])?tt(dt):tt(Ge,!1)},!0)}b(je,Ne)};U(re,je=>{c(C),P(()=>c(C).plainTitle)?je(me):je(Be,!1)})}var Dt=w(re,2);{var Ee=je=>{var Ne=yp(),et=p(Ne);{var dt=$e=>{var fe=gp(),Ue=p(fe);L(()=>N(Ue,(c(C),P(()=>c(C).studyType)))),b($e,fe)};U(et,$e=>{c(C),P(()=>c(C).studyType)&&$e(dt)})}var Ge=w(et,2);{var tt=$e=>{var fe=mp();b($e,fe)};U(Ge,$e=>{c(C),P(()=>c(C).studyType&&c(C).locationsSummary)&&$e(tt)})}var yt=w(Ge,2);{var ht=$e=>{var fe=_p(),Ue=p(fe);L(()=>N(Ue,(c(C),P(()=>c(C).locationsSummary)))),b($e,fe)},wt=$e=>{var fe=pr(),Ue=G(fe);{var ft=wr=>{var An=bp();b(wr,An)};U(Ue,wr=>{c(C),P(()=>c(C).locations&&c(C).locations.length>1)&&wr(ft)},!0)}b($e,fe)};U(yt,$e=>{c(C),P(()=>c(C).locationsSummary)?$e(ht):$e(wt,!1)})}b(je,Ne)};U(Dt,je=>{c(C),P(()=>c(C).studyType||c(C).locationsSummary)&&je(Ee)})}b(oe,he)},$$slots:{default:!0}});var D=w(bt,2);st(D,{children:(oe,qe)=>{var he=$p(),ge=G(he),re=p(ge),me=w(ge,2);{var Be=je=>{var Ne=kp();vr(Ne,5,()=>(c(C),P(()=>c(C).conditions.slice(0,3))),fr,(et,dt)=>{var Ge=xp(),tt=p(Ge);L(()=>N(tt,c(dt))),b(et,Ge)}),b(je,Ne)};U(me,je=>{c(C),P(()=>c(C).conditions&&c(C).conditions.length>0)&&je(Be)})}var Dt=w(me,2);{var Ee=je=>{var Ne=Ep();vr(Ne,5,()=>(c(C),P(()=>c(C).reasons)),fr,(et,dt)=>{var Ge=Sp(),tt=p(Ge);L(()=>N(tt,c(dt))),b(et,Ge)}),b(je,Ne)};U(Dt,je=>{c(C),P(()=>c(C).reasons&&c(C).reasons.length>0)&&je(Ee)})}L(()=>N(re,(c(C),P(()=>c(C).snippet)))),b(oe,he)},$$slots:{default:!0}}),b(pe,it)},$$slots:{default:!0}}),M("click",Re,()=>lt(`/study/${c(C).id}`)),b(Ie,Re)});var Se=w(Ve,2);{var Ze=Ie=>{var C=Pp(),Re=p(C),te=w(Re,2),pe=p(te),ae=w(te,2);L(()=>{Re.disabled=c(f)===1,N(pe,`Page ${c(f)??""} of ${c(l)??""}`),ae.disabled=c(f)>=c(l)}),M("click",Re,A),M("click",ae,T),b(Ie,C)};U(Se,Ie=>{c(l)>1&&Ie(Ze)})}b(De,We)};U(_t,De=>{c(d),c(v),P(()=>c(d).length===0&&c(v)===0)?De(le):De(X,!1)},!0)}b(ee,Ce)};U(Ut,ee=>{c(h)?ee(W):ee(Xe,!1)})}M("click",Q,()=>lt("/")),M("click",mt,O),b(t,E),Vt(),n()}var Ip=k('<div class="h-8 w-3/4 bg-muted animate-pulse rounded mb-4"></div> <div class="h-6 w-1/4 bg-muted animate-pulse rounded"></div>',1),jp=k('<div class="h-4 w-full bg-muted animate-pulse rounded mb-2"></div> <div class="h-4 w-full bg-muted animate-pulse rounded mb-2"></div> <div class="h-4 w-2/3 bg-muted animate-pulse rounded"></div>',1),Np=k('<div class="min-h-screen bg-background"><div class="mx-auto max-w-4xl p-6"><div class="mb-6"><div class="h-8 w-32 bg-muted animate-pulse rounded"></div></div> <!> <!></div></div>'),Up=k('<p class="text-muted-foreground mb-4"> </p> <button class="px-4 py-2 bg-primary text-primary-foreground rounded-md text-sm font-medium hover:opacity-90">Back to Browse</button>',1),Lp=k("<!> <!>",1),Dp=k('<div class="min-h-screen bg-background"><div class="mx-auto max-w-4xl p-6"><!></div></div>'),qp=k('<button class="w-full text-left px-3 py-2 text-sm text-muted-foreground hover:text-foreground hover:bg-muted rounded transition-colors">Eligibility</button>'),Bp=k('<button class="w-full text-left px-3 py-2 text-sm text-muted-foreground hover:text-foreground hover:bg-muted rounded transition-colors">Interventions</button>'),Mp=k('<button class="w-full text-left px-3 py-2 text-sm text-muted-foreground hover:text-foreground hover:bg-muted rounded transition-colors">Locations</button>'),zp=k('<button class="w-full text-left px-3 py-2 text-sm text-muted-foreground hover:text-foreground hover:bg-muted rounded transition-colors">Contacts</button>'),Fp=k('<p class="text-base font-semibold text-foreground italic"> </p>'),Wp=k('<div class="mb-4 p-4 bg-muted/50 border-l-4 border-accent rounded-md"><div class="flex items-start justify-between gap-2 mb-2"><span class="text-xs font-medium text-muted-foreground flex items-center gap-1"><span class="inline-block">â¨</span> AI-Generated Plain Title</span> <button class="text-xs text-muted-foreground hover:text-foreground"> </button></div> <!></div>'),Vp=k('<div class="mb-4 p-3 bg-destructive/10 text-destructive text-sm rounded-md"> </div>'),Gp=k('<span class="px-3 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary"> </span>'),Kp=k('<span class="px-3 py-1 rounded-full text-xs font-medium bg-muted text-muted-foreground"> </span>'),Hp=k('<span class="text-xs text-muted-foreground"> </span>'),Jp=k("<!> <!>",1),Yp=k('<!> <button class="mb-4 px-3 py-1.5 text-xs font-medium bg-muted hover:bg-muted/80 border border-border rounded-md transition-colors disabled:opacity-50 flex items-center gap-2"><span class="inline-block w-4 h-4 text-center">â¨</span> </button> <!> <!> <div class="flex flex-wrap gap-2 items-center"><!> <!></div>',1),Qp=k('<div class="flex items-center justify-between"><!> <button class="px-3 py-1.5 text-xs font-medium bg-muted hover:bg-muted/80 border border-border rounded-md transition-colors disabled:opacity-50 flex items-center gap-2"><span class="inline-block w-4 h-4 text-center">â¨</span> </button></div>'),Xp=k('<p class="text-foreground leading-7"> </p> <button class="mt-2 text-xs text-primary hover:underline"> </button>',1),Zp=k('<p class="text-foreground leading-7"> </p>'),eg=k('<div class="prose prose-sm max-w-prose"><p class="text-foreground leading-7 whitespace-pre-wrap italic"> </p></div>'),tg=k('<div class="mt-4 p-4 bg-muted/50 border-l-4 border-accent rounded-md"><div class="flex items-start justify-between gap-2 mb-2"><span class="text-xs font-medium text-muted-foreground flex items-center gap-1"><span class="inline-block">â¨</span> AI-Generated Plain Summary</span> <button class="text-xs text-muted-foreground hover:text-foreground"> </button></div> <!></div>'),rg=k('<div class="mt-4 p-3 bg-destructive/10 text-destructive text-sm rounded-md"> </div>'),sg=k('<div class="prose prose-sm max-w-prose"><!></div> <!> <!>',1),ng=k("<!> <!>",1),ig=k('<div class="prose prose-sm max-w-prose"><p class="text-foreground leading-7 whitespace-pre-wrap"> </p></div>'),ag=k("<!> <!>",1),og=k('<div class="flex items-center justify-between"><!> <button class="px-3 py-1.5 text-xs font-medium bg-muted hover:bg-muted/80 border border-border rounded-md transition-colors disabled:opacity-50 flex items-center gap-2"><span class="inline-block w-4 h-4 text-center">â¨</span> </button></div>'),lg=k('<pre class="text-foreground leading-7 whitespace-pre-wrap font-sans"> </pre> <button class="mt-2 text-xs text-primary hover:underline"> </button>',1),cg=k('<pre class="text-foreground leading-7 whitespace-pre-wrap font-sans"> </pre>'),ug=k('<p class="text-xs text-muted-foreground mb-3 italic"> </p>'),dg=k('<div class="p-4 bg-background rounded-md border border-border"><p class="text-sm font-medium text-foreground mb-2"> </p> <!> <div class="flex gap-2"><button>Yes</button> <button>No</button> <button>Unsure</button></div></div>'),hg=k("<button></button>"),fg=k('<div class="flex items-center justify-between mb-4"><p class="text-xs text-muted-foreground italic"> </p> <button class="text-xs text-muted-foreground hover:text-foreground">Reset</button></div> <!> <div class="flex justify-between items-center mt-4"><button class="px-3 py-1.5 text-xs border rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-muted transition-colors">â Previous</button> <div class="flex gap-1"></div> <button class="px-3 py-1.5 text-xs border rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-muted transition-colors">Next â</button></div>',1),vg=k('<div class="p-3 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-900 rounded-md mb-3"><p class="text-sm text-green-800 dark:text-green-200"><strong>You may be eligible!</strong> Based on your responses, you appear to meet the initial criteria for this study. We recommend contacting the study coordinator to confirm your eligibility and learn more about participation.</p></div>'),pg=k('<div class="p-3 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-900 rounded-md mb-3"><p class="text-sm text-amber-800 dark:text-amber-200"><strong>Eligibility unclear.</strong> Based on your responses, please reach out to the study coordinator to discuss your eligibility. They can provide personalized guidance based on the full eligibility criteria.</p></div>'),gg=k('<div class="p-4 bg-background rounded-md border border-border"><div class="text-center mb-4"><p class="text-sm font-semibold text-foreground mb-2">Quiz Complete!</p> <div class="flex justify-center gap-4 text-xs text-muted-foreground mb-3"><span> </span> <span> </span> <span> </span></div></div> <!> <button class="w-full px-3 py-2 text-xs border rounded hover:bg-muted transition-colors">Retake Quiz</button></div>'),mg=k('<div class="space-y-4"><!> <div class="mt-4 p-3 bg-accent/10 border border-accent rounded-md"><p class="text-xs text-foreground"><strong>Note:</strong> This quiz is AI-generated and provides general guidance only. Please review the full eligibility criteria above and contact the study team to confirm your eligibility.</p></div></div>'),_g=k('<div class="mt-4 p-4 bg-muted/50 border-l-4 border-accent rounded-md"><div class="flex items-start justify-between gap-2 mb-3"><span class="text-xs font-medium text-muted-foreground flex items-center gap-1"><span class="inline-block">â¨</span> AI-Generated Eligibility Quiz</span> <button class="text-xs text-muted-foreground hover:text-foreground"> </button></div> <!></div>'),bg=k('<div class="mt-4 p-3 bg-destructive/10 text-destructive text-sm rounded-md"> </div>'),yg=k('<div class="prose prose-sm max-w-prose"><!></div> <!> <!>',1),wg=k("<!> <!>",1),xg=k('<div class="text-xs text-muted-foreground mt-1"> </div>'),kg=k('<div class="text-xs text-muted-foreground mt-2"> </div>'),Sg=k('<button class="text-xs text-muted-foreground hover:text-foreground px-2"> </button>'),Eg=k('<div class="text-xs text-muted-foreground mt-3 pt-3 border-t border-border"> </div>'),$g=k('<div class="border border-border rounded-md p-3"><div class="flex items-start justify-between gap-2"><div class="flex-1"><div class="font-medium text-foreground text-sm"> </div> <!> <!></div> <!></div> <!></div>'),Tg=k('<div class="space-y-2"></div>'),Ag=k("<!> <!>",1),Pg=k('<span class="text-muted-foreground">-</span>'),Og=k('<span class="font-medium"> </span> <!>',1),Rg=k('<li class="text-sm text-foreground"><!> <span class="text-muted-foreground"> </span></li>'),Cg=k('<ul class="space-y-2"></ul>'),Ig=k("<!> <!>",1),jg=k('<p class="text-sm text-muted-foreground">No locations listed</p>'),Ng=k("<!> <!>",1),Ug=k('<span class="text-muted-foreground font-normal"> </span>'),Lg=k("<div> </div>"),Dg=k("<div> </div>"),qg=k('<li class="text-sm"><div class="font-medium text-foreground"> <!></div> <div class="text-muted-foreground mt-1 space-y-1"><!> <!></div></li>'),Bg=k('<ul class="space-y-3"></ul>'),Mg=k("<!> <!>",1),zg=k('<button class="w-full px-6 py-3 bg-primary text-primary-foreground rounded-md font-semibold hover:opacity-90 transition-opacity">Participate</button>'),Fg=k('<div class="mt-1"> </div>'),Wg=k('<div class="min-h-screen bg-background"><div class="mx-auto max-w-7xl p-6 flex gap-8"><aside class="hidden lg:block w-48 flex-shrink-0"><nav class="sticky top-6 space-y-1"><button class="w-full text-left px-3 py-2 text-sm text-muted-foreground hover:text-foreground hover:bg-muted rounded transition-colors">Summary</button> <!> <!> <!> <!></nav></aside> <div class="flex-1 min-w-0"><button class="mb-6 text-sm text-muted-foreground hover:text-foreground transition-colors flex items-center gap-2">â Back to Browse</button> <!> <!> <!> <!> <!> <!> <!> <!> <div class="text-xs text-muted-foreground text-center pb-6"><div> </div> <!></div></div></div></div>'),Vg=k('<div class="p-3 bg-destructive/10 text-destructive text-sm rounded-md"> </div>'),Gg=k(`<p class="text-sm text-muted-foreground">The study team will review your request and contact you if you're eligible.</p> <div class="space-y-2"><label for="note" class="text-sm font-medium">Optional Note for Researchers</label> <textarea id="note" placeholder="Add any relevant information (medications, availability, questions, etc.)" rows="4" class="w-full px-3 py-2 text-sm border border-input rounded-md bg-background resize-none focus:outline-none focus:ring-2 focus:ring-ring disabled:opacity-50"></textarea></div> <!> <div class="flex gap-3 pt-2"><button class="flex-1 px-4 py-2 border border-input rounded-md text-sm font-medium hover:bg-accent transition-colors disabled:opacity-50">Cancel</button> <button class="flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-md text-sm font-medium hover:opacity-90 transition-opacity disabled:opacity-50"> </button></div>`,1),Kg=k("<!> <!>",1),Hg=k('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"><div><!></div></div>'),Jg=k("<!> <!>",1);function Yg(t,e){Wt(e,!1);const r=()=>hn(bn,"$user",n),s=()=>hn(fd,"$location",n),[n,i]=ii(),a=F();let l=Zt(e,"params",24,()=>({})),o=F(null),u=F(!0),d=F(null),h=F(!1),f=F(""),v=F(!1),g=F(""),m=F(null),_=F(!1),y=F(""),O=F(!1),x=F({}),T=F(null),A=F(!1),E=F(""),R=F(!1),$=F(null),I=F(!1),Q=F(""),ct=F(!1);async function Fe(D){S(u,!0),S(d,null),S(o,null);try{S(o,await hc(D)),c(o).ai_plain_title&&(S($,c(o).ai_plain_title),S(ct,!0)),c(o).ai_plain_summary&&(S(T,c(o).ai_plain_summary),S(R,!0)),c(o).ai_eligibility_quiz&&(S(m,c(o).ai_eligibility_quiz),S(O,!0)),S(u,!1)}catch(oe){console.error("Error loading study:",oe),S(d,"Failed to load study details"),S(u,!1)}}function Qe(){if(!r()){lt(`/signup?redirect=${encodeURIComponent(s())}`);return}S(h,!0)}async function Gt(){S(v,!0),S(g,"");try{console.log("Submitting participation request:",{studyId:parseInt(l().id),note:c(f),contactPreference:"email"}),await nv(parseInt(l().id),c(f),"email"),console.log("Participation request successful"),lt("/profile?participationSuccess=true")}catch(D){console.error("Participation request error:",D),console.error("Error details:",D.message,D.code,D.details),D.message&&D.message.includes("already requested")?S(g,"You have already submitted a request for this study."):S(g,D.message||"Unable to submit request. Please try again."),S(v,!1)}}function mt(){S(h,!1),S(f,""),S(g,"")}function ut(){lt("/browse")}async function Ut(){if(c(o)?.eligibility_criteria){S(_,!0),S(y,""),S(O,!0),S(x,{});try{const D=await ip(c(o).id,c(o).eligibility_criteria);S(m,D.questions)}catch(D){console.error("Quiz generation error:",D),S(y,D.message||"Failed to generate quiz. Please try again.")}finally{S(_,!1)}}}async function W(){if(c(o)){S(A,!0),S(E,""),S(R,!0);try{const D=await ap(c(o));S(T,D.summary)}catch(D){console.error("Summary generation error:",D),S(E,D.message||"Failed to generate summary. Please try again.")}finally{S(A,!1)}}}async function Xe(){if(c(o)){S(I,!0),S(Q,""),S(ct,!0);try{const D=await fc(c(o));S($,D.plain_title)}catch(D){console.error("Title generation error:",D),S(Q,D.message||"Failed to generate title. Please try again.")}finally{S(I,!1)}}}function ee(){S(O,!c(O))}function Ce(){S(R,!c(R))}function _t(){S(ct,!c(ct))}function le(D){const oe=document.getElementById(D);oe&&oe.scrollIntoView({behavior:"smooth",block:"start"})}let X=F({});function De(D){St(X,c(X)[D]=!c(X)[D]),S(X,c(X))}let We=F(!1),ce=F(!1);const Lt=300,Te=400;let K=F(0),Ve=F(!1);function Se(){c(m)&&c(K)<c(m).length-1&&Fn(K)}function Ze(){c(K)>0&&(Fn(K,-1),S(Ve,!1))}function Ie(){S(K,0),S(x,{}),S(Ve,!1)}function C(D){St(x,c(x)[c(K)]=D),S(x,c(x)),setTimeout(()=>{c(K)<c(m).length-1?Se():S(Ve,!0)},300)}as(()=>er(l()),()=>{l().id&&Fe(l().id)}),as(()=>r(),()=>{r()&&typeof window<"u"&&new URLSearchParams(window.location.search).get("fromSignup")==="true"&&(S(h,!0),window.history.replaceState({},"",window.location.pathname))}),as(()=>(c(Ve),c(m),c(x)),()=>{S(a,(()=>{if(!c(Ve)||!c(m))return null;Object.keys(c(x)).length;const D=Object.values(c(x)).filter(ge=>ge==="yes").length,oe=Object.values(c(x)).filter(ge=>ge==="no").length,qe=Object.values(c(x)).filter(ge=>ge==="unsure").length;return{likelyEligible:D>c(m).length/2&&oe===0,yesCount:D,noCount:oe,unsureCount:qe,totalQuestions:c(m).length}})())}),da(),tr();var Re=Jg(),te=G(Re);{var pe=D=>{var oe=Np(),qe=p(oe),he=w(p(qe),2);Me(he,{class:"mb-6",children:(re,me)=>{ot(re,{children:(Be,Dt)=>{var Ee=Ip();b(Be,Ee)},$$slots:{default:!0}})},$$slots:{default:!0}});var ge=w(he,2);Me(ge,{class:"mb-6",children:(re,me)=>{st(re,{class:"p-6",children:(Be,Dt)=>{var Ee=jp();b(Be,Ee)},$$slots:{default:!0}})},$$slots:{default:!0}}),b(D,oe)},ae=D=>{var oe=pr(),qe=G(oe);{var he=re=>{var me=Dp(),Be=p(me),Dt=p(Be);Me(Dt,{class:"border-destructive",children:(Ee,je)=>{var Ne=Lp(),et=G(Ne);ot(et,{children:(Ge,tt)=>{nt(Ge,{class:"text-destructive",children:(yt,ht)=>{var wt=Ye("Error Loading Study");b(yt,wt)},$$slots:{default:!0}})},$$slots:{default:!0}});var dt=w(et,2);st(dt,{children:(Ge,tt)=>{var yt=Up(),ht=G(yt),wt=p(ht),$e=w(ht,2);L(()=>N(wt,c(d))),M("click",$e,ut),b(Ge,yt)},$$slots:{default:!0}}),b(Ee,Ne)},$$slots:{default:!0}}),b(re,me)},ge=re=>{var me=pr(),Be=G(me);{var Dt=Ee=>{var je=Wg(),Ne=p(je),et=p(Ne),dt=p(et),Ge=p(dt),tt=w(Ge,2);{var yt=H=>{var _e=qp();M("click",_e,()=>le("eligibility")),b(H,_e)};U(tt,H=>{c(o),P(()=>c(o).eligibility_criteria)&&H(yt)})}var ht=w(tt,2);{var wt=H=>{var _e=Bp();M("click",_e,()=>le("interventions")),b(H,_e)};U(ht,H=>{c(o),P(()=>c(o).interventions&&c(o).interventions.length>0)&&H(wt)})}var $e=w(ht,2);{var fe=H=>{var _e=Mp();M("click",_e,()=>le("locations")),b(H,_e)};U($e,H=>{c(o),P(()=>c(o).locations&&c(o).locations.length>0)&&H(fe)})}var Ue=w($e,2);{var ft=H=>{var _e=zp();M("click",_e,()=>le("contacts")),b(H,_e)};U(Ue,H=>{c(o),P(()=>c(o).contacts&&c(o).contacts.length>0)&&H(ft)})}var wr=w(et,2),An=p(wr),Sa=w(An,2);Me(Sa,{class:"mb-6",children:(H,_e)=>{ot(H,{children:(rr,Ke)=>{var Ae=Yp(),jt=G(Ae);nt(jt,{class:"text-2xl mb-4",children:(V,Z)=>{var se=Ye();L(()=>N(se,(c(o),P(()=>c(o).title)))),b(V,se)},$$slots:{default:!0}});var ve=w(jt,2),qt=w(p(ve)),ie=w(ve,2);{var Pe=V=>{var Z=Wp(),se=p(Z),rt=w(p(se),2),be=p(rt),we=w(se,2);{var Le=He=>{var xe=Fp(),kt=p(xe);L(()=>N(kt,c($))),b(He,xe)};U(we,He=>{c(ct)&&He(Le)})}L(()=>N(be,c(ct)?"â¼":"â¶")),M("click",rt,_t),b(V,Z)};U(ie,V=>{c($)&&V(Pe)})}var j=w(ie,2);{var xt=V=>{var Z=Vp(),se=p(Z);L(()=>N(se,c(Q))),b(V,Z)};U(j,V=>{c(Q)&&V(xt)})}var Nt=w(j,2),vt=p(Nt);{var Et=V=>{var Z=Gp(),se=p(Z);L(()=>N(se,(c(o),P(()=>c(o).recruiting_status)))),b(V,Z)};U(vt,V=>{c(o),P(()=>c(o).recruiting_status)&&V(Et)})}var sr=w(vt,2);{var lr=V=>{var Z=Jp(),se=G(Z);vr(se,1,()=>(c(o),P(()=>c(o).conditions.slice(0,5))),fr,(we,Le)=>{var He=Kp(),xe=p(He);L(()=>N(xe,c(Le))),b(we,He)});var rt=w(se,2);{var be=we=>{var Le=Hp(),He=p(Le);L(()=>N(He,`+${c(o),P(()=>c(o).conditions.length-5)??""} more`)),b(we,Le)};U(rt,we=>{c(o),P(()=>c(o).conditions.length>5)&&we(be)})}b(V,Z)};U(sr,V=>{c(o),P(()=>c(o).conditions&&c(o).conditions.length>0)&&V(lr)})}L(()=>{ve.disabled=c(I),N(qt,` ${c(I)?"Generating...":"Simplify Title (AI)"}`)}),M("click",ve,Xe),b(rr,Ae)},$$slots:{default:!0}})},$$slots:{default:!0}});var Ea=w(Sa,2);{var vc=H=>{Me(H,{class:"mb-6",id:"summary",children:(_e,rr)=>{var Ke=ng(),Ae=G(Ke);ot(Ae,{children:(ve,qt)=>{var ie=Qp(),Pe=p(ie);nt(Pe,{class:"text-lg",children:(Nt,vt)=>{var Et=Ye("Summary");b(Nt,Et)},$$slots:{default:!0}});var j=w(Pe,2),xt=w(p(j));L(()=>{j.disabled=c(A),N(xt,` ${c(A)?"Generating...":"AI Summary"}`)}),M("click",j,W),b(ve,ie)},$$slots:{default:!0}});var jt=w(Ae,2);st(jt,{children:(ve,qt)=>{var ie=sg(),Pe=G(ie),j=p(Pe);{var xt=V=>{var Z=Xp(),se=G(Z),rt=p(se),be=w(se,2),we=p(be);L(Le=>{N(rt,Le),N(we,c(We)?"Read less":"Read more")},[()=>(c(We),c(o),P(()=>c(We)?c(o).brief_summary:c(o).brief_summary.substring(0,Lt)+"..."))]),M("click",be,()=>S(We,!c(We))),b(V,Z)},Nt=V=>{var Z=Zp(),se=p(Z);L(()=>N(se,(c(o),P(()=>c(o).brief_summary)))),b(V,Z)};U(j,V=>{c(o),P(()=>c(o).brief_summary.length>Lt)?V(xt):V(Nt,!1)})}var vt=w(Pe,2);{var Et=V=>{var Z=tg(),se=p(Z),rt=w(p(se),2),be=p(rt),we=w(se,2);{var Le=He=>{var xe=eg(),kt=p(xe),cr=p(kt);L(()=>N(cr,c(T))),b(He,xe)};U(we,He=>{c(R)&&He(Le)})}L(()=>N(be,c(R)?"â¼":"â¶")),M("click",rt,Ce),b(V,Z)};U(vt,V=>{c(T)&&V(Et)})}var sr=w(vt,2);{var lr=V=>{var Z=rg(),se=p(Z);L(()=>N(se,c(E))),b(V,Z)};U(sr,V=>{c(E)&&V(lr)})}b(ve,ie)},$$slots:{default:!0}}),b(_e,Ke)},$$slots:{default:!0}})};U(Ea,H=>{c(o),P(()=>c(o).brief_summary)&&H(vc)})}var $a=w(Ea,2);{var pc=H=>{Me(H,{class:"mb-6",children:(_e,rr)=>{var Ke=ag(),Ae=G(Ke);ot(Ae,{children:(ve,qt)=>{nt(ve,{class:"text-lg",children:(ie,Pe)=>{var j=Ye("Description");b(ie,j)},$$slots:{default:!0}})},$$slots:{default:!0}});var jt=w(Ae,2);st(jt,{children:(ve,qt)=>{var ie=ig(),Pe=p(ie),j=p(Pe);L(()=>N(j,(c(o),P(()=>c(o).detailed_description)))),b(ve,ie)},$$slots:{default:!0}}),b(_e,Ke)},$$slots:{default:!0}})};U($a,H=>{c(o),P(()=>c(o).detailed_description)&&H(pc)})}var Ta=w($a,2);{var gc=H=>{Me(H,{class:"mb-6",id:"eligibility",children:(_e,rr)=>{var Ke=wg(),Ae=G(Ke);ot(Ae,{children:(ve,qt)=>{var ie=og(),Pe=p(ie);nt(Pe,{class:"text-lg",children:(Nt,vt)=>{var Et=Ye("Eligibility Criteria");b(Nt,Et)},$$slots:{default:!0}});var j=w(Pe,2),xt=w(p(j));L(()=>{j.disabled=c(_),N(xt,` ${c(_)?"Generating...":"AI Screening"}`)}),M("click",j,Ut),b(ve,ie)},$$slots:{default:!0}});var jt=w(Ae,2);st(jt,{children:(ve,qt)=>{var ie=yg(),Pe=G(ie),j=p(Pe);{var xt=V=>{var Z=lg(),se=G(Z),rt=p(se),be=w(se,2),we=p(be);L(Le=>{N(rt,Le),N(we,c(ce)?"Read less":"Read more")},[()=>(c(ce),c(o),P(()=>c(ce)?c(o).eligibility_criteria:c(o).eligibility_criteria.substring(0,Te)+"..."))]),M("click",be,()=>S(ce,!c(ce))),b(V,Z)},Nt=V=>{var Z=cg(),se=p(Z);L(()=>N(se,(c(o),P(()=>c(o).eligibility_criteria)))),b(V,Z)};U(j,V=>{c(o),P(()=>c(o).eligibility_criteria.length>Te)?V(xt):V(Nt,!1)})}var vt=w(Pe,2);{var Et=V=>{var Z=_g(),se=p(Z),rt=w(p(se),2),be=p(rt),we=w(se,2);{var Le=He=>{var xe=mg(),kt=p(xe);{var cr=vs=>{var Fs=fg(),Ws=G(Fs),Pn=p(Ws),On=p(Pn),di=w(Pn,2),Vs=w(Ws,2);{var hi=Qr=>{var Hs=dg(),Kt=p(Hs),Tr=p(Kt),Ia=w(Kt,2);{var Ec=gi=>{var Na=ug(),Tc=p(Na);L(()=>N(Tc,(c(m),c(K),P(()=>c(m)[c(K)].explanation)))),b(gi,Na)};U(Ia,gi=>{c(m),c(K),P(()=>c(m)[c(K)].explanation)&&gi(Ec)})}var $c=w(Ia,2),vi=p($c),pi=w(vi,2),ja=w(pi,2);L(()=>{N(Tr,`${c(K)+1}. ${c(m),c(K),P(()=>c(m)[c(K)].question)??""}`),Fr(vi,1,`px-3 py-1 text-xs rounded border ${c(x),c(K),P(()=>c(x)[c(K)]==="yes"?"bg-primary text-primary-foreground border-primary":"bg-background border-border hover:bg-muted")??""} transition-colors`),Fr(pi,1,`px-3 py-1 text-xs rounded border ${c(x),c(K),P(()=>c(x)[c(K)]==="no"?"bg-primary text-primary-foreground border-primary":"bg-background border-border hover:bg-muted")??""} transition-colors`),Fr(ja,1,`px-3 py-1 text-xs rounded border ${c(x),c(K),P(()=>c(x)[c(K)]==="unsure"?"bg-primary text-primary-foreground border-primary":"bg-background border-border hover:bg-muted")??""} transition-colors`)}),M("click",vi,()=>C("yes")),M("click",pi,()=>C("no")),M("click",ja,()=>C("unsure")),b(Qr,Hs)};U(Vs,Qr=>{c(m),c(K),P(()=>c(m)[c(K)])&&Qr(hi)})}var fi=w(Vs,2),Gs=p(fi),Ks=w(Gs,2);vr(Ks,5,()=>c(m),fr,(Qr,Hs,Kt)=>{var Tr=hg();L(()=>Fr(Tr,1,`w-2 h-2 rounded-full ${c(K),c(x),P(()=>Kt===c(K)?"bg-primary":c(x)[Kt]?"bg-primary/50":"bg-muted")??""} transition-colors`)),M("click",Tr,()=>{S(K,Kt),S(Ve,!1)}),b(Qr,Tr)});var Rn=w(Ks,2);L(()=>{N(On,`Question ${c(K)+1} of ${c(m),P(()=>c(m).length)??""}`),Gs.disabled=c(K)===0,Rn.disabled=(c(K),c(m),c(x),P(()=>c(K)===c(m).length-1||!c(x)[c(K)]))}),M("click",di,Ie),M("click",Gs,Ze),M("click",Rn,Se),b(vs,Fs)},ui=vs=>{var Fs=gg(),Ws=p(Fs),Pn=w(p(Ws),2),On=p(Pn),di=p(On),Vs=w(On,2),hi=p(Vs),fi=w(Vs,2),Gs=p(fi),Ks=w(Ws,2);{var Rn=Kt=>{var Tr=vg();b(Kt,Tr)},Qr=Kt=>{var Tr=pg();b(Kt,Tr)};U(Ks,Kt=>{c(a),P(()=>c(a).likelyEligible)?Kt(Rn):Kt(Qr,!1)})}var Hs=w(Ks,2);L(()=>{N(di,`${c(a),P(()=>c(a).yesCount)??""} Yes`),N(hi,`${c(a),P(()=>c(a).noCount)??""} No`),N(Gs,`${c(a),P(()=>c(a).unsureCount)??""} Unsure`)}),M("click",Hs,Ie),b(vs,Fs)};U(kt,vs=>{c(Ve)?vs(ui,!1):vs(cr)})}b(He,xe)};U(we,He=>{c(O)&&He(Le)})}L(()=>N(be,c(O)?"â¼":"â¶")),M("click",rt,ee),b(V,Z)};U(vt,V=>{c(m)&&V(Et)})}var sr=w(vt,2);{var lr=V=>{var Z=bg(),se=p(Z);L(()=>N(se,c(y))),b(V,Z)};U(sr,V=>{c(y)&&V(lr)})}b(ve,ie)},$$slots:{default:!0}}),b(_e,Ke)},$$slots:{default:!0}})};U(Ta,H=>{c(o),P(()=>c(o).eligibility_criteria)&&H(gc)})}var Aa=w(Ta,2);{var mc=H=>{Me(H,{class:"mb-6",id:"interventions",children:(_e,rr)=>{var Ke=Ag(),Ae=G(Ke);ot(Ae,{children:(ve,qt)=>{nt(ve,{class:"text-lg",children:(ie,Pe)=>{var j=Ye("Interventions");b(ie,j)},$$slots:{default:!0}})},$$slots:{default:!0}});var jt=w(Ae,2);st(jt,{children:(ve,qt)=>{var ie=Tg();vr(ie,5,()=>(c(o),P(()=>c(o).interventions)),fr,(Pe,j,xt)=>{var Nt=$g(),vt=p(Nt),Et=p(vt),sr=p(Et),lr=p(sr),V=w(sr,2);{var Z=xe=>{var kt=xg(),cr=p(kt);L(()=>N(cr,(c(j),P(()=>c(j).intervention_type)))),b(xe,kt)};U(V,xe=>{c(j),P(()=>c(j).intervention_type)&&xe(Z)})}var se=w(V,2);{var rt=xe=>{var kt=kg(),cr=p(kt);L(ui=>N(cr,`${ui??""}${c(j),P(()=>c(j).description.length>100?"...":"")??""}`),[()=>(c(j),P(()=>c(j).description.substring(0,100)))]),b(xe,kt)};U(se,xe=>{c(j),c(X),P(()=>c(j).description&&!c(X)[xt])&&xe(rt)})}var be=w(Et,2);{var we=xe=>{var kt=Sg(),cr=p(kt);L(()=>N(cr,(c(X),P(()=>c(X)[xt]?"â¼":"â¶")))),M("click",kt,()=>De(xt)),b(xe,kt)};U(be,xe=>{c(j),P(()=>c(j).description&&c(j).description.length>100)&&xe(we)})}var Le=w(vt,2);{var He=xe=>{var kt=Eg(),cr=p(kt);L(()=>N(cr,(c(j),P(()=>c(j).description)))),b(xe,kt)};U(Le,xe=>{c(j),c(X),P(()=>c(j).description&&c(X)[xt])&&xe(He)})}L(()=>N(lr,(c(j),P(()=>c(j).intervention_name)))),b(Pe,Nt)}),b(ve,ie)},$$slots:{default:!0}}),b(_e,Ke)},$$slots:{default:!0}})};U(Aa,H=>{c(o),P(()=>c(o).interventions&&c(o).interventions.length>0)&&H(mc)})}var Pa=w(Aa,2);{var _c=H=>{Me(H,{class:"mb-6",id:"locations",children:(_e,rr)=>{var Ke=Ig(),Ae=G(Ke);ot(Ae,{children:(ve,qt)=>{nt(ve,{class:"text-lg",children:(ie,Pe)=>{var j=Ye("Locations");b(ie,j)},$$slots:{default:!0}})},$$slots:{default:!0}});var jt=w(Ae,2);st(jt,{children:(ve,qt)=>{var ie=Cg();vr(ie,5,()=>(c(o),P(()=>c(o).locations)),fr,(Pe,j,xt,Nt)=>{var vt=Rg(),Et=p(vt);{var sr=Z=>{var se=Og(),rt=G(se),be=p(rt),we=w(rt,2);{var Le=He=>{var xe=Pg();b(He,xe)};U(we,He=>{c(j),P(()=>c(j).city||c(j).state||c(j).country)&&He(Le)})}L(()=>N(be,(c(j),P(()=>c(j).facility_name)))),b(Z,se)};U(Et,Z=>{c(j),P(()=>c(j).facility_name)&&Z(sr)})}var lr=w(Et,2),V=p(lr);L(Z=>N(V,Z),[()=>(c(j),P(()=>[c(j).city,c(j).state,c(j).country].filter(Boolean).join(", ")))]),b(Pe,vt)}),b(ve,ie)},$$slots:{default:!0}}),b(_e,Ke)},$$slots:{default:!0}})},bc=H=>{Me(H,{class:"mb-6",children:(_e,rr)=>{var Ke=Ng(),Ae=G(Ke);ot(Ae,{children:(ve,qt)=>{nt(ve,{class:"text-lg",children:(ie,Pe)=>{var j=Ye("Locations");b(ie,j)},$$slots:{default:!0}})},$$slots:{default:!0}});var jt=w(Ae,2);st(jt,{children:(ve,qt)=>{var ie=jg();b(ve,ie)},$$slots:{default:!0}}),b(_e,Ke)},$$slots:{default:!0}})};U(Pa,H=>{c(o),P(()=>c(o).locations&&c(o).locations.length>0)?H(_c):H(bc,!1)})}var Oa=w(Pa,2);{var yc=H=>{Me(H,{class:"mb-6",id:"contacts",children:(_e,rr)=>{var Ke=Mg(),Ae=G(Ke);ot(Ae,{children:(ve,qt)=>{nt(ve,{class:"text-lg",children:(ie,Pe)=>{var j=Ye("Contacts");b(ie,j)},$$slots:{default:!0}})},$$slots:{default:!0}});var jt=w(Ae,2);st(jt,{children:(ve,qt)=>{var ie=Bg();vr(ie,5,()=>(c(o),P(()=>c(o).contacts)),fr,(Pe,j)=>{var xt=qg(),Nt=p(xt),vt=p(Nt),Et=w(vt);{var sr=be=>{var we=Ug(),Le=p(we);L(()=>N(Le,`(${c(j),P(()=>c(j).role)??""})`)),b(be,we)};U(Et,be=>{c(j),P(()=>c(j).role)&&be(sr)})}var lr=w(Nt,2),V=p(lr);{var Z=be=>{var we=Lg(),Le=p(we);L(()=>N(Le,`Phone: ${c(j),P(()=>c(j).phone)??""}`)),b(be,we)};U(V,be=>{c(j),P(()=>c(j).phone)&&be(Z)})}var se=w(V,2);{var rt=be=>{var we=Dg(),Le=p(we);L(()=>N(Le,`Email: ${c(j),P(()=>c(j).email)??""}`)),b(be,we)};U(se,be=>{c(j),P(()=>c(j).email)&&be(rt)})}L(()=>N(vt,`${c(j),P(()=>c(j).name)??""} `)),b(Pe,xt)}),b(ve,ie)},$$slots:{default:!0}}),b(_e,Ke)},$$slots:{default:!0}})};U(Oa,H=>{c(o),P(()=>c(o).contacts&&c(o).contacts.length>0)&&H(yc)})}var Ra=w(Oa,2);Me(Ra,{class:"mb-6",children:(H,_e)=>{st(H,{class:"p-6",children:(rr,Ke)=>{var Ae=zg();M("click",Ae,Qe),b(rr,Ae)},$$slots:{default:!0}})},$$slots:{default:!0}});var wc=w(Ra,2),Ca=p(wc),xc=p(Ca),kc=w(Ca,2);{var Sc=H=>{var _e=Fg(),rr=p(_e);L(()=>N(rr,`ClinicalTrials.gov ID: ${c(o),P(()=>c(o).source_id)??""}`)),b(H,_e)};U(kc,H=>{c(o),P(()=>c(o).source==="ctgov"&&c(o).source_id)&&H(Sc)})}L(()=>N(xc,`Study ID: ${c(o),P(()=>c(o).id)??""}`)),M("click",Ge,()=>le("summary")),M("click",An,ut),b(Ee,je)};U(Be,Ee=>{c(o)&&Ee(Dt)},!0)}b(re,me)};U(qe,re=>{c(d)?re(he):re(ge,!1)},!0)}b(D,oe)};U(te,D=>{c(u)?D(pe):D(ae,!1)})}var it=w(te,2);{var bt=D=>{var oe=Hg(),qe=p(oe),he=p(qe);Me(he,{class:"max-w-lg w-full",children:(ge,re)=>{var me=Kg(),Be=G(me);ot(Be,{children:(Ee,je)=>{nt(Ee,{children:(Ne,et)=>{var dt=Ye("Confirm Participation");b(Ne,dt)},$$slots:{default:!0}})},$$slots:{default:!0}});var Dt=w(Be,2);st(Dt,{class:"space-y-4",children:(Ee,je)=>{var Ne=Gg(),et=w(G(Ne),2),dt=w(p(et),2),Ge=w(et,2);{var tt=fe=>{var Ue=Vg(),ft=p(Ue);L(()=>N(ft,c(g))),b(fe,Ue)};U(Ge,fe=>{c(g)&&fe(tt)})}var yt=w(Ge,2),ht=p(yt),wt=w(ht,2),$e=p(wt);L(()=>{dt.disabled=c(v),ht.disabled=c(v),wt.disabled=c(v),N($e,c(v)?"Submitting...":"Confirm Participation")}),Ps(dt,()=>c(f),fe=>S(f,fe)),M("click",ht,mt),M("click",wt,Gt),b(Ee,Ne)},$$slots:{default:!0}}),b(ge,me)},$$slots:{default:!0}}),M("click",qe,Ol(function(ge){At.call(this,e,ge)})),M("click",oe,mt),b(D,oe)};U(it,D=>{c(h)&&D(bt)})}b(t,Re),Vt(),i()}var Qg=k('<p class="text-sm text-destructive"> </p>'),Xg=k('<form class="space-y-4"><div class="space-y-2"><label for="email" class="text-sm font-medium">Email</label> <!></div> <div class="space-y-2"><label for="password" class="text-sm font-medium">Password</label> <!></div> <div class="space-y-2"><label for="confirmPassword" class="text-sm font-medium">Confirm Password</label> <!></div> <div class="space-y-2"><label class="flex items-start gap-2 text-sm"><input type="checkbox" class="mt-0.5"/> <span>I agree to receive communications about clinical trial opportunities and understand my data will be stored securely.</span></label></div> <!> <button type="submit" class="w-full h-12 px-6 bg-primary text-primary-foreground rounded-md font-semibold hover:opacity-90 disabled:opacity-50 transition-opacity"> </button> <p class="text-sm text-center text-muted-foreground">Already have an account? <button type="button" class="text-primary hover:underline">Log in</button></p></form>'),Zg=k("<!> <!>",1),em=k('<main class="min-h-screen bg-background flex items-center justify-center p-6"><div class="w-full max-w-md"><!></div></main>');function tm(t,e){Wt(e,!1);let r=F(""),s=F(""),n=F(""),i=F(!1),a=F(!1),l=F("");async function o(){if(console.log("=== handleSignup called ==="),S(l,""),!c(i)){S(l,"Please agree to the terms and conditions"),console.log("Error: No consent");return}if(c(s)!==c(n)){S(l,"Passwords do not match"),console.log("Error: Passwords do not match");return}if(c(s).length<6){S(l,"Password must be at least 6 characters"),console.log("Error: Password too short");return}S(a,!0),console.log("Starting signup for email:",c(r));try{console.log("Calling signUp...");const f=await Zf(c(r),c(s));console.log("signUp returned:",f);const{user:v,session:g}=f||{};if(!v||!g)throw new Error("Signup failed - no user or session returned");console.log("User created successfully:",v.id);const _=new URLSearchParams(window.location.search).get("redirect");_?(console.log("Redirecting to:",_),lt(`${_}?fromSignup=true`)):(console.log("Navigating to /profile"),lt("/profile"))}catch(f){console.error("Signup error:",f),S(l,f.message||"Signup failed. Please try again."),S(a,!1)}}tr();var u=em(),d=p(u),h=p(d);Me(h,{children:(f,v)=>{var g=Zg(),m=G(g);ot(m,{children:(y,O)=>{nt(y,{children:(x,T)=>{var A=Ye("Create Your Profile");b(x,A)},$$slots:{default:!0}})},$$slots:{default:!0}});var _=w(m,2);st(_,{children:(y,O)=>{var x=Xg(),T=p(x),A=w(p(T),2);gr(A,{id:"email",type:"email",placeholder:"you@example.com",required:!0,get disabled(){return c(a)},get value(){return c(r)},set value(Xe){S(r,Xe)},$$legacy:!0});var E=w(T,2),R=w(p(E),2);gr(R,{id:"password",type:"password",placeholder:"At least 6 characters",required:!0,get disabled(){return c(a)},get value(){return c(s)},set value(Xe){S(s,Xe)},$$legacy:!0});var $=w(E,2),I=w(p($),2);gr(I,{id:"confirmPassword",type:"password",placeholder:"Re-enter password",required:!0,get disabled(){return c(a)},get value(){return c(n)},set value(Xe){S(n,Xe)},$$legacy:!0});var Q=w($,2),ct=p(Q),Fe=p(ct),Qe=w(Q,2);{var Gt=Xe=>{var ee=Qg(),Ce=p(ee);L(()=>N(Ce,c(l))),b(Xe,ee)};U(Qe,Xe=>{c(l)&&Xe(Gt)})}var mt=w(Qe,2),ut=p(mt),Ut=w(mt,2),W=w(p(Ut));L(()=>{Fe.disabled=c(a),mt.disabled=c(a)||!c(i),N(ut,c(a)?"Creating account...":"Create Profile & Continue")}),Fi(Fe,()=>c(i),Xe=>S(i,Xe)),M("click",W,()=>{const ee=new URLSearchParams(window.location.search).get("redirect");lt(ee?`/login?redirect=${encodeURIComponent(ee)}`:"/login")}),M("submit",x,Rl(o)),b(y,x)},$$slots:{default:!0}}),b(f,g)},$$slots:{default:!0}}),b(t,u),Vt()}var rm=k('<p class="text-sm text-destructive"> </p>'),sm=k(`<form class="space-y-4"><div class="space-y-2"><label for="email" class="text-sm font-medium">Email</label> <!></div> <div class="space-y-2"><label for="password" class="text-sm font-medium">Password</label> <!></div> <!> <button type="submit" class="w-full h-10 px-4 py-2 bg-primary text-primary-foreground rounded-md font-medium hover:opacity-90 disabled:opacity-50"> </button> <p class="text-sm text-center text-muted-foreground">Don't have an account? <button type="button" class="text-primary hover:underline">Sign up</button></p></form>`),nm=k("<!> <!>",1),im=k('<main class="min-h-screen bg-background flex items-center justify-center p-6"><div class="w-full max-w-md"><!></div></main>');function am(t,e){Wt(e,!1);let r=F(""),s=F(""),n=F(!1),i=F("");async function a(){S(n,!0),S(i,"");try{await ev(c(r),c(s));const h=new URLSearchParams(window.location.search).get("redirect");lt(h?`${h}?fromSignup=true`:"/browse")}catch(d){S(i,d.message||"Invalid credentials. Please try again.")}finally{S(n,!1)}}tr();var l=im(),o=p(l),u=p(o);Me(u,{children:(d,h)=>{var f=nm(),v=G(f);ot(v,{children:(m,_)=>{nt(m,{children:(y,O)=>{var x=Ye("Log In");b(y,x)},$$slots:{default:!0}})},$$slots:{default:!0}});var g=w(v,2);st(g,{children:(m,_)=>{var y=sm(),O=p(y),x=w(p(O),2);gr(x,{id:"email",type:"email",placeholder:"you@example.com",required:!0,get disabled(){return c(n)},get value(){return c(r)},set value(Fe){S(r,Fe)},$$legacy:!0});var T=w(O,2),A=w(p(T),2);gr(A,{id:"password",type:"password",placeholder:"â¢â¢â¢â¢â¢â¢â¢â¢",required:!0,get disabled(){return c(n)},get value(){return c(s)},set value(Fe){S(s,Fe)},$$legacy:!0});var E=w(T,2);{var R=Fe=>{var Qe=rm(),Gt=p(Qe);L(()=>N(Gt,c(i))),b(Fe,Qe)};U(E,Fe=>{c(i)&&Fe(R)})}var $=w(E,2),I=p($),Q=w($,2),ct=w(p(Q));L(()=>{$.disabled=c(n),N(I,c(n)?"Logging in...":"Log In")}),M("click",ct,()=>{const Qe=new URLSearchParams(window.location.search).get("redirect");lt(Qe?`/signup?redirect=${encodeURIComponent(Qe)}`:"/signup")}),M("submit",y,Rl(a)),b(m,y)},$$slots:{default:!0}}),b(d,f)},$$slots:{default:!0}}),b(t,l),Vt()}var om=k(`<div class="mb-6 p-4 bg-primary/10 text-primary rounded-md border border-primary/20"><div class="flex items-start gap-3"><svg class="w-5 h-5 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div><p class="font-medium">Request Submitted</p> <p class="text-sm mt-1 opacity-90">The study team will review your request and contact you if you're eligible. You can view your requests below.</p></div></div></div>`),lm=k('<div class="text-center py-12"><p class="text-muted-foreground">Loading...</p></div>'),cm=k(`<p class="text-muted-foreground mb-4">You haven't participated in any studies yet.</p> <button class="px-4 py-2 bg-primary text-primary-foreground rounded-md text-sm font-medium hover:opacity-90">Browse Studies</button>`,1),um=k('<span class="px-2 py-1 rounded text-xs font-medium bg-primary/10 text-primary"> </span>'),dm=k('<p class="text-sm text-muted-foreground line-clamp-2"> </p>'),hm=k('<div class="flex justify-between items-start"><div class="flex-1"><!> <div class="flex items-center gap-2 mb-2"><span> </span> <!></div> <!></div></div>'),fm=k('<button class="px-4 py-2 border border-destructive text-destructive rounded-md text-sm font-medium hover:bg-destructive/10 transition-colors">Withdraw Request</button>'),vm=k('<div class="flex justify-between items-center text-sm"><div class="text-muted-foreground"><p> </p> <p> </p></div> <!></div>'),pm=k("<!> <!>",1),gm=k('<div class="space-y-4"><!></div>'),mm=k('<div class="grid grid-cols-2 gap-4"><div class="space-y-2"><label for="age" class="text-sm font-medium">Age</label> <!></div> <div class="space-y-2"><label for="zip_code" class="text-sm font-medium">ZIP Code</label> <!></div></div> <div class="space-y-2"><label class="text-sm font-medium">Gender</label> <div class="flex gap-4"><label class="flex items-center gap-2"><input type="radio"/> <span class="text-sm">Male</span></label> <label class="flex items-center gap-2"><input type="radio"/> <span class="text-sm">Female</span></label> <label class="flex items-center gap-2"><input type="radio"/> <span class="text-sm">Other</span></label></div></div>',1),_m=k("<!> <!>",1),bm=k('<label class="flex items-center gap-2 p-3 border rounded-md cursor-pointer hover:bg-accent"><input type="checkbox"/> <span class="text-sm"> </span></label>'),ym=k('<div class="space-y-2"><label for="other_condition" class="text-sm font-medium">Please specify</label> <!></div>'),wm=k('<div class="space-y-2"><label class="text-sm font-medium">Select all conditions that apply</label> <div class="grid grid-cols-2 gap-3"></div></div> <!>',1),xm=k("<!> <!>",1),km=k('<div class="space-y-2"><label for="medications" class="text-sm font-medium">Medications</label> <textarea id="medications" placeholder="List your current medications (one per line)" rows="4" class="w-full px-3 py-2 rounded-md border border-input bg-background text-sm"></textarea></div> <div class="space-y-2"><label for="allergies" class="text-sm font-medium">Drug Allergies</label> <textarea id="allergies" placeholder="List any drug allergies" rows="3" class="w-full px-3 py-2 rounded-md border border-input bg-background text-sm"></textarea></div>',1),Sm=k("<!> <!>",1),Em=k('<div class="space-y-2"><label for="travel_radius" class="text-sm font-medium"> </label> <input id="travel_radius" type="range" min="5" max="100" step="5" class="w-full"/> <div class="flex justify-between text-xs text-muted-foreground"><span>5 mi</span> <span>100 mi</span></div></div> <div class="space-y-2"><label class="text-sm font-medium">Trial Format Preferences</label> <label class="flex items-center gap-2 p-3 border rounded-md cursor-pointer"><input type="checkbox"/> <span class="text-sm">Willing to participate in-person</span></label> <label class="flex items-center gap-2 p-3 border rounded-md cursor-pointer"><input type="checkbox"/> <span class="text-sm">Willing to participate remotely</span></label></div>',1),$m=k("<!> <!>",1),Tm=k(`<div class="space-y-2"><label for="additional_notes" class="text-sm font-medium">Additional Notes (Optional)</label> <textarea id="additional_notes" placeholder="Any additional information you'd like to share..." rows="4" class="w-full px-3 py-2 rounded-md border border-input bg-background text-sm"></textarea></div>`),Am=k("<!> <!>",1),Pm=k('<div class="space-y-6"><!> <!> <!> <!> <!> <div class="flex justify-end"><button class="px-6 py-2 bg-primary text-primary-foreground rounded-md font-medium hover:opacity-90 disabled:opacity-50"> </button></div></div>'),Om=k('<div class="border-b mb-6"><div class="flex gap-6"><button> </button> <button>Personal Information</button></div></div> <!> <!>',1),Rm=k('<main class="min-h-screen bg-background p-6"><div class="mx-auto max-w-5xl"><h1 class="text-3xl font-bold mb-6">Manage Your Participation</h1> <!> <!></div></main>');function Cm(t,e){Wt(e,!1);const r=()=>hn(bn,"$user",s),[s,n]=ii(),i=[];let a=F("requests"),l=F(!0),o=F(!1),u=F([]),d=F(!1),h=F({age:"",gender:"",race:"",ethnicity:"",conditions:[],other_condition:"",medications:"",allergies:"",previous_trials:"",trial_experience:"",zip_code:"",travel_radius:25,weekday_availability:!1,weekend_availability:!1,preferred_time_of_day:"",in_person_willing:!1,remote_willing:!1,compensation_importance:3,smoker:"",alcohol_use:"",exercise_frequency:"",has_insurance:"",insurance_type:"",additional_notes:""});const f=["Diabetes","Asthma","Depression","Anxiety","Hypertension","Cancer","Heart Disease","Arthritis","COPD","Other"];ai(async()=>{if(!r()){lt("/login");return}new URLSearchParams(window.location.search).get("participationSuccess")==="true"&&(S(d,!0),window.history.replaceState({},"","/profile"),setTimeout(()=>{S(d,!1)},5e3)),await v()});async function v(){S(l,!0);try{S(u,await Ao());const I=await rv(r().id);I&&S(h,{...c(h),...I})}catch(I){console.error("Error loading profile data:",I)}finally{S(l,!1)}}async function g(I){if(confirm("Are you sure you want to withdraw this participation request?"))try{await iv(I),S(u,await Ao())}catch{alert("Failed to withdraw request. Please try again.")}}function m(I){c(h).conditions.includes(I)?St(h,c(h).conditions=c(h).conditions.filter(Q=>Q!==I)):St(h,c(h).conditions=[...c(h).conditions,I])}async function _(){S(o,!0);try{await sv(r().id,c(h)),alert("Profile saved successfully!")}catch{alert("Failed to save profile. Please try again.")}finally{S(o,!1)}}function y(I){switch(I){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"withdrawn":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}tr();var O=Rm(),x=p(O),T=w(p(x),2);{var A=I=>{var Q=om();b(I,Q)};U(T,I=>{c(d)&&I(A)})}var E=w(T,2);{var R=I=>{var Q=lm();b(I,Q)},$=I=>{var Q=Om(),ct=G(Q),Fe=p(ct),Qe=p(Fe),Gt=p(Qe),mt=w(Qe,2),ut=w(ct,2);{var Ut=ee=>{var Ce=gm(),_t=p(Ce);{var le=De=>{Me(De,{children:(We,ce)=>{st(We,{class:"p-8 text-center",children:(Lt,Te)=>{var K=cm(),Ve=w(G(K),2);M("click",Ve,()=>lt("/browse")),b(Lt,K)},$$slots:{default:!0}})},$$slots:{default:!0}})},X=De=>{var We=pr(),ce=G(We);vr(ce,1,()=>c(u),fr,(Lt,Te)=>{Me(Lt,{class:"cursor-pointer hover:shadow-md transition-shadow",$$events:{click:()=>lt(`/study/${c(Te).study_id}`)},children:(K,Ve)=>{var Se=pm(),Ze=G(Se);ot(Ze,{children:(C,Re)=>{var te=hm(),pe=p(te),ae=p(pe);nt(ae,{class:"text-lg mb-2",children:(re,me)=>{var Be=Ye();L(()=>N(Be,c(Te).studies?.title||"Study")),b(re,Be)},$$slots:{default:!0}});var it=w(ae,2),bt=p(it),D=p(bt),oe=w(bt,2);{var qe=re=>{var me=um(),Be=p(me);L(()=>N(Be,c(Te).studies.recruiting_status)),b(re,me)};U(oe,re=>{c(Te).studies?.recruiting_status&&re(qe)})}var he=w(it,2);{var ge=re=>{var me=dm(),Be=p(me);L(()=>N(Be,c(Te).studies.brief_summary)),b(re,me)};U(he,re=>{c(Te).studies?.brief_summary&&re(ge)})}L((re,me)=>{Fr(bt,1,`px-2 py-1 rounded text-xs font-medium ${re??""}`),N(D,me)},[()=>y(c(Te).status),()=>c(Te).status.charAt(0).toUpperCase()+c(Te).status.slice(1)]),b(C,te)},$$slots:{default:!0}});var Ie=w(Ze,2);st(Ie,{children:(C,Re)=>{var te=vm(),pe=p(te),ae=p(pe),it=p(ae),bt=w(ae,2),D=p(bt),oe=w(pe,2);{var qe=he=>{var ge=fm();M("click",ge,Ol(()=>g(c(Te).id))),b(he,ge)};U(oe,he=>{c(Te).status==="pending"&&he(qe)})}L(he=>{N(it,`Requested: ${he??""}`),N(D,`Contact preference: ${c(Te).contact_preference??""}`)},[()=>new Date(c(Te).created_at).toLocaleDateString()]),b(C,te)},$$slots:{default:!0}}),b(K,Se)},$$slots:{default:!0}})}),b(De,We)};U(_t,De=>{c(u).length===0?De(le):De(X,!1)})}b(ee,Ce)};U(ut,ee=>{c(a)==="requests"&&ee(Ut)})}var W=w(ut,2);{var Xe=ee=>{var Ce=Pm(),_t=p(Ce);Me(_t,{children:(K,Ve)=>{var Se=_m(),Ze=G(Se);ot(Ze,{children:(C,Re)=>{nt(C,{children:(te,pe)=>{var ae=Ye("Basic Demographics");b(te,ae)},$$slots:{default:!0}})},$$slots:{default:!0}});var Ie=w(Ze,2);st(Ie,{class:"space-y-4",children:(C,Re)=>{var te=mm(),pe=G(te),ae=p(pe),it=w(p(ae),2);gr(it,{id:"age",type:"number",placeholder:"25",get value(){return c(h).age},set value(Ee){St(h,c(h).age=Ee)},$$legacy:!0});var bt=w(ae,2),D=w(p(bt),2);gr(D,{id:"zip_code",placeholder:"12345",maxlength:"5",get value(){return c(h).zip_code},set value(Ee){St(h,c(h).zip_code=Ee)},$$legacy:!0});var oe=w(pe,2),qe=w(p(oe),2),he=p(qe),ge=p(he);ge.value=ge.__value="male";var re=w(he,2),me=p(re);me.value=me.__value="female";var Be=w(re,2),Dt=p(Be);Dt.value=Dt.__value="other",yi(i,[],ge,()=>c(h).gender,Ee=>St(h,c(h).gender=Ee)),yi(i,[],me,()=>c(h).gender,Ee=>St(h,c(h).gender=Ee)),yi(i,[],Dt,()=>c(h).gender,Ee=>St(h,c(h).gender=Ee)),b(C,te)},$$slots:{default:!0}}),b(K,Se)},$$slots:{default:!0}});var le=w(_t,2);Me(le,{children:(K,Ve)=>{var Se=xm(),Ze=G(Se);ot(Ze,{children:(C,Re)=>{nt(C,{children:(te,pe)=>{var ae=Ye("Medical Conditions");b(te,ae)},$$slots:{default:!0}})},$$slots:{default:!0}});var Ie=w(Ze,2);st(Ie,{class:"space-y-4",children:(C,Re)=>{var te=wm(),pe=G(te),ae=w(p(pe),2);vr(ae,5,()=>f,fr,(D,oe)=>{var qe=bm(),he=p(qe),ge=w(he,2),re=p(ge);L(me=>{ed(he,me),N(re,c(oe))},[()=>c(h).conditions.includes(c(oe))]),M("change",he,()=>m(c(oe))),b(D,qe)});var it=w(pe,2);{var bt=D=>{var oe=ym(),qe=w(p(oe),2);gr(qe,{id:"other_condition",placeholder:"Enter condition",get value(){return c(h).other_condition},set value(he){St(h,c(h).other_condition=he)},$$legacy:!0}),b(D,oe)};U(it,D=>{c(h).conditions.includes("Other")&&D(bt)})}b(C,te)},$$slots:{default:!0}}),b(K,Se)},$$slots:{default:!0}});var X=w(le,2);Me(X,{children:(K,Ve)=>{var Se=Sm(),Ze=G(Se);ot(Ze,{children:(C,Re)=>{nt(C,{children:(te,pe)=>{var ae=Ye("Current Medications");b(te,ae)},$$slots:{default:!0}})},$$slots:{default:!0}});var Ie=w(Ze,2);st(Ie,{class:"space-y-4",children:(C,Re)=>{var te=km(),pe=G(te),ae=w(p(pe),2),it=w(pe,2),bt=w(p(it),2);Ps(ae,()=>c(h).medications,D=>St(h,c(h).medications=D)),Ps(bt,()=>c(h).allergies,D=>St(h,c(h).allergies=D)),b(C,te)},$$slots:{default:!0}}),b(K,Se)},$$slots:{default:!0}});var De=w(X,2);Me(De,{children:(K,Ve)=>{var Se=$m(),Ze=G(Se);ot(Ze,{children:(C,Re)=>{nt(C,{children:(te,pe)=>{var ae=Ye("Location & Preferences");b(te,ae)},$$slots:{default:!0}})},$$slots:{default:!0}});var Ie=w(Ze,2);st(Ie,{class:"space-y-4",children:(C,Re)=>{var te=Em(),pe=G(te),ae=p(pe),it=p(ae),bt=w(ae,2),D=w(pe,2),oe=w(p(D),2),qe=p(oe),he=w(oe,2),ge=p(he);L(()=>N(it,`Willing to travel (miles): ${c(h).travel_radius??""}`)),Ps(bt,()=>c(h).travel_radius,re=>St(h,c(h).travel_radius=re)),Fi(qe,()=>c(h).in_person_willing,re=>St(h,c(h).in_person_willing=re)),Fi(ge,()=>c(h).remote_willing,re=>St(h,c(h).remote_willing=re)),b(C,te)},$$slots:{default:!0}}),b(K,Se)},$$slots:{default:!0}});var We=w(De,2);Me(We,{children:(K,Ve)=>{var Se=Am(),Ze=G(Se);ot(Ze,{children:(C,Re)=>{nt(C,{children:(te,pe)=>{var ae=Ye("Additional Information");b(te,ae)},$$slots:{default:!0}})},$$slots:{default:!0}});var Ie=w(Ze,2);st(Ie,{children:(C,Re)=>{var te=Tm(),pe=w(p(te),2);Ps(pe,()=>c(h).additional_notes,ae=>St(h,c(h).additional_notes=ae)),b(C,te)},$$slots:{default:!0}}),b(K,Se)},$$slots:{default:!0}});var ce=w(We,2),Lt=p(ce),Te=p(Lt);L(()=>{Lt.disabled=c(o),N(Te,c(o)?"Saving...":"Save Profile")}),M("click",Lt,_),b(ee,Ce)};U(W,ee=>{c(a)==="info"&&ee(Xe)})}L(()=>{Fr(Qe,1,`pb-3 px-2 font-medium border-b-2 transition-colors ${c(a)==="requests"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"}`),N(Gt,`Your Requests (${c(u).length??""})`),Fr(mt,1,`pb-3 px-2 font-medium border-b-2 transition-colors ${c(a)==="info"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"}`)}),M("click",Qe,()=>S(a,"requests")),M("click",mt,()=>S(a,"info")),b(I,Q)};U(E,I=>{c(l)?I(R):I($,!1)})}b(t,O),Vt(),n()}var Im=k('<a href="/profile" class="text-sm font-medium hover:text-primary transition-colors">Profile</a> <button class="text-sm font-medium hover:text-primary transition-colors">Sign Out</button>',1),jm=k('<a href="/login" class="text-sm font-medium hover:text-primary transition-colors">Login</a> <a href="/signup" class="px-4 py-2 bg-primary text-primary-foreground rounded-md text-sm font-medium hover:opacity-90 transition-opacity">Sign Up</a>',1),Nm=k('<nav class="border-b bg-background"><div class="flex items-center justify-between max-w-7xl mx-auto px-6 py-4"><a href="/" class="text-xl font-bold text-primary">Flow Trials</a> <div class="flex items-center gap-6"><a href="/browse" class="text-sm font-medium hover:text-primary transition-colors">Browse</a> <!></div></div></nav> <!>',1);function Um(t,e){Wt(e,!1);const r=()=>hn(bn,"$user",s),[s,n]=ii(),i={"/":ep,"/browse":Cp,"/study/:id":Yg,"/signup":tm,"/login":am,"/profile":Cm};ai(()=>{lv()});async function a(){await tv(),lt("/")}tr();var l=Nm(),o=G(l),u=p(o),d=p(u);Ys(d,y=>Zs?.(y));var h=w(d,2),f=p(h);Ys(f,y=>Zs?.(y));var v=w(f,2);{var g=y=>{var O=Im(),x=G(O);Ys(x,A=>Zs?.(A));var T=w(x,2);M("click",T,a),b(y,O)},m=y=>{var O=jm(),x=G(O);Ys(x,A=>Zs?.(A));var T=w(x,2);Ys(T,A=>Zs?.(A)),b(y,O)};U(v,y=>{r()?y(g):y(m,!1)})}var _=w(o,2);md(_,{get routes(){return i}}),b(t,l),Vt(),n()}Mu(Um,{target:document.getElementById("app")});
